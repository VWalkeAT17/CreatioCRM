(self.webpackChunkapp_studio_enterprise_duplicates_widget=self.webpackChunkapp_studio_enterprise_duplicates_widget||[]).push([[8296],{48296:(H,I,f)=>{f.r(I),f.d(I,{BaseTreeControl:()=>N,CDK_TREE_NODE_OUTLET_NODE:()=>C,CdkNestedTreeNode:()=>_,CdkTree:()=>u,CdkTreeModule:()=>k,CdkTreeNode:()=>h,CdkTreeNodeDef:()=>g,CdkTreeNodeOutlet:()=>p,CdkTreeNodeOutletContext:()=>A,CdkTreeNodePadding:()=>x,CdkTreeNodeToggle:()=>D,FlatTreeControl:()=>P,NestedTreeControl:()=>j,getMultipleTreeControlsError:()=>O,getTreeControlMissingError:()=>M,getTreeMissingMatchingNodeDefError:()=>K,getTreeMultipleDefaultNodeDefsError:()=>S,getTreeNoValidDataSourceError:()=>w});var b=f(52411),a=f(62278),o=f(36486),n=f(22307),B=f(27075),m=f(32667),T=f(14495);class N{constructor(){this.expansionModel=new b.SelectionModel(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map(s=>this._trackByValue(s)))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map(s=>this._trackByValue(s)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}class P extends N{constructor(e,t,s){super(),this.getLevel=e,this.isExpandable=t,this.options=s,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const t=this.dataNodes.indexOf(e),s=[];for(let i=t+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)s.push(this.dataNodes[i]);return s}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}}class j extends N{constructor(e,t){super(),this.getChildren=e,this.options=t,this.options&&(this.trackBy=this.options.trackBy),this.options?.isExpandable&&(this.isExpandable=this.options.isExpandable)}expandAll(){this.expansionModel.clear();const e=this.dataNodes.reduce((t,s)=>[...t,...this.getDescendants(s),s],[]);this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}getDescendants(e){const t=[];return this._getDescendants(t,e),t.splice(1)}_getDescendants(e,t){e.push(t);const s=this.getChildren(t);Array.isArray(s)?s.forEach(i=>this._getDescendants(e,i)):(0,a.isObservable)(s)&&s.pipe((0,o.take)(1),(0,o.filter)(Boolean)).subscribe(i=>{for(const r of i)this._getDescendants(e,r)})}}const C=new n.InjectionToken("CDK_TREE_NODE_OUTLET_NODE");class p{constructor(e,t){this.viewContainer=e,this._node=t}static{this.\u0275fac=function(t){return new(t||p)(n.\u0275\u0275directiveInject(n.ViewContainerRef),n.\u0275\u0275directiveInject(C,8))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:p,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(p,[{type:n.Directive,args:[{selector:"[cdkTreeNodeOutlet]",standalone:!0}]}],()=>[{type:n.ViewContainerRef},{type:void 0,decorators:[{type:n.Inject,args:[C]},{type:n.Optional}]}],null);class A{constructor(e){this.$implicit=e}}class g{constructor(e){this.template=e}static{this.\u0275fac=function(t){return new(t||g)(n.\u0275\u0275directiveInject(n.TemplateRef))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:g,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]},standalone:!0})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(g,[{type:n.Directive,args:[{selector:"[cdkTreeNodeDef]",inputs:[{name:"when",alias:"cdkTreeNodeDefWhen"}],standalone:!0}]}],()=>[{type:n.TemplateRef}],null);function w(){return Error("A valid data source must be provided.")}function S(){return Error("There can only be one default row without a when predicate function.")}function K(){return Error("Could not find a matching node definition for the provided node data.")}function M(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}function O(){return Error("More than one of tree control, levelAccessor, or childrenAccessor were provided.")}class u{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._elementRef=(0,n.inject)(n.ElementRef),this._dir=(0,n.inject)(m.Directionality),this._onDestroy=new a.Subject,this._levels=new Map,this._parents=new Map,this._ariaSets=new Map,this.viewChange=new a.BehaviorSubject({start:0,end:Number.MAX_VALUE}),this._flattenedNodes=new a.BehaviorSubject([]),this._nodeType=new a.BehaviorSubject(null),this._nodes=new a.BehaviorSubject(new Map),this._keyManagerNodes=new a.BehaviorSubject([]),this._keyManagerFactory=(0,n.inject)(B.TREE_KEY_MANAGER),this._viewInit=!1}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){const e=this._nodeDefs.filter(t=>!t.when);if(e.length>1&&(typeof ngDevMode>"u"||ngDevMode))throw S();this._defaultNodeDef=e[0]}_setNodeTypeIfUnset(e){this._nodeType.value===null&&this._nodeType.next(e)}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new b.SelectionModel(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let e;if((0,b.isDataSource)(this._dataSource)?e=this._dataSource.connect(this):(0,a.isObservable)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=(0,a.of)(this._dataSource)),!e){if(typeof ngDevMode>"u"||ngDevMode)throw w();return}this._dataSubscription=this._getRenderData(e).pipe((0,o.takeUntil)(this._onDestroy)).subscribe(t=>{this._renderDataChanges(t)})}_getRenderData(e){const t=this._getExpansionModel();return(0,a.combineLatest)([e,this._nodeType,t.changed.pipe((0,o.startWith)(null),(0,o.tap)(s=>{this._emitExpansionChanges(s)}))]).pipe((0,o.switchMap)(([s,i])=>i===null?(0,a.of)({renderNodes:s,flattenedNodes:null,nodeType:i}):this._computeRenderingData(s,i).pipe((0,o.map)(r=>({...r,nodeType:i})))))}_renderDataChanges(e){if(e.nodeType===null){this.renderNodeChanges(e.renderNodes);return}this._updateCachedData(e.flattenedNodes),this.renderNodeChanges(e.renderNodes),this._updateKeyManagerItems(e.flattenedNodes)}_emitExpansionChanges(e){if(!e)return;const t=this._nodes.value;for(const s of e.added)t.get(s)?._emitExpansionState(!0);for(const s of e.removed)t.get(s)?._emitExpansionState(!1)}_initializeKeyManager(){const e=(0,a.combineLatest)([this._keyManagerNodes,this._nodes]).pipe((0,o.map)(([s,i])=>s.reduce((r,l)=>{const d=i.get(this._getExpansionKey(l));return d&&r.push(d),r},[]))),t={trackBy:s=>this._getExpansionKey(s.data),skipPredicate:s=>!!s.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(e,t)}_initializeDataDiffer(){const e=this.trackBy??((t,s)=>this._getExpansionKey(s));this._dataDiffer=this._differs.find([]).create(e)}_checkTreeControlUsage(){if(typeof ngDevMode>"u"||ngDevMode){let e=0;if(this.treeControl&&e++,this.levelAccessor&&e++,this.childrenAccessor&&e++,e){if(e>1)throw O()}else throw M()}}renderNodeChanges(e,t=this._dataDiffer,s=this._nodeOutlet.viewContainer,i){const r=t.diff(e);!r&&!this._viewInit||(r?.forEachOperation((l,d,c)=>{if(l.previousIndex==null)this.insertNode(e[c],c,s,i);else if(c==null)s.remove(d);else{const y=s.get(d);s.move(y,c)}}),r?.forEachIdentityChange(l=>{const d=l.item;if(l.currentIndex!=null){const c=s.get(l.currentIndex);c.context.$implicit=d}}),i?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(this._nodeDefs.length===1)return this._nodeDefs.first;const s=this._nodeDefs.find(i=>i.when&&i.when(t,e))||this._defaultNodeDef;if(!s&&(typeof ngDevMode>"u"||ngDevMode))throw K();return s}insertNode(e,t,s,i){const r=this._getLevelAccessor(),l=this._getNodeDef(e,t),d=this._getExpansionKey(e),c=new A(e);i??=this._parents.get(d)??void 0,r?c.level=r(e):i!==void 0&&this._levels.has(this._getExpansionKey(i))?c.level=this._levels.get(this._getExpansionKey(i))+1:c.level=0,this._levels.set(d,c.level),(s||this._nodeOutlet.viewContainer).createEmbeddedView(l.template,c,t),h.mostRecentTreeNode&&(h.mostRecentTreeNode.data=e)}isExpanded(e){return!!(this.treeControl?.isExpanded(e)||this._expansionModel?.isSelected(this._getExpansionKey(e)))}toggle(e){this.treeControl?this.treeControl.toggle(e):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(e))}expand(e){this.treeControl?this.treeControl.expand(e):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(e))}collapse(e){this.treeControl?this.treeControl.collapse(e):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(e))}toggleDescendants(e){this.treeControl?this.treeControl.toggleDescendants(e):this._expansionModel&&(this.isExpanded(e)?this.collapseDescendants(e):this.expandDescendants(e))}expandDescendants(e){if(this.treeControl)this.treeControl.expandDescendants(e);else if(this._expansionModel){const t=this._expansionModel;t.select(this._getExpansionKey(e)),this._getDescendants(e).pipe((0,o.take)(1),(0,o.takeUntil)(this._onDestroy)).subscribe(s=>{t.select(...s.map(i=>this._getExpansionKey(i)))})}}collapseDescendants(e){if(this.treeControl)this.treeControl.collapseDescendants(e);else if(this._expansionModel){const t=this._expansionModel;t.deselect(this._getExpansionKey(e)),this._getDescendants(e).pipe((0,o.take)(1),(0,o.takeUntil)(this._onDestroy)).subscribe(s=>{t.deselect(...s.map(i=>this._getExpansionKey(i)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._expansionModel.select(...this._flattenedNodes.value.map(t=>this._getExpansionKey(t)))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._expansionModel.deselect(...this._flattenedNodes.value.map(t=>this._getExpansionKey(t)))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(e){const t=this._getLevelAccessor(),s=this._expansionModel??this.treeControl?.expansionModel;if(!s)return(0,a.of)([]);const i=this._getExpansionKey(e),r=s.changed.pipe((0,o.switchMap)(d=>d.added.includes(i)?(0,a.of)(!0):d.removed.includes(i)?(0,a.of)(!1):a.EMPTY),(0,o.startWith)(this.isExpanded(e)));if(t)return(0,a.combineLatest)([r,this._flattenedNodes]).pipe((0,o.map)(([d,c])=>d?this._findChildrenByLevel(t,c,e,1):[]));const l=this._getChildrenAccessor();if(l)return(0,T.coerceObservable)(l(e)??[]);throw M()}_findChildrenByLevel(e,t,s,i){const r=this._getExpansionKey(s),l=t.findIndex(E=>this._getExpansionKey(E)===r),d=e(s),c=d+i,y=[];for(let E=l+1;E<t.length;E++){const L=e(t[E]);if(L<=d)break;L<=c&&y.push(t[E])}return y}_registerNode(e){this._nodes.value.set(this._getExpansionKey(e.data),e),this._nodes.next(this._nodes.value)}_unregisterNode(e){this._nodes.value.delete(this._getExpansionKey(e.data)),this._nodes.next(this._nodes.value)}_getLevel(e){return this._levels.get(this._getExpansionKey(e))}_getSetSize(e){return this._getAriaSet(e).length}_getPositionInSet(e){const t=this._getAriaSet(e),s=this._getExpansionKey(e);return t.findIndex(i=>this._getExpansionKey(i)===s)+1}_getNodeParent(e){const t=this._parents.get(this._getExpansionKey(e.data));return t&&this._nodes.value.get(this._getExpansionKey(t))}_getNodeChildren(e){return this._getDirectChildren(e.data).pipe((0,o.map)(t=>t.reduce((s,i)=>{const r=this._nodes.value.get(this._getExpansionKey(i));return r&&s.push(r),s},[])))}_sendKeydownToKeyManager(e){if(e.target===this._elementRef.nativeElement)this._keyManager.onKeydown(e);else{const t=this._nodes.getValue();for(const[,s]of t)if(e.target===s._elementRef.nativeElement){this._keyManager.onKeydown(e);break}}}_getDescendants(e){if(this.treeControl)return(0,a.of)(this.treeControl.getDescendants(e));if(this.levelAccessor){const t=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,e,1/0);return(0,a.of)(t)}if(this.childrenAccessor)return this._getAllChildrenRecursively(e).pipe((0,o.reduce)((t,s)=>(t.push(...s),t),[]));throw M()}_getAllChildrenRecursively(e){return this.childrenAccessor?(0,T.coerceObservable)(this.childrenAccessor(e)).pipe((0,o.take)(1),(0,o.switchMap)(t=>{for(const s of t)this._parents.set(this._getExpansionKey(s),e);return(0,a.of)(...t).pipe((0,o.concatMap)(s=>(0,a.concat)((0,a.of)([s]),this._getAllChildrenRecursively(s))))})):(0,a.of)([])}_getExpansionKey(e){return this.expansionKey?.(e)??e}_getAriaSet(e){const t=this._getExpansionKey(e),s=this._parents.get(t),i=s?this._getExpansionKey(s):null;return this._ariaSets.get(i)??[e]}_findParentForNode(e,t,s){if(!s.length)return null;const i=this._levels.get(this._getExpansionKey(e))??0;for(let r=t-1;r>=0;r--){const l=s[r];if((this._levels.get(this._getExpansionKey(l))??0)<i)return l}return null}_flattenNestedNodesWithExpansion(e,t=0){const s=this._getChildrenAccessor();return s?(0,a.of)(...e).pipe((0,o.concatMap)(i=>{const r=this._getExpansionKey(i);this._parents.has(r)||this._parents.set(r,null),this._levels.set(r,t);const l=(0,T.coerceObservable)(s(i));return(0,a.concat)((0,a.of)([i]),l.pipe((0,o.take)(1),(0,o.tap)(d=>{this._ariaSets.set(r,[...d??[]]);for(const c of d??[]){const y=this._getExpansionKey(c);this._parents.set(y,i),this._levels.set(y,t+1)}}),(0,o.switchMap)(d=>d?this._flattenNestedNodesWithExpansion(d,t+1).pipe((0,o.map)(c=>this.isExpanded(i)?c:[])):(0,a.of)([]))))}),(0,o.reduce)((i,r)=>(i.push(...r),i),[])):(0,a.of)([...e])}_computeRenderingData(e,t){if(this.childrenAccessor&&t==="flat")return this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe((0,o.map)(s=>({renderNodes:s,flattenedNodes:s})));if(this.levelAccessor&&t==="nested"){const s=this.levelAccessor;return(0,a.of)(e.filter(i=>s(i)===0)).pipe((0,o.map)(i=>({renderNodes:i,flattenedNodes:e})),(0,o.tap)(({flattenedNodes:i})=>{this._calculateParents(i)}))}else return t==="flat"?(0,a.of)({renderNodes:e,flattenedNodes:e}).pipe((0,o.tap)(({flattenedNodes:s})=>{this._calculateParents(s)})):(this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe((0,o.map)(s=>({renderNodes:e,flattenedNodes:s}))))}_updateCachedData(e){this._flattenedNodes.next(e)}_updateKeyManagerItems(e){this._keyManagerNodes.next(e)}_calculateParents(e){const t=this._getLevelAccessor();if(t){this._parents.clear(),this._ariaSets.clear();for(let s=0;s<e.length;s++){const i=e[s],r=this._getExpansionKey(i);this._levels.set(r,t(i));const l=this._findParentForNode(i,s,e);this._parents.set(r,l);const d=l?this._getExpansionKey(l):null,c=this._ariaSets.get(d)??[];c.splice(s,0,i),this._ariaSets.set(d,c)}}}static{this.\u0275fac=function(t){return new(t||u)(n.\u0275\u0275directiveInject(n.IterableDiffers),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:u,selectors:[["cdk-tree"]],contentQueries:function(t,s,i){if(t&1&&n.\u0275\u0275contentQuery(i,g,5),t&2){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(s._nodeDefs=r)}},viewQuery:function(t,s){if(t&1&&n.\u0275\u0275viewQuery(p,7),t&2){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(s._nodeOutlet=i.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(t,s){t&1&&n.\u0275\u0275listener("keydown",function(r){return s._sendKeydownToKeyManager(r)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],standalone:!0,features:[n.\u0275\u0275StandaloneFeature],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,s){t&1&&n.\u0275\u0275elementContainer(0,0)},dependencies:[p],encapsulation:2})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(u,[{type:n.Component,args:[{selector:"cdk-tree",exportAs:"cdkTree",template:"<ng-container cdkTreeNodeOutlet></ng-container>",host:{class:"cdk-tree",role:"tree","(keydown)":"_sendKeydownToKeyManager($event)"},encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.Default,standalone:!0,imports:[p]}]}],()=>[{type:n.IterableDiffers},{type:n.ChangeDetectorRef}],{dataSource:[{type:n.Input}],treeControl:[{type:n.Input}],levelAccessor:[{type:n.Input}],childrenAccessor:[{type:n.Input}],trackBy:[{type:n.Input}],expansionKey:[{type:n.Input}],_nodeOutlet:[{type:n.ViewChild,args:[p,{static:!0}]}],_nodeDefs:[{type:n.ContentChildren,args:[g,{descendants:!0}]}]});class h{get role(){return"treeitem"}set role(e){}get isExpandable(){return this._isExpandable()}set isExpandable(e){this._inputIsExpandable=e,!(this.data&&!this._isExpandable||!this._inputIsExpandable)&&(this._inputIsExpanded?this.expand():this._inputIsExpanded===!1&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(e){this._inputIsExpanded=e,e?this.expand():this.collapse()}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}static{this.mostRecentTreeNode=null}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._dataChanges.next())}get isLeafNode(){return this._tree.treeControl?.isExpandable!==void 0&&!this._tree.treeControl.isExpandable(this._data)?!0:this._tree.treeControl?.isExpandable===void 0&&this._tree.treeControl?.getDescendants(this._data).length===0}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}constructor(e,t){this._elementRef=e,this._tree=t,this._tabindex=-1,this.activation=new n.EventEmitter,this.expandedChange=new n.EventEmitter,this._destroyed=new a.Subject,this._dataChanges=new a.Subject,this._inputIsExpandable=!1,this._inputIsExpanded=void 0,this._shouldFocus=!0,this._changeDetectorRef=(0,n.inject)(n.ChangeDetectorRef),h.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=F(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe((0,o.map)(()=>this.isExpanded),(0,o.distinctUntilChanged)()).subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._tree._setNodeTypeIfUnset("flat"),this._tree._registerNode(this)}ngOnDestroy(){h.mostRecentTreeNode===this&&(h.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(e){this.expandedChange.emit(e)}static{this.\u0275fac=function(t){return new(t||h)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(u))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:h,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(t,s){t&1&&n.\u0275\u0275listener("click",function(){return s._setActiveItem()})("focus",function(){return s._focusItem()}),t&2&&(n.\u0275\u0275hostProperty("tabindex",s._tabindex),n.\u0275\u0275attribute("aria-expanded",s._getAriaExpanded())("aria-level",s.level+1)("aria-posinset",s._getPositionInSet())("aria-setsize",s._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",n.booleanAttribute],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",n.booleanAttribute],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"],standalone:!0,features:[n.\u0275\u0275InputTransformsFeature]})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(h,[{type:n.Directive,args:[{selector:"cdk-tree-node",exportAs:"cdkTreeNode",host:{class:"cdk-tree-node","[attr.aria-expanded]":"_getAriaExpanded()","[attr.aria-level]":"level + 1","[attr.aria-posinset]":"_getPositionInSet()","[attr.aria-setsize]":"_getSetSize()","[tabindex]":"_tabindex",role:"treeitem","(click)":"_setActiveItem()","(focus)":"_focusItem()"},standalone:!0}]}],()=>[{type:n.ElementRef},{type:u}],{role:[{type:n.Input}],isExpandable:[{type:n.Input,args:[{transform:n.booleanAttribute}]}],isExpanded:[{type:n.Input}],isDisabled:[{type:n.Input,args:[{transform:n.booleanAttribute}]}],typeaheadLabel:[{type:n.Input,args:["cdkTreeNodeTypeaheadLabel"]}],activation:[{type:n.Output}],expandedChange:[{type:n.Output}]});function F(v){let e=v.parentElement;for(;e&&!U(e);)e=e.parentElement;if(e)return e.classList.contains("cdk-nested-tree-node")?(0,n.numberAttribute)(e.getAttribute("aria-level")):0;if(typeof ngDevMode>"u"||ngDevMode)throw Error("Incorrect tree structure containing detached node.");return-1}function U(v){const e=v.classList;return!!(e?.contains("cdk-nested-tree-node")||e?.contains("cdk-tree"))}class _ extends h{constructor(e,t,s){super(e,t),this._differs=s}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree._getDirectChildren(this.data).pipe((0,o.takeUntil)(this._destroyed)).subscribe(e=>this.updateChildrenNodes(e)),this.nodeOutlet.changes.pipe((0,o.takeUntil)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){this._tree._setNodeTypeIfUnset("nested"),super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){const t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){const s=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,s,this._data)}else this._dataDiffer.diff([])}_clear(){const e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const e=this.nodeOutlet;return e&&e.find(t=>!t._node||t._node===this)}static{this.\u0275fac=function(t){return new(t||_)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(u),n.\u0275\u0275directiveInject(n.IterableDiffers))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:_,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,s,i){if(t&1&&n.\u0275\u0275contentQuery(i,p,5),t&2){let r;n.\u0275\u0275queryRefresh(r=n.\u0275\u0275loadQuery())&&(s.nodeOutlet=r)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],standalone:!0,features:[n.\u0275\u0275ProvidersFeature([{provide:h,useExisting:_},{provide:C,useExisting:_}]),n.\u0275\u0275InheritDefinitionFeature]})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(_,[{type:n.Directive,args:[{selector:"cdk-nested-tree-node",exportAs:"cdkNestedTreeNode",providers:[{provide:h,useExisting:_},{provide:C,useExisting:_}],host:{class:"cdk-nested-tree-node"},standalone:!0}]}],()=>[{type:n.ElementRef},{type:u},{type:n.IterableDiffers}],{nodeOutlet:[{type:n.ContentChildren,args:[p,{descendants:!0}]}]});const V=/([A-Za-z%]+)$/;class x{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}constructor(e,t,s,i){this._treeNode=e,this._tree=t,this._element=s,this._dir=i,this._destroyed=new a.Subject,this.indentUnits="px",this._indent=40,this._setPadding(),i&&i.change.pipe((0,o.takeUntil)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=(this._treeNode.data&&this._tree._getLevel(this._treeNode.data))??null,t=this._level==null?e:this._level;return typeof t=="number"?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const s=this._element.nativeElement,i=this._dir&&this._dir.value==="rtl"?"paddingRight":"paddingLeft",r=i==="paddingLeft"?"paddingRight":"paddingLeft";s.style[i]=t||"",s.style[r]="",this._currentPadding=t}}_setLevelInput(e){this._level=isNaN(e)?null:e,this._setPadding()}_setIndentInput(e){let t=e,s="px";if(typeof e=="string"){const i=e.split(V);t=i[0],s=i[1]||s}this.indentUnits=s,this._indent=(0,n.numberAttribute)(t),this._setPadding()}static{this.\u0275fac=function(t){return new(t||x)(n.\u0275\u0275directiveInject(h),n.\u0275\u0275directiveInject(u),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(m.Directionality,8))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:x,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[2,"cdkTreeNodePadding","level",n.numberAttribute],indent:[0,"cdkTreeNodePaddingIndent","indent"]},standalone:!0,features:[n.\u0275\u0275InputTransformsFeature]})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(x,[{type:n.Directive,args:[{selector:"[cdkTreeNodePadding]",standalone:!0}]}],()=>[{type:h},{type:u},{type:n.ElementRef},{type:m.Directionality,decorators:[{type:n.Optional}]}],{level:[{type:n.Input,args:[{alias:"cdkTreeNodePadding",transform:n.numberAttribute}]}],indent:[{type:n.Input,args:["cdkTreeNodePaddingIndent"]}]});class D{constructor(e,t){this._tree=e,this._treeNode=t,this.recursive=!1}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static{this.\u0275fac=function(t){return new(t||D)(n.\u0275\u0275directiveInject(u),n.\u0275\u0275directiveInject(h))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:D,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(t,s){t&1&&n.\u0275\u0275listener("click",function(r){return s._toggle(),r.stopPropagation()})("keydown.Enter",function(r){return s._toggle(),r.preventDefault()})("keydown.Space",function(r){return s._toggle(),r.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",n.booleanAttribute]},standalone:!0,features:[n.\u0275\u0275InputTransformsFeature]})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(D,[{type:n.Directive,args:[{selector:"[cdkTreeNodeToggle]",host:{"(click)":"_toggle(); $event.stopPropagation();","(keydown.Enter)":"_toggle(); $event.preventDefault();","(keydown.Space)":"_toggle(); $event.preventDefault();",tabindex:"-1"},standalone:!0}]}],()=>[{type:u},{type:h}],{recursive:[{type:n.Input,args:[{alias:"cdkTreeNodeToggleRecursive",transform:n.booleanAttribute}]}]});const R=[_,g,x,D,u,h,p];class k{static{this.\u0275fac=function(t){return new(t||k)}}static{this.\u0275mod=n.\u0275\u0275defineNgModule({type:k})}static{this.\u0275inj=n.\u0275\u0275defineInjector({})}}(typeof ngDevMode>"u"||ngDevMode)&&n.\u0275setClassMetadata(k,[{type:n.NgModule,args:[{imports:R,exports:R}]}],null,null)}}]);
