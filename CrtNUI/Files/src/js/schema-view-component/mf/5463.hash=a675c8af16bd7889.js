(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[5463],{10844:(F,y,e)=>{e.d(y,{L:()=>g});var o=e(32667),v=e.n(o),t=e(22307),b=e.n(t),n=e(67057),j=e.n(n);const r=(u,m)=>({"forecast-hint-content":u,"forecast-hint-content-rtl":m});class g{set hintConfig(m){this._hintConfig!==m&&(this._hintConfig=m)}get hintConfig(){return this._hintConfig}get cssClasses(){return this._hintConfig?.cssClasses||this._defaultCssClass}constructor(m){this._directionality=m,this._defaultCssClass="simple-hint"}isRtl(){return this._directionality.value==="rtl"}static{this.\u0275fac=function(W){return new(W||g)(t.\u0275\u0275directiveInject(o.Directionality))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["ts-simple-hint"]],inputs:{hintConfig:"hintConfig"},decls:4,vars:8,consts:[[1,"simple-hint-value",3,"ngClass"]],template:function(W,I){W&1&&(t.\u0275\u0275elementStart(0,"div")(1,"span",0),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"br"),t.\u0275\u0275elementEnd()),W&2&&(t.\u0275\u0275classMap(I.cssClasses),t.\u0275\u0275advance(),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(5,r,!I.isRtl(),I.isRtl())),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",I.hintConfig==null?null:I.hintConfig.displayValue," "))},dependencies:[n.NgClass],styles:['.simple-hint[_ngcontent-%COMP%]{margin:15px 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;border-top:4px solid;position:relative;min-height:50px;padding:10px;text-align:left;box-shadow:#0000004d 0 0 .6em .02em;-moz-box-shadow:rgba(0,0,0,.3) 0 0 .2em;-webkit-box-shadow:rgba(0,0,0,.3) 0 0 .2em;font-size:13px;border-top-color:#20c964}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content[_ngcontent-%COMP%]{direction:ltr}.simple-hint[_ngcontent-%COMP%]   .simple-hint-content-rtl[_ngcontent-%COMP%]{direction:ltr;text-align:right}.simple-hint[_ngcontent-%COMP%]:before{border-color:transparent transparent #20c964 transparent}.simple-hint[_ngcontent-%COMP%]:after, .simple-hint[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:0;height:0;border-style:solid}.simple-hint[_ngcontent-%COMP%]:after{left:calc(50% - 6px);top:-12px;border-color:transparent transparent #fff transparent;border-width:6px}.simple-hint[_ngcontent-%COMP%]:before{left:calc(50% - 7px);top:-17px;border-width:7px}']})}}},45328:(F,y,e)=>{e.d(y,{D:()=>R});var o=e(5960),v=e.n(o),t=e(22307),b=e.n(t),n=e(6530),j=e(77592),r=e(34760),g=e(79772),u=e.n(g),m=e(62278),W=e.n(m),I=e(29957),M=e.n(I),a=e(32072),L=e(56704),f=e(23092),_=e(67057),h=e.n(_),P=e(97696);function K(B,E){if(B&1){const d=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",1)(1,"span",2),t.\u0275\u0275text(2),t.\u0275\u0275elementStart(3,"a",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(d);const A=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(A.contactClicked(A.chat.operator.contact==null?null:A.chat.operator.contact.id))}),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()()}if(B&2){const d=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",d.getEndDateCaption(d.chat.completionDate)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(d.chat.operator.contact==null?null:d.chat.operator.contact.name)}}function S(B,E){if(B&1){const d=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"div",1)(2,"span",2),t.\u0275\u0275text(3),t.\u0275\u0275elementStart(4,"a",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(d);const A=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(A.contactClicked(A.chat.contact.id))}),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"div",4)(7,"crt-chat-messages",5),t.\u0275\u0275twoWayListener("chatChange",function(A){t.\u0275\u0275restoreView(d);const k=t.\u0275\u0275nextContext();return t.\u0275\u0275twoWayBindingSet(k.chat,A)||(k.chat=A),t.\u0275\u0275resetView(A)}),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,K,5,2,"div",6),t.\u0275\u0275elementEnd()}if(B&2){const d=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",d.getStartDateCaption(d.chat.chatStartDate)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(d.chat.contact.name),t.\u0275\u0275advance(2),t.\u0275\u0275property("messages",d.messages),t.\u0275\u0275twoWayProperty("chat",d.chat),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",d.isChatCompleted())}}class R{constructor(E,d,U){this.chatService=E,this._userInfo=d,this._translateService=U,this.contactClick=new t.EventEmitter,this.messagesLoaded=new t.EventEmitter}_loadHistory(){this.chatService.getChatHistory(this.chatId).pipe((0,m.tap)(E=>{E&&(this.messages=E,this._setChatInfo())})).subscribe()}_setChatInfo(){this.chatService.getItem(this.chatId).subscribe(E=>{E.success&&(this.chat=E.result[0],this.messagesLoaded.emit())})}getStartDateCaption(E){const d=this._translateService.instant("ChatSettings.History.Captions.StartDate");return I.String.Format(d,this.formatChatDate(E))}getEndDateCaption(E){const d=this._translateService.instant("ChatSettings.History.Captions.EndDate");return I.String.Format(d,this.formatChatDate(E))}formatChatDate(E){const d={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},U=E?new Date(E):new Date;return new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName,d).format(U)}ngOnInit(){(0,n.gZ)(this.chatId)||this._loadHistory()}contactClicked(E){this.contactClick.emit({contactId:E})}isChatCompleted(){return this.chat.status.value===a.BA.Completed}static{this.\u0275fac=function(d){return new(d||R)(t.\u0275\u0275directiveInject(L.I),t.\u0275\u0275directiveInject(f.oq),t.\u0275\u0275directiveInject(g.TranslateService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:R,selectors:[["crt-omnichannel-messaging-chat-history"]],inputs:{chatId:[0,"chatid","chatId"]},outputs:{contactClick:"contactClick",messagesLoaded:"messagesLoaded"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"chat-status-info-container"],[1,"chat-date"],[1,"contact-name",3,"click"],[1,"chat-history-component-container"],[3,"chatChange","messages","chat"],["class","chat-status-info-container",4,"ngIf"]],template:function(d,U){d&1&&t.\u0275\u0275template(0,S,9,5,"div",0),d&2&&t.\u0275\u0275property("ngIf",U.chat)},dependencies:[_.NgIf,P.z],styles:[`.chat-date{color:#999;font-size:13px;font-family:Open Sans,serif}.chat-history-component-container{margin-bottom:19px}.contact-name{font-size:13px;color:#4e7bd8;cursor:pointer}.contact-name:hover{text-decoration:underline}.full-chat-image-container{top:0;width:100%;height:100%;z-index:999999999999;position:fixed;align-items:center;background-position:center;background-repeat:no-repeat;background-color:#000000b3}
`],encapsulation:2})}}(0,o.__decorate)([(0,j.k)(),(0,o.__metadata)("design:type",I.String)],R.prototype,"chatId",void 0),(0,o.__decorate)([(0,r.j)(),(0,o.__metadata)("design:type",Object)],R.prototype,"contactClick",void 0),(0,o.__decorate)([(0,r.j)(),(0,o.__metadata)("design:type",Object)],R.prototype,"messagesLoaded",void 0)},97696:(F,y,e)=>{e.d(y,{z:()=>O});var o=e(5960),v=e.n(o),t=e(22307),b=e.n(t),n=e(77592),j=e(34760),r=e(79772),g=e.n(r),u=e(84323),m=e(90983),W=e(26594),I=e(28399),M=e.n(I),a=e(62278),L=e.n(a),f=e(48594),_=e(32072),h=e(56704),P=e(23092),K=e(19816),S=e(95145),R=e(67057),B=e.n(R),E=e(84011),d=e(12087);const U=c=>({"bot-message":c}),A=c=>({display:c}),k=()=>({}),X=(c,s)=>({"first-in-sequence":c,"last-in-sequence":s}),J=(c,s)=>({width:c,height:s});function q(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",2)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),c&2){const i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(i.firstMessageDate)}}function H(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",10)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),c&2){const i=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(i.separatorText)}}function D(c,s){if(c&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",11)(1,"label",12),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"ts-contact-photo",13),t.\u0275\u0275listener("contactClick",function(){t.\u0275\u0275restoreView(i);const x=t.\u0275\u0275nextContext().$implicit,Y=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(Y.openContact(x.author.id))}),t.\u0275\u0275elementEnd()()}if(c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275property("hidden",!p.isContactChanged(i)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",i.isBotMessage?p.bot.name:i.author.name," "),t.\u0275\u0275advance(),t.\u0275\u0275property("contact",i.isBotMessage?t.\u0275\u0275pureFunction0(4,k):i.author)("contactColor",p.getContactBackground(i))}}function T(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",14)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()),c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(p.formatSystemMessage(i))}}function Z(c,s){if(c&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"crt-translate-toggle",21),t.\u0275\u0275listener("translationReady",function(x){t.\u0275\u0275restoreView(i);const Y=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(Y.onTranslationReady(x))}),t.\u0275\u0275elementEnd()}if(c&2){const i=t.\u0275\u0275nextContext(2).$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275property("translationKey",i.id)("sourceText",i.text)("iconPosition","left-icon")("sourceLanguageCode",(p.language==null?null:p.language.code)||p.chat.languageCode)("targetLanguageCode",p.targetLanguageCode)("isTranslated",i.isTranslated)("originalText",i.originalText)}}function tt(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",15)(1,"div",16)(2,"span",17),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",18)(5,"span",19),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,Z,1,7,"crt-translate-toggle",20),t.\u0275\u0275elementEnd()()()),c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(4,X,p.isFirstMessageInSequence(i),p.isLastMessageInSequence(i))),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(p.getMessageDisplayText(i)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(p.getLocalTime(i.time)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",p.isIncomingMessage(i)&&((p.language==null?null:p.language.code)||p.chat.languageCode)&&p.useChatTranslationFeature)}}function ot(c,s){if(c&1){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",28)(1,"img",29),t.\u0275\u0275listener("click",function(x){t.\u0275\u0275restoreView(i);const Y=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(Y.openImage(x))})("load",function(x){t.\u0275\u0275restoreView(i);const Y=t.\u0275\u0275nextContext(4);return t.\u0275\u0275resetView(Y.onChatImgLoaded(x))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"span",30),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()()}if(c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext(2).$implicit,x=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngStyle",t.\u0275\u0275pureFunction2(3,J,x.imageContainerSize.width+"px",x.imageContainerSize.height+"px"))("src",x.getImageUrl(i.fileId),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(x.getLocalTime(p.time))}}function it(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",31)(1,"span",32)(2,"a",33),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(4,"span",19),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext(2).$implicit,x=t.\u0275\u0275nextContext();t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction2(4,X,x.isFirstMessageInSequence(p),x.isLastMessageInSequence(p))),t.\u0275\u0275advance(2),t.\u0275\u0275property("href",x.getFileUrl(i.fileId),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(i.fileName),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(x.getLocalTime(p.time))}}function rt(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",25),t.\u0275\u0275template(1,ot,4,6,"div",26)(2,it,6,7,"div",27),t.\u0275\u0275elementEnd()),c&2){const i=s.$implicit,p=t.\u0275\u0275nextContext(3);t.\u0275\u0275property("ngSwitch",i.fileType),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",p.messageType.Image)}}function $(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",34)(1,"span",17),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"span",19),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()),c&2){const i=t.\u0275\u0275nextContext(2).$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(i.text),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(p.getLocalTime(i.time))}}function G(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",22),t.\u0275\u0275template(1,rt,3,2,"div",23)(2,$,5,2,"div",24),t.\u0275\u0275elementEnd()),c&2){const i=t.\u0275\u0275nextContext().$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",i.attachments),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",p.showMessageFromAttachment(i))}}function w(c,s){if(c&1&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275text(1),t.\u0275\u0275template(2,H,3,1,"div",4)(3,D,4,5,"div",5),t.\u0275\u0275elementStart(4,"div",6),t.\u0275\u0275template(5,T,3,1,"div",7)(6,tt,8,7,"div",8)(7,G,3,2,"div",9),t.\u0275\u0275elementEnd()()),c&2){const i=s.$implicit,p=s.index,x=t.\u0275\u0275nextContext();t.\u0275\u0275classMap(x.getDirectionName(i.direction)+"-message"),t.\u0275\u0275propertyInterpolate1("id","message_",i.id,""),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(12,U,i.isBotMessage))("ngStyle",t.\u0275\u0275pureFunction1(14,A,x.getIsDuplicateMessage(i.id)?"none":"")),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate1(" ",x.cachePreviousMessage(p)," "),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",x.isShowSeparator(i,p)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",!x.isSystemMessage(i)),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitch",i.type),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",x.messageType.System),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitchCase",x.messageType.Text)}}class O{constructor(s,i,p,x,Y,at){this._userInfo=s,this._translateService=i,this.injector=p,this._contactColorService=x,this._featureValues=Y,this._sysSettingsService=at,this._omnichannelMessageFileSchema={name:"OmnichannelMessageFile",uid:"E6B4C4D4-0A51-4A6D-A8C5-18B63FADDAD4"},this._isFileApiEnabled=!1,this._fileServiceUrl=`rest/FileService/GetFile/${this._omnichannelMessageFileSchema.uid}/`,this._imageUrl=`img/entity/hash/${this._omnichannelMessageFileSchema.name}/Data/`,this._duplicateIds=[],this.messagesCounter=0,this.contactClick=new t.EventEmitter,this.messageType=f.Go,this.bot={name:this._translateService.instant("ChatSettings.ChatWindow.Bots.Name")||"Creatio.ai"},this.imageContainerSize={width:200,height:120},this.lastSystemMessageIndex=0,this._isFileApiEnabled=this._featureValues.UseFileApiInChats,this._sysSettingsService.getValueByCode("EnableChatTranslation").pipe((0,a.take)(1)).subscribe(st=>{this.useChatTranslationFeature=st})}set messages(s){this._messages=s,s&&this._findDuplicateMessagesWithoutAttachments(),this._setLastSystemMessageIndex()}get messages(){return this._messages}static _trimSlashes(s){return s.replace(/(^([/\\])+)|(([/\\])+$)/,"")}static _isLargeImage(s,i){return s.naturalWidth>=i.offsetWidth||s.naturalHeight>=i.offsetHeight}_isNewDay(s){return this._previousMessage&&this._previousMessage.time&&s.time&&this._previousMessage.time.getDay()!==s.time.getDay()}_isNewMessages(s){const i=this.messages.length-this.messagesCounter;return s===i&&i>0}_formatDate(s){const i=new Date(s);return(0,u.v8)(i,this._userInfo.timeZoneOffsetHours),new Intl.DateTimeFormat(this._userInfo.cultureInfo.sysCultureName).format(i)}_joinPath(...s){return s.map(i=>O._trimSlashes(i)).join("/")}_setFirstMessageData(){if(this.messages?.length>0){const s=this.messages.find(i=>i.direction===f.Tt.Incoming);if(!s)return;this.firstMessageDate=this._formatDate(s.time),this.contactColor=this._contactColorService.getNextColor(s.author.id)}}_setLastSystemMessageIndex(){this._messages&&(this._messages.length<h.I.rowsCount?this.lastSystemMessageIndex=0:this._messages.length===h.I.rowsCount?this.lastSystemMessageIndex=h.I.rowsCount-1:this.lastSystemMessageIndex=M().findLastIndex(this._messages,s=>s.type===f.Go.System)+1)}_isAuthorChanged(s,i){return s.author.id!==i.author.id||this.isSystemMessage(i)}_findDuplicateMessagesWithoutAttachments(){const s=this.messages.reduce((x,Y)=>{const{text:at,time:st}=Y,et=`${at}-${st}`;return x[et]||(x[et]=[]),x[et].push(Y),x},{}),p=Object.values(s).flat().filter(x=>{const{text:Y,time:at}=x,et=s[`${Y}-${at}`].some(lt=>!(0,I.isEmpty)(lt.attachments));return(0,I.isEmpty)(x.attachments)&&et});this._duplicateIds=p.map(x=>x.id)}getDirectionName(s){return f.Tt[s].toLowerCase()}isIncomingMessage(s){return s.direction===f.Tt.Incoming}getContactBackground(s){return s.isBotMessage?"none":s.direction===1?this.contactColor:"#40bf62"}isContactChanged(s){return this._previousMessage?this._previousMessage.author.id!==s.author.id||this._previousMessage.isBotMessage!==s.isBotMessage||this._previousMessage.type===f.Go.System:!0}ngOnChanges(){this._setFirstMessageData()}cachePreviousMessage(s){this._previousMessage=s>0?this.messages[s-1]:void 0}openContact(s){return this.contactClick.emit({contactId:s}),!1}trackMessageById(s,i){return i.id}isShowSeparator(s,i){return this._isNewDay(s)?this.separatorText=this._formatDate(s.time):this.separatorText=this._isNewMessages(i)?this._translateService.instant("ChatSettings.ChatWindow.NewMessages"):"",this.separatorText!==""}openImage(s){const i=s.target,p=document.body,x=document.createElement("div");x.classList.add("full-chat-image-container"),x.style.backgroundImage="url('"+i.src+"')",x.style.backgroundSize=O._isLargeImage(i,p)?"contain":"auto",x.addEventListener("click",function(){p.removeChild(x)}),p.appendChild(x)}getFileUrl(s){return this._joinPath((0,m.cI)(),this._fileServiceUrl,s)}getImageUrl(s){return this._isFileApiEnabled?this.getFileUrl(s):this._joinPath((0,m.cI)(),this._imageUrl,s)}isFirstMessageInSequence(s){const i=this.messages.findIndex(x=>x.id===s.id);if(i===0)return!0;const p=this.messages[i-1];return this._isAuthorChanged(s,p)}isLastMessageInSequence(s){const i=this.messages.findIndex(x=>x.id===s.id);if(i===this.messages.length-1)return!0;const p=this.messages[i+1];return this._isAuthorChanged(s,p)}isSystemMessage(s){return s.type===f.Go.System}onChatImgLoaded(s){const i=s.target;this.isImageOversize(i.width,i.height)&&i.parentElement.classList.add("img-contain")}isImageOversize(s,i){const p=s/i,x=this.imageContainerSize.width/this.imageContainerSize.height;return Math.max(p,x)/Math.min(p,x)<=2&&s>this.imageContainerSize.width&&i>this.imageContainerSize.height}formatSystemMessage(s){const i=new Date(s.time);(0,u.v8)(i,this._userInfo.timeZoneOffsetHours);const p=this._formatDate(i),x=(0,u.a8)(i,this._userInfo.cultureInfo);return s.text.replace("{datePart}",p).replace("{timePart}",x)}getLocalTime(s){const i=new Date(s);return(0,u.v8)(i,this._userInfo.timeZoneOffsetHours),(0,u.a8)(i,this._userInfo.cultureInfo)}showMessageFromAttachment(s){return s.text}getIsDuplicateMessage(s){return this.messages?this._duplicateIds.indexOf(s)!==-1:!1}onTranslationReady(s){const{translationKey:i,translation:p}=s,x=this.messages?.find(Y=>Y.id===i);x&&(x.text=p)}getMessageDisplayText(s){return this.isIncomingMessage(s)?s.text||s.originalText:s.originalText||s.text}static{this.\u0275fac=function(i){return new(i||O)(t.\u0275\u0275directiveInject(P.oq),t.\u0275\u0275directiveInject(r.TranslateService),t.\u0275\u0275directiveInject(t.Injector),t.\u0275\u0275directiveInject(K.d),t.\u0275\u0275directiveInject(W.G),t.\u0275\u0275directiveInject(S.A))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:O,selectors:[["crt-chat-messages"]],inputs:{messages:"messages",messagesCounter:"messagesCounter",language:"language",targetLanguageCode:"targetLanguageCode",chat:"chat"},outputs:{contactClick:"contactClick"},features:[t.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","first-message-date-separator messages-separator",4,"ngIf"],["class","message",3,"class","id","ngClass","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"first-message-date-separator","messages-separator"],[1,"message",3,"id","ngClass","ngStyle"],["class","messages-separator",4,"ngIf"],["class","message-author",3,"hidden",4,"ngIf"],[1,"text-block",3,"ngSwitch"],["class","system-message-type",4,"ngSwitchCase"],["class","message-type text-message-type",3,"ngClass",4,"ngSwitchCase"],["class","attachment-message-type",4,"ngSwitchDefault"],[1,"messages-separator"],[1,"message-author",3,"hidden"],[1,"author-name"],[1,"author-photo",3,"contactClick","contact","contactColor"],[1,"system-message-type"],[1,"message-type","text-message-type",3,"ngClass"],[1,"text-message-wrapper"],[1,"message-text"],[1,"message-info-container"],[1,"message-time"],[3,"translationKey","sourceText","iconPosition","sourceLanguageCode","targetLanguageCode","isTranslated","originalText","translationReady",4,"ngIf"],[3,"translationReady","translationKey","sourceText","iconPosition","sourceLanguageCode","targetLanguageCode","isTranslated","originalText"],[1,"attachment-message-type"],[3,"ngSwitch",4,"ngFor","ngForOf"],["class","message-type text-message-type",4,"ngIf"],[3,"ngSwitch"],["class","message-type image-message-type",4,"ngSwitchCase"],["class","message-type file-message-type",3,"ngClass",4,"ngSwitchDefault"],[1,"message-type","image-message-type"],["alt","",1,"image-container",3,"click","load","ngStyle","src"],[1,"image-time"],[1,"message-type","file-message-type",3,"ngClass"],[1,"download-file","message-text"],[1,"file-message-type-link",3,"href"],[1,"message-type","text-message-type"]],template:function(i,p){i&1&&t.\u0275\u0275template(0,q,3,1,"div",0)(1,w,8,16,"div",1),i&2&&(t.\u0275\u0275property("ngIf",p.firstMessageDate),t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",p.messages)("ngForTrackBy",p.trackMessageById))},dependencies:[R.NgClass,R.NgForOf,R.NgIf,R.NgStyle,R.NgSwitch,R.NgSwitchCase,R.NgSwitchDefault,E.u,d.b],styles:[".message[_ngcontent-%COMP%]{flex-direction:column;display:flex}.message[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_fadein .5s ease 1 alternate}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0}to{opacity:1}}.message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-size:11px;text-align:center;letter-spacing:0;color:#999;opacity:1;vertical-align:top}.message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;cursor:pointer}.message[_ngcontent-%COMP%]   .message-author[_ngcontent-%COMP%]{margin-bottom:-13px;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{position:relative;bottom:-3px;font-family:Open Sans,serif;letter-spacing:0;color:#999;opacity:1;padding-top:2px;font-size:11px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-info-container[_ngcontent-%COMP%]   .translate-btn[_ngcontent-%COMP%]{float:right}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:3px;display:inline-block;padding:8px 10px;margin:1px 0 1px 39px;text-align:left}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-family:Open Sans,serif;font-size:15px;letter-spacing:0;color:#444;opacity:1;white-space:pre-wrap;word-break:break-word}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-time[_ngcontent-%COMP%]{position:absolute;right:18px;bottom:18px;color:#fff;background-color:#999;font-size:11px;border-radius:12px;padding-left:5px;padding-right:5px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .message-image-item[_ngcontent-%COMP%]{position:relative}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .image-message-type[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{background-repeat:no-repeat;background-size:auto;background-position:center;object-fit:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .system-message-type[_ngcontent-%COMP%]{font-size:11px;text-align:center;color:#999;margin-top:17px}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{padding-left:22px;text-decoration:none}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K);background-repeat:no-repeat;background-position:2px 5px}.message.incoming-message[_ngcontent-%COMP%]{text-align:left}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:0 16px 16px 0;padding-right:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.text-message-type[_ngcontent-%COMP%]{padding-left:14px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 16px 0}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:0 16px 16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#4e7bd8}.message.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ29tcG9uZW50XzQ2OV8xIiBkYXRhLW5hbWU9IkNvbXBvbmVudCA0Njkg4oCTIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8ZyBpZD0iR3JvdXBfNzQ5MiIgZGF0YS1uYW1lPSJHcm91cCA3NDkyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMTguNSAtNDM4LjA0MikiPg0KICAgIDxwYXRoIGlkPSJQYXRoXzY5NDQiIGRhdGEtbmFtZT0iUGF0aCA2OTQ0IiBkPSJNLTMxNSw0NDUuNTQybDUsNC41LDUtNC41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC44Ii8+DQogIDwvZz4NCiAgPGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDguNSAwLjUpIiBmaWxsPSJub25lIiBzdHJva2U9IiM1NDY1N2QiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIi8+DQogIDxsaW5lIGlkPSJMaW5lXzc3OSIgZGF0YS1uYW1lPSJMaW5lIDc3OSIgeDI9IjEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjUgMTQuNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU0NjU3ZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEiLz4NCiAgPHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg0K)}.message.incoming-message[_ngcontent-%COMP%]   .author-photo[_ngcontent-%COMP%]{float:left}.message.incoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-left:7px}.message.outcoming-message[_ngcontent-%COMP%]{text-align:right}.message.outcoming-message[_ngcontent-%COMP%]   .author-name[_ngcontent-%COMP%]{margin-right:7px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{border-radius:16px 0 0 16px;padding-left:16px;padding-right:14px;margin-right:0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence[_ngcontent-%COMP%]:not(.last-in-sequence){border-radius:16px 16px 0}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.last-in-sequence[_ngcontent-%COMP%]:not(.first-in-sequence){border-radius:16px 0 16px 16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.first-in-sequence.last-in-sequence[_ngcontent-%COMP%]{border-radius:16px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{float:right;text-align:center;margin-left:13px}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   a.file-message-type-link[_ngcontent-%COMP%]{color:#e5e8ee}.message.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .file-message-type[_ngcontent-%COMP%]   span.download-file[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0iQ29tcG9uZW50IDQ2OSDigJMgMSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBzdHlsZT0iIj48cmVjdCBpZD0iYmFja2dyb3VuZHJlY3QiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9IjAiIHk9IjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIvPgogIAogIAogIAogIAo8ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PGcgaWQ9Ikdyb3VwXzc0OTIiIGRhdGEtbmFtZT0iR3JvdXAgNzQ5MiIgY2xhc3M9IiIgc3Ryb2tlPSIjZGFkYWRhIiBzdHJva2Utb3BhY2l0eT0iMSI+CiAgICA8cGF0aCBpZD0iUGF0aF82OTQ0IiBkYXRhLW5hbWU9IlBhdGggNjk0NCIgZD0iTTMuNSw3LjUwMDAwNzgxMjQ5OTk3MyBsNSw0LjUgbDUsLTQuNSAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RhZGFkYSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW9wYWNpdHk9IjEiLz4KICA8L2c+PGxpbmUgaWQ9IkxpbmVfNzc4IiBkYXRhLW5hbWU9IkxpbmUgNzc4IiB5MT0iMTEuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTQ2NTdkIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMSIgeTI9IjAuNSIgeDI9IjguNSIgeDE9IjguNSIgY2xhc3M9IiIvPjxsaW5lIGRhdGEtbmFtZT0iTGluZSA3NzgiIHkxPSIxMS41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMC41IiB4Mj0iOC41IiB4MT0iOC41IiBjbGFzcz0iIiBpZD0ic3ZnXzEiLz48bGluZSBpZD0iTGluZV83NzkiIGRhdGEtbmFtZT0iTGluZSA3NzkiIHgyPSIxNC41IiBmaWxsPSJub25lIiBzdHJva2U9IiNkYWRhZGEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxIiB5Mj0iMTQuNDgxNzAxNzM5MTMyNDA0IiB5MT0iMTQuNDgxNzAxNzM5MTMyNDA0IiB4MT0iMi41IiBjbGFzcz0iIi8+PHJlY3QgaWQ9IlJlY3RhbmdsZV82NTAyIiBkYXRhLW5hbWU9IlJlY3RhbmdsZSA2NTAyIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIGNsYXNzPSIiIHk9IjIuMTk3ODAyNTQzNjQwMTM2NyIgeD0iNTEuMDk4OTAzNjU2MDA1ODYiIHRyYW5zZm9ybT0icm90YXRlKC0xLjU5MTE0NTE1NzgxNDAyNTkgNTkuMDk4OTAzNjU2MDA2MDE2LDEwLjE5NzgwMjU0MzY0MDAzNCkgIi8+PC9nPjwvc3ZnPg==)}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo[_ngcontent-%COMP%]   .contact-photo.no-photo[_ngcontent-%COMP%]{font-size:12px!important}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]{display:inline-block;width:16px}.message.outcoming-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{line-height:1.6em;font-size:1em;width:16px;height:16px;min-width:16px;min-height:16px}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]{background:linear-gradient(#fafcfe,#fafcfe) padding-box,linear-gradient(to bottom right,#0077ff40,#8a1fe640,#f1255b40,#ff180040) border-box;border:1px solid transparent}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{color:#444}.message.bot-message[_ngcontent-%COMP%]   .text-message-type[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#999}.message.bot-message[_ngcontent-%COMP%]   ts-contact-photo.author-photo[_ngcontent-%COMP%]     .contact-photo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9Ikljb24gfCBBSSBDb3BpbG90IC0gMTZ4MTYgfCBoZWF2eSI+CjxnIGlkPSJTdWJ0cmFjdCI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMC4yMzU3NjEgNi4wNjQzNEMwLjA4MTc0MTkgNi42ODQxNiAwIDcuMzMyNTMgMCA4QzAgMTIuNDE4MyAzLjU4MTcyIDE2IDggMTZDMTAuOTYxMSAxNiAxMy41NDY1IDE0LjM5MTIgMTQuOTI5NyAxMkgxMi43MzYxQzExLjU5OSAxMy4zNDUgOS44OTkyMSAxNC4xOTkxIDggMTQuMTk5MUM0LjU3NjMzIDE0LjE5OTEgMS44MDA4OSAxMS40MjM3IDEuODAwODkgOEMxLjgwMDg5IDcuNjUzNzkgMS44MjkyNyA3LjMxNDIxIDEuODgzODMgNi45ODM0NkwwLjIzNTc2MSA2LjA2NDM0Wk0xMi43MzYxIDQuMDAwMDFDMTEuNTk5IDIuNjU0OTggOS44OTkyMyAxLjgwMDg5IDggMS44MDA4OUM3LjMzNTY1IDEuODAwODkgNi42OTU3MSAxLjkwNTQgNi4wOTU3MiAyLjA5ODg3TDMuNTI4NDcgMS4zNjUzN0M0LjgwNTAxIDAuNTAzMzI3IDYuMzQzNzMgMCA4IDBDMTAuOTYxMSAwIDEzLjU0NjUgMS42MDg4IDE0LjkyOTggNC4wMDAwMUgxMi43MzYxWiIgZmlsbD0idXJsKCNwYWludDBfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMC4yMzU3NjEgNi4wNjQzNEMwLjA4MTc0MTkgNi42ODQxNiAwIDcuMzMyNTMgMCA4QzAgMTIuNDE4MyAzLjU4MTcyIDE2IDggMTZDMTAuOTYxMSAxNiAxMy41NDY1IDE0LjM5MTIgMTQuOTI5NyAxMkgxMi43MzYxQzExLjU5OSAxMy4zNDUgOS44OTkyMSAxNC4xOTkxIDggMTQuMTk5MUM0LjU3NjMzIDE0LjE5OTEgMS44MDA4OSAxMS40MjM3IDEuODAwODkgOEMxLjgwMDg5IDcuNjUzNzkgMS44MjkyNyA3LjMxNDIxIDEuODgzODMgNi45ODM0NkwwLjIzNTc2MSA2LjA2NDM0Wk0xMi43MzYxIDQuMDAwMDFDMTEuNTk5IDIuNjU0OTggOS44OTkyMyAxLjgwMDg5IDggMS44MDA4OUM3LjMzNTY1IDEuODAwODkgNi42OTU3MSAxLjkwNTQgNi4wOTU3MiAyLjA5ODg3TDMuNTI4NDcgMS4zNjUzN0M0LjgwNTAxIDAuNTAzMzI3IDYuMzQzNzMgMCA4IDBDMTAuOTYxMSAwIDEzLjU0NjUgMS42MDg4IDE0LjkyOTggNC4wMDAwMUgxMi43MzYxWiIgZmlsbD0idXJsKCNwYWludDFfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjwvZz4KPGcgaWQ9InNoYXBlIj4KPHBhdGggZD0iTTE2IDhMNyAxMS41TDguNSA4TDAgMkwxNiA4WiIgZmlsbD0idXJsKCNwYWludDJfcmFkaWFsXzQ3NDdfNzgxMDIpIi8+CjxwYXRoIGQ9Ik0xNiA4TDcgMTEuNUw4LjUgOEwwIDJMMTYgOFoiIGZpbGw9InVybCgjcGFpbnQzX3JhZGlhbF80NzQ3Xzc4MTAyKSIvPgo8L2c+CjwvZz4KPGRlZnM+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQwX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMTg3OTk3IC0wLjgyMjgyOSkgcm90YXRlKDcyLjA0NjgpIHNjYWxlKDM2LjYyNyAxNS43Mzc5KSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMDc3RkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjYxIiBzdG9wLWNvbG9yPSIjOEExRkU2Ii8+CjxzdG9wIG9mZnNldD0iMC45MzUiIHN0b3AtY29sb3I9IiNGMTI1NUIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYxODAwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQxX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0zLjM1OTE5IC01LjEpIHJvdGF0ZSg1My43Njk0KSBzY2FsZSgzNi45NDMyIDE2LjQ2NSkiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDgxQTJGIi8+CjxzdG9wIG9mZnNldD0iMC42MSIgc3RvcC1jb2xvcj0iIzhBMUZFNiIvPgo8c3RvcCBvZmZzZXQ9IjAuOTM1IiBzdG9wLWNvbG9yPSIjRjEyNTVCIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGMTgwMCIvPgo8L3JhZGlhbEdyYWRpZW50Pgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50Ml9yYWRpYWxfNDc0N183ODEwMiIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgwLjIwMTQ3NCAxLjUxMTQ1KSByb3RhdGUoNTkuNjc5NCkgc2NhbGUoMjMuOTY2NiAxNS4zMDQzKSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMDc3RkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjYxIiBzdG9wLWNvbG9yPSIjOEExRkU2Ii8+CjxzdG9wIG9mZnNldD0iMC45MzUiIHN0b3AtY29sb3I9IiNGMTI1NUIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYxODAwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQzX3JhZGlhbF80NzQ3Xzc4MTAyIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0zLjYgLTEuMDI4MTMpIHJvdGF0ZSgzNy4wOTQ1KSBzY2FsZSgyOS4zMzY1IDEzLjE5MzQpIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzA4MUEyRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjEiIHN0b3AtY29sb3I9IiM4QTFGRTYiLz4KPHN0b3Agb2Zmc2V0PSIwLjkzNSIgc3RvcC1jb2xvcj0iI0YxMjU1QiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjE4MDAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K)!important;background-size:16px 16px;cursor:default}.messages-separator[_ngcontent-%COMP%]{width:100%;text-align:center;border-bottom:1px solid #e3e6ec;line-height:.1em;margin:17px 0}.messages-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;letter-spacing:0;color:#999;opacity:1;font-family:Open Sans,serif;font-size:11px}.first-message-date-separator[_ngcontent-%COMP%]{border:none;margin-top:8px}.incoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#eaedf3;border:1px solid #e3e6ec;align-self:flex-start}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{background-color:#006ce0;align-self:flex-end}.outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%], .outcoming-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{color:#fff}.text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:none}.incoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-left:0}.outcoming-message[_ngcontent-%COMP%]   .text-block[_ngcontent-%COMP%]   .message-type.image-message-type[_ngcontent-%COMP%]{padding-right:0}.message-type[_ngcontent-%COMP%]   .message-info-container[_ngcontent-%COMP%]{align-items:center}  .text-message-wrapper .translate-toggle-button{background:transparent;opacity:0;float:right}  .text-message-wrapper .translate-toggle-button .icon{color:#004fd6}.text-message-wrapper[_ngcontent-%COMP%]:hover   .translate-toggle-button[_ngcontent-%COMP%], .text-message-wrapper[_ngcontent-%COMP%]:hover     .translate-toggle-button{opacity:1}"]})}}(0,o.__decorate)([(0,n.k)(),(0,o.__metadata)("design:type",Array),(0,o.__metadata)("design:paramtypes",[Array])],O.prototype,"messages",null),(0,o.__decorate)([(0,n.k)(),(0,o.__metadata)("design:type",Object)],O.prototype,"messagesCounter",void 0),(0,o.__decorate)([(0,n.k)(),(0,o.__metadata)("design:type",_.Hh)],O.prototype,"chat",void 0),(0,o.__decorate)([(0,j.j)(),(0,o.__metadata)("design:type",Object)],O.prototype,"contactClick",void 0)},58820:(F,y,e)=>{e.d(y,{r:()=>G});var o=e(5960),v=e.n(o),t=e(32667),b=e.n(t),n=e(22307),j=e.n(n),r=e(59247),g=e.n(r),u=e(77592),m=e(34760),W=e(91775),I=e(10844),M=e(54314),a=e(36486),L=e.n(a),f=e(60575),_=e(67057),h=e.n(_),P=e(66459),K=e.n(P),S=e(59237),R=e.n(S),B=e(4615),E=e.n(B),d=e(49281),U=e.n(d),A=e(37851),k=e.n(A),X=e(10821),J=e.n(X),q=e(75628),H=e(79772),D=e.n(H);const T=["sourceInput"],Z=["targetInput"];function tt(w,O){if(w&1){const c=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",18),n.\u0275\u0275listener("click",function(i){n.\u0275\u0275restoreView(c);const p=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(p.sourceDropdownOpen?p.clearSelection(i,"source"):null)}),n.\u0275\u0275element(1,"mat-icon",19),n.\u0275\u0275elementEnd()}if(w&2){const c=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275propertyInterpolate("svgIcon",c.sourceDropdownOpen?"small-close":"menu-arrow")}}function ot(w,O){if(w&1&&(n.\u0275\u0275elementStart(0,"mat-option",20),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),w&2){const c=O.$implicit;n.\u0275\u0275property("value",c),n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate1(" ",c.displayValue||c.caption||c.code," ")}}function it(w,O){if(w&1){const c=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",18),n.\u0275\u0275listener("click",function(i){n.\u0275\u0275restoreView(c);const p=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(p.targetDropdownOpen?p.clearSelection(i,"target"):null)}),n.\u0275\u0275element(1,"mat-icon",19),n.\u0275\u0275elementEnd()}if(w&2){const c=n.\u0275\u0275nextContext();n.\u0275\u0275advance(),n.\u0275\u0275propertyInterpolate("svgIcon",c.targetDropdownOpen?"small-close":"menu-arrow")}}function rt(w,O){if(w&1&&(n.\u0275\u0275elementStart(0,"mat-option",20),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),w&2){const c=O.$implicit;n.\u0275\u0275property("value",c),n.\u0275\u0275advance(),n.\u0275\u0275textInterpolate1(" ",c.displayValue||c.caption||c.code," ")}}function $(w,O){if(w&1&&(n.\u0275\u0275elementStart(0,"div",21)(1,"div",22)(2,"span",23),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd()()()),w&2){const c=n.\u0275\u0275nextContext();n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",c.languageDetectionError?n.\u0275\u0275pipeBind1(4,1,"MultilingualMessages.LanguageDetectionError"):c.translationError||""," ")}}class G{constructor(O,c,s){this._gtm=O,this._cdr=c,this._directionality=s,this.sourceLanguageControl=new r.FormControl("",[r.Validators.required]),this.targetLanguageControl=new r.FormControl("",[r.Validators.required]),this.translationError=null,this.languageDetectionError=!1,this.sourceDropdownOpen=!1,this.targetDropdownOpen=!1,this.availableLanguages=[],this.autoTranslateOnLanguageChange=!1,this.disabled=!1,this.sourceLanguageChange=new n.EventEmitter,this.translate=new n.EventEmitter,this.targetLanguageChange=new n.EventEmitter,this.displayFn=i=>i?i.displayValue||i.caption||i.code:""}_trackGtm(){this._gtm.track({action:"MultilingualTranslate",moduleName:"Multilingual",schemaName:"Multilingual",description:this.sourceLanguage})}_setSourceLanguage(){const O=this.availableLanguages.find(c=>c.code===this.sourceLanguage)||null;this.sourceLanguageControl.setValue(O,{emitEvent:!1})}_initFilter(){this.filteredLanguages$=this.sourceLanguageControl.valueChanges.pipe((0,a.startWith)(this.sourceLanguageControl.value||""),(0,a.map)(O=>this._filter(O))),this.targetFilteredLanguages$=this.targetLanguageControl.valueChanges.pipe((0,a.startWith)(this.targetLanguageControl.value||""),(0,a.map)(O=>this._filter(O)))}_filter(O){if(!this.availableLanguages)return[];if(O&&typeof O!="string")return this.availableLanguages;const c=(O||"").toString().toLowerCase();return this.availableLanguages.filter(s=>(s.displayValue||"").toLowerCase().includes(c)||(s.caption||"").toLowerCase().includes(c)||(s.code||"").toLowerCase().includes(c))}_setTargetLanguage(){const O=this.availableLanguages.find(c=>c.code===this.targetLanguage)||null;this.targetLanguageControl.setValue(O,{emitEvent:!1}),this._cdr.detectChanges()}ngOnChanges(O){O.sourceLanguage&&this.sourceLanguage&&this.availableLanguages?.length>0&&this._setSourceLanguage(),O.targetLanguage&&this.targetLanguage&&this.availableLanguages?.length>0&&this._setTargetLanguage(),O.availableLanguages&&this._initFilter(),O.disabled&&(this.disabled?(this.sourceLanguageControl.disable({emitEvent:!1}),this.targetLanguageControl.disable({emitEvent:!1})):(this.sourceLanguageControl.enable({emitEvent:!1}),this.targetLanguageControl.enable({emitEvent:!1})))}ngOnInit(){this.availableLanguages?.length>0?(this._initFilter(),this.sourceLanguage&&this._setSourceLanguage(),this.targetLanguage&&this._setTargetLanguage()):this.loadLanguages()}isSelected(){const O=this.sourceLanguageControl.value;return!!O&&typeof O!="string"&&!!O.code}clearSelection(O,c="source"){O.stopPropagation(),c==="target"?(this.targetLanguageControl.setValue("",{emitEvent:!0}),this.targetLanguageControl.markAsTouched(),this.targetLanguage=null):c==="source"&&(this.sourceLanguageControl.setValue("",{emitEvent:!0}),this.sourceLanguage=null),this._initFilter(),setTimeout(()=>{c==="target"?this._targetInputRef?.nativeElement.focus():c==="source"&&this._sourceInputRef?.nativeElement.focus()})}onSourceLanguageSelected(O){this.disabled||O.code===this.sourceLanguage||(this.sourceLanguage=O.code,this.sourceLanguageControl.setValue(O,{emitEvent:!1}),this._trackGtm(),this.sourceLanguageChange.emit(O),this.autoTranslateOnLanguageChange&&this.translate.emit({sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}))}onTargetLanguageSelected(O){this.disabled||O.code===this.targetLanguage||(this.targetLanguage=O.code,this.targetLanguageControl.setValue(O,{emitEvent:!1}),this.targetLanguageChange.emit(O))}translateAll(){!this.sourceLanguage||this.disabled||(this.translationError=null,this.translate.emit({sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}))}setTranslationError(O){this.translationError=O,this._cdr.markForCheck()}setLanguageDetectionError(O){this.languageDetectionError=O,O?this.sourceLanguageControl.setValue("",{emitEvent:!1}):this.setTranslationError(null),this._cdr.markForCheck()}loadLanguages(){const O={type:"crt.LoadTranslationLanguagesRequest",languages:[],$context:null};return W.t.instance.process(O).then(()=>{this.availableLanguages=O.languages,this.sourceLanguage&&this._setSourceLanguage(),this.targetLanguage&&this._setTargetLanguage(),this._initFilter(),this._cdr.markForCheck()}).catch(()=>{this._cdr.markForCheck()})}isRtl(){return this._directionality.value==="rtl"}getHint(O){return new M.z({hintConfig:{displayValue:O,cssClasses:"omnichat-tooltip-hint"},componentType:I.L})}isTranslateDisabled(){return this.disabled||!this.sourceLanguage||!this.targetLanguage||!this.sourceLanguageControl.valid||!this.targetLanguageControl.valid}static{this.\u0275fac=function(c){return new(c||G)(n.\u0275\u0275directiveInject(f.A),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(t.Directionality))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:G,selectors:[["crt-translate-language-picker"]],viewQuery:function(c,s){if(c&1&&(n.\u0275\u0275viewQuery(T,5),n.\u0275\u0275viewQuery(Z,5)),c&2){let i;n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(s._sourceInputRef=i.first),n.\u0275\u0275queryRefresh(i=n.\u0275\u0275loadQuery())&&(s._targetInputRef=i.first)}},inputs:{sourceLanguage:"sourceLanguage",availableLanguages:"availableLanguages",autoTranslateOnLanguageChange:"autoTranslateOnLanguageChange",disabled:"disabled",targetLanguage:"targetLanguage"},outputs:{sourceLanguageChange:"sourceLanguageChange",translate:"translate",targetLanguageChange:"targetLanguageChange"},features:[n.\u0275\u0275NgOnChangesFeature],decls:34,vars:45,consts:[["sourceInput",""],["sourceLangAuto","matAutocomplete"],["targetInput",""],["langAuto","matAutocomplete"],[1,"mlt-root"],[1,"mlt-row"],["appearance","outline","floatLabel","always",1,"mlt-lang-field","mlt-source-field"],["matInput","","type","text","required","",1,"mlt-lang-input",3,"formControl","matAutocomplete","placeholder"],["mat-icon-button","","type","button","class","mlt-clear-btn","tabindex","-1","disableRipple","",3,"click",4,"ngIf"],["panelClass","mlt-lang-panel",3,"optionSelected","opened","closed","displayWith","panelWidth"],[3,"value",4,"ngFor","ngForOf"],[1,"mlt-arrow-container"],[1,"mlt-arrow-icon",3,"svgIcon"],["appearance","outline","floatLabel","always",1,"mlt-lang-field","mlt-target-field"],["type","button",1,"mlt-translate-btn",3,"click","disabled"],[3,"libHintOverlay"],["svgIcon","translate-icon",1,"mlt-translate-icon"],["class","mlt-error-container",4,"ngIf"],["mat-icon-button","","type","button","tabindex","-1","disableRipple","",1,"mlt-clear-btn",3,"click"],[3,"svgIcon"],[3,"value"],[1,"mlt-error-container"],[1,"mlt-error-message"],[1,"mlt-error-text"]],template:function(c,s){if(c&1){const i=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(6,"input",7,0),n.\u0275\u0275pipe(8,"translate"),n.\u0275\u0275template(9,tt,2,1,"button",8),n.\u0275\u0275elementStart(10,"mat-autocomplete",9,1),n.\u0275\u0275listener("optionSelected",function(x){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.onSourceLanguageSelected(x.option.value))})("opened",function(){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.sourceDropdownOpen=!0)})("closed",function(){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.sourceDropdownOpen=!1)}),n.\u0275\u0275template(12,ot,2,2,"mat-option",10),n.\u0275\u0275pipe(13,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(14,"div",11),n.\u0275\u0275element(15,"mat-icon",12),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(16,"mat-form-field",13)(17,"mat-label"),n.\u0275\u0275text(18),n.\u0275\u0275pipe(19,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(20,"input",7,2),n.\u0275\u0275pipe(22,"translate"),n.\u0275\u0275template(23,it,2,1,"button",8),n.\u0275\u0275elementStart(24,"mat-autocomplete",9,3),n.\u0275\u0275listener("optionSelected",function(x){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.onTargetLanguageSelected(x.option.value))})("opened",function(){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.targetDropdownOpen=!0)})("closed",function(){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.targetDropdownOpen=!1)}),n.\u0275\u0275template(26,rt,2,2,"mat-option",10),n.\u0275\u0275pipe(27,"async"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(28,"button",14),n.\u0275\u0275pipe(29,"translate"),n.\u0275\u0275listener("click",function(){return n.\u0275\u0275restoreView(i),n.\u0275\u0275resetView(s.translateAll())}),n.\u0275\u0275elementStart(30,"div",15),n.\u0275\u0275pipe(31,"translate"),n.\u0275\u0275element(32,"mat-icon",16),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(33,$,5,3,"div",17),n.\u0275\u0275elementEnd()}if(c&2){const i=n.\u0275\u0275reference(11),p=n.\u0275\u0275reference(25);n.\u0275\u0275classProp("is-disabled",s.disabled),n.\u0275\u0275advance(),n.\u0275\u0275classProp("rtl",s.isRtl()),n.\u0275\u0275advance(),n.\u0275\u0275classProp("mlt-dropdown-open",s.sourceDropdownOpen),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,29,"MultilingualMessages.Caption")),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("placeholder",n.\u0275\u0275pipeBind1(8,31,"MultilingualMessages.LanguagePlaceholder")),n.\u0275\u0275property("formControl",s.sourceLanguageControl)("matAutocomplete",i),n.\u0275\u0275attribute("aria-autocomplete","list"),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",s.sourceLanguageControl.value&&!s.disabled),n.\u0275\u0275advance(),n.\u0275\u0275property("displayWith",s.displayFn)("panelWidth",230),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(13,33,s.filteredLanguages$)),n.\u0275\u0275advance(3),n.\u0275\u0275property("svgIcon",s.isRtl()?"arrow-left":"arrow-right"),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(19,35,"MultilingualMessages.SourceCaption")),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("placeholder",n.\u0275\u0275pipeBind1(22,37,"MultilingualMessages.LanguagePlaceholder")),n.\u0275\u0275property("formControl",s.targetLanguageControl)("matAutocomplete",p),n.\u0275\u0275attribute("aria-autocomplete","list"),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",s.targetLanguageControl.value&&!s.disabled),n.\u0275\u0275advance(),n.\u0275\u0275property("displayWith",s.displayFn)("panelWidth",230),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(27,39,s.targetFilteredLanguages$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("disabled",s.isTranslateDisabled()),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(29,41,"MultilingualMessages.Translate")),n.\u0275\u0275advance(2),n.\u0275\u0275property("libHintOverlay",s.getHint(n.\u0275\u0275pipeBind1(31,43,"MultilingualMessages.Translate"))),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",s.languageDetectionError||s.translationError)}},dependencies:[_.NgForOf,_.NgIf,r.DefaultValueAccessor,r.NgControlStatus,r.RequiredValidator,r.FormControlDirective,P.MatFormField,P.MatLabel,S.MatAutocomplete,B.MatOption,S.MatAutocompleteTrigger,d.MatInput,A.MatIcon,X.MatIconButton,q.v,_.AsyncPipe,H.TranslatePipe],styles:[".mlt-root.is-disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.mlt-error-container[_ngcontent-%COMP%]{padding-top:4px}.mlt-error-container[_ngcontent-%COMP%]   .mlt-error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.mlt-error-container[_ngcontent-%COMP%]   .mlt-error-message[_ngcontent-%COMP%]   .mlt-error-text[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-weight:500;font-style:normal;font-size:12px;line-height:16px;color:#d2310d}.mlt-toolbar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;flex-wrap:wrap}.mlt-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;justify-content:space-between}.mlt-row.rtl[_ngcontent-%COMP%]   .mlt-target-field[_ngcontent-%COMP%]{order:4}.mlt-row.rtl[_ngcontent-%COMP%]   .mlt-arrow-container[_ngcontent-%COMP%]{order:3}.mlt-row.rtl[_ngcontent-%COMP%]   .mlt-source-field[_ngcontent-%COMP%]{order:2}.mlt-row.rtl[_ngcontent-%COMP%]   .mlt-translate-btn[_ngcontent-%COMP%]{order:1}.mlt-lang-field[_ngcontent-%COMP%]{min-width:100px;max-width:190px;margin:0;position:relative}.mlt-lang-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}.mlt-lang-field[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.mlt-lang-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding:0 30px 0 6px}.mlt-lang-field[_ngcontent-%COMP%]   input.mat-mdc-input-element[_ngcontent-%COMP%]{padding:6px 0;font-size:14px;line-height:20px}.mlt-lang-field[_ngcontent-%COMP%]   .mlt-clear-btn[_ngcontent-%COMP%]{position:absolute;top:50%;right:-8px;transform:translateY(-50%);width:16px;height:16px;display:inline-flex;align-items:center;justify-content:center;padding:0;color:#00000073;transition:color .15s ease;line-height:1}.mlt-lang-field[_ngcontent-%COMP%]   .mlt-clear-btn.mat-mdc-icon-button[_ngcontent-%COMP%]{--mdc-icon-button-icon-size: 16px;width:24px;height:24px}.mlt-lang-field[_ngcontent-%COMP%]   .mlt-clear-btn[_ngcontent-%COMP%]:hover{color:#000000bf}.mlt-lang-field[_ngcontent-%COMP%]   .mlt-clear-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin:0}.mlt-lang-field[_ngcontent-%COMP%]   .mlt-lang-input[_ngcontent-%COMP%]{max-width:114px}.mlt-row.rtl[_ngcontent-%COMP%]   .mlt-lang-field[_ngcontent-%COMP%]   .mlt-clear-btn[_ngcontent-%COMP%]{right:auto;left:-8px}[_nghost-%COMP%]     .mlt-lang-field .mat-mdc-text-field-wrapper{min-height:32px}[_nghost-%COMP%]     .mlt-lang-field .mat-mdc-form-field-flex{padding:0!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-text-field{height:32px;padding-right:8px;padding-left:8px}[_nghost-%COMP%]     .mlt-lang-field .mat-mdc-form-field-infix{padding:0!important;min-height:32px;display:flex;align-items:center}[_nghost-%COMP%]     .mlt-lang-field .mat-mdc-floating-label{font-size:12px}[_nghost-%COMP%]     .mlt-lang-field .mdc-notched-outline__notch{padding:0!important}[_nghost-%COMP%]     .mlt-lang-field .mat-mdc-form-field-subscript-wrapper{display:none!important;height:0!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-notched-outline__leading{border-start-start-radius:4px!important;border-end-start-radius:4px!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-notched-outline__trailing{border-start-end-radius:4px!important;border-end-end-radius:4px!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__trailing{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-left-color:transparent!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__notch{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-right-color:transparent!important;border-left-color:transparent!important;border-top-color:transparent!important}[_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-floating-label.mat-mdc-floating-label{color:var(--crt-palette-link-500, #004fd6)}[_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__leading{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-right-color:transparent!important}[dir=rtl]   [_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__leading{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-left-color:transparent!important;border-right-color:var(--crt-palette-link-500, #004fd6)!important}[dir=rtl]   [_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__trailing{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-right-color:transparent!important;border-left-color:var(--crt-palette-link-500, #004fd6)!important}[dir=rtl]   [_nghost-%COMP%]     .mlt-lang-field .mdc-text-field--focused .mdc-notched-outline__notch{border:1px solid var(--crt-palette-link-500, #004fd6)!important;border-right-color:transparent!important;border-left-color:transparent!important;border-top-color:transparent!important}.mlt-translate-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;color:var(--crt-palette-link-500, #004fd6);font:inherit;display:inline-flex;align-items:center;gap:4px;cursor:pointer;padding:2px 6px;border-radius:4px;line-height:16px;font-size:12px}.mlt-translate-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d214}.mlt-translate-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#1976d229}.mlt-translate-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}.mlt-translate-btn[_ngcontent-%COMP%]   .mlt-translate-icon[_ngcontent-%COMP%]{width:16px;height:16px}.mlt-translate-btn[_ngcontent-%COMP%]   .mlt-translate-label.is-loading[_ngcontent-%COMP%]:after{display:none}.mlt-lang-panel[_ngcontent-%COMP%]{max-height:220px;padding-top:0}.mat-mdc-option[_ngcontent-%COMP%]   .mdc-list-item__primary-text[_ngcontent-%COMP%]{font-size:12px}.mlt-arrow-icon[_ngcontent-%COMP%]{color:var(--crt-palette-link-500, #004fd6);width:16px;height:16px}"],changeDetection:0})}}(0,o.__decorate)([(0,u.k)(),(0,o.__metadata)("design:type",String)],G.prototype,"sourceLanguage",void 0),(0,o.__decorate)([(0,u.k)(),(0,o.__metadata)("design:type",Array)],G.prototype,"availableLanguages",void 0),(0,o.__decorate)([(0,u.k)(),(0,o.__metadata)("design:type",Object)],G.prototype,"autoTranslateOnLanguageChange",void 0),(0,o.__decorate)([(0,u.k)(),(0,o.__metadata)("design:type",Object)],G.prototype,"disabled",void 0),(0,o.__decorate)([(0,u.k)(),(0,o.__metadata)("design:type",String)],G.prototype,"targetLanguage",void 0),(0,o.__decorate)([(0,m.j)(),(0,o.__metadata)("design:type",Object)],G.prototype,"sourceLanguageChange",void 0),(0,o.__decorate)([(0,m.j)(),(0,o.__metadata)("design:type",Object)],G.prototype,"translate",void 0),(0,o.__decorate)([(0,m.j)(),(0,o.__metadata)("design:type",Object)],G.prototype,"targetLanguageChange",void 0)},91308:(F,y,e)=>{e.d(y,{p:()=>a});var o=e(62278),v=e.n(o),t=e(22307),b=e.n(t),n=e(76732),j=e(10821),r=e.n(j),g=e(23681),u=e.n(g),m=e(67057),W=e.n(m),I=e(79772),M=e.n(I);class a{constructor(f){this._academyService=f,this.academyUrl$=new o.BehaviorSubject("")}ngOnInit(){this._academyService.getAcademyHelpUrl("ChatAccess").pipe((0,o.take)(1)).subscribe(f=>{this.academyUrl$.next(f)})}static{this.\u0275fac=function(_){return new(_||a)(t.\u0275\u0275directiveInject(n.k))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:a,selectors:[["ts-facebook-channel-error-dialog"]],decls:12,vars:12,consts:[["mat-dialog-content",""],[1,"message"],["target","_blank","rel","noopener noreferrer",3,"href"],["mat-dialog-actions",""],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"action-button",3,"mat-dialog-close"]],template:function(_,h){_&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"span",1),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementStart(4,"a",2),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(8,"div",3)(9,"button",4),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()()),_&2&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,4,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Message")," "),t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("href",t.\u0275\u0275pipeBind1(5,6,h.academyUrl$),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,8,"ChatSettings.ChannelDetail.FacebookSettings.InvalidSettings.Link.Text")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,10,"InfoDialog.OK")," "))},dependencies:[j.MatButton,g.MatDialogClose,g.MatDialogActions,g.MatDialogContent,m.AsyncPipe,I.TranslatePipe],styles:["[mat-dialog-content][_ngcontent-%COMP%]{max-height:450px;overflow-y:auto!important}[mat-dialog-content][_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{white-space:pre-line;word-break:break-word}[mat-dialog-actions][_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{float:right;margin-left:auto;border-radius:4px}"]})}}},31576:(F,y,e)=>{e.d(y,{C:()=>o});const o={OK:{key:"OK",config:{color:"primary",caption:"Dialog.Ok"}},YES:{key:"YES",config:{color:"primary",caption:"Dialog.Yes"}},NO:{key:"NO",config:{color:"default",caption:"Dialog.No"}}}},98647:(F,y,e)=>{e.d(y,{C:()=>o});var o;(function(v){v.FacebookMessenger="50491c6c-d82b-4b86-b38c-99262d11a5ac",v.Telegram="645170ab-c67a-4dcc-9def-c0e5236bdfe0",v.WhatsApp="1398dc73-b428-4e21-b97a-c1bb6b4bc621",v.AdaConnector="fd6491c5-0ebe-408a-a4c3-057a1ac79dd4"})(o||(o={}))},90150:(F,y,e)=>{e.d(y,{x:()=>S});var o=e(73308),v=e(5960),t=e.n(v),b=e(41287),n=e(6530),j=e(82517),r=e(91775),g=e(61541),u=e(844),m=e(22592),W=e(80939),I=e(49213),M=e(62278),a=e.n(M),L=e(91308),f=e(31576),_=e(98647),h=e(75169),P=e(33856),K=e(21896);let S=class extends b.l{constructor(B,E,d,U,A,k){super(),this._facebookApiProvider=B,this._channelService=E,this._facebookRegistrationService=d,this._maskService=U,this._dialogProvider=A,this._messageDialogProvider=k}_isCreateFacebookChannelRequest(B){return B.entityName==="Channel"&&this._getDefaultValue(B,"Provider")===_.C.FacebookMessenger}_getDefaultValue(B,E){return B.defaultValues.find(d=>d.attributeName===E)?.value}_getChannel(B){return{id:(0,n.qv)(),name:B.name,typeId:_.C.FacebookMessenger,source:B.id,isActive:!1}}_addFacebookMessengerChannels(B){var E=this;return(0,o.A)(function*(){if(!(yield E._facebookApiProvider.isFacebookSettingValid())){yield(0,M.firstValueFrom)(E._dialogProvider.open(L.p,{panelClass:["crt-message-dialog"]}));return}E.initFacebookPages().pipe((0,M.concatMap)(d=>(0,M.from)(d)),(0,M.concatMap)(d=>E._facebookApiProvider.attachPage(d.token).pipe((0,M.concatMap)(()=>{const U=E._getChannel(d);return E._maskService.showBodyMask(),E._facebookRegistrationService.registerFacebookChannel(d.token,d.id).pipe((0,M.concatMap)(A=>A?.success?(U.msgSettingsId=A.SettingsId,U.id=(0,n.qv)(),U.isActive=!0,(0,M.from)(E._channelService.insertItem(U)).pipe((0,M.concatMap)(()=>E._openChannelEditingPage(B,d.id,d.name,U.id)))):(E._messageDialogProvider.open({data:{message:A?.errorInfo?.message||"An unknown error occurred during the operation.",actions:[f.C.OK]}}),M.EMPTY)))})))).subscribe(()=>{console.log("FB channel connected")},null,()=>{(0,M.from)(E._reloadChannelsList(B)),E._maskService.hideBodyMask()})})()}_reloadChannelsList(B){return(0,o.A)(function*(){const{$context:E,scopes:d}=B,U=B.$context.models.find(k=>k.dataSource.initialConfig.entitySchemaName==="Channel"),A={type:"crt.LoadDataRequest",scopes:d,config:{loadType:j.I.Reload},$context:E,dataSourceName:U.dataSource.dataSourceName};yield r.t.instance.process(A)})()}_openChannelEditingPage(B,E,d,U){return(0,o.A)(function*(){const A=B.$context;yield A.executeRequest({type:"crt.OpenPageRequest",schemaName:"FBMessengerChannel_EditPage",modelInitConfigs:[{recordId:U,action:g.n.Edit}],$context:A})})()}initFacebookPages(){return this._facebookApiProvider.initApi().pipe((0,M.concatMap)(()=>this._facebookApiProvider.login()),(0,M.concatMap)(()=>this._facebookApiProvider.getPages()))}handle(B){var E=this;return(0,o.A)(function*(){if(!E._isCreateFacebookChannelRequest(B))return E.next?.handle(B);yield E._addFacebookMessengerChannels(B)})()}};S=(0,v.__decorate)([(0,u.l)({requestType:"crt.CreateRecordRequest",type:"crt.FacebookChannelCreateRecordHandler",scopes:["ChatSettingsPage"]}),(0,v.__metadata)("design:paramtypes",[h.I,P.l,K.T,m.s,W.g,I.L])],S)},91438:(F,y,e)=>{e.d(y,{F:()=>g});var o=e(5960),v=e.n(o),t=e(22307),b=e.n(t),n=e(844),j=e(7471),r=e(90023);let g=class extends r._{constructor(m){super(m),this._operation="CanManageChats",this._dialogService=m.get(j.o)}getOperation(){return this._operation}showMessage(){this._dialogService.openOperationPermissionsErrorDialog(this._operation)}};g=(0,o.__decorate)([(0,n.l)({type:"crt.ChatSettingsPageInitHandler",requestType:"crt.HandleViewModelInitRequest",scopes:["ChatSettingsPage","ChatQueues_FormPage"]}),(0,o.__metadata)("design:paramtypes",[t.Injector])],g)},10414:(F,y,e)=>{e.d(y,{A:()=>S,D:()=>R});var o=e(73308),v=e(5960),t=e.n(v),b=e(41287),n=e(43785),j=e(86464),r=e(91775),g=e(82517),u=e(844),m=e(79772),W=e.n(m),I=e(7471),M=e(65751),a=e(57372),L=e(89285),f=e(49066),_=e(28399),h=e.n(_),P=e(62278),K=e.n(P);class S extends f.H{}let R=class extends b.l{constructor(E,d,U){super(),this.dialogService=E,this.queryExecutor=d,this.translateService=U,this._dataSourceName="QueueAgentsListDS"}_getEntityName(E){return E.$context.dataSchemas[this._dataSourceName]?.dataSourceConfig?.config?.entitySchemaName}_getInsertQuery(E,d){var U=this;return(0,o.A)(function*(){const A=U._getEntityName(E),k=new n.L(A);return[{path:"Operator",value:d,type:j.r.Guid},{path:"ChatQueue",value:yield E.$context.Id,type:j.r.Guid}].forEach(J=>{k.addColumn(J.path,J.value,J.type)}),k})()}_createDuplicationsValidator(E){return d=>{const U=E.find(A=>A.attributes.QueueAgentsListDS_Operator.value===d.id);return{success:(0,_.isEmpty)(U),message:this.translateService.instant("ChatSettings.ChatQueueOperatorDetail.DuplicationMessage")}}}_saveViewModel(E){return(0,o.A)(function*(){const{$context:d,scopes:U}=E,A={type:"crt.SaveRecordRequest",preventCardClose:!0,scopes:U,$context:d};return yield r.t.instance.process(A)})()}_reloadAgentDetail(E){return(0,o.A)(function*(){const d=E.$context,U=yield d.getPrimaryModelName(),A=yield d.getPrimaryDataSchema(),k={type:"crt.LoadDataRequest",config:{loadType:g.I.Reload},$context:d,parameters:[{type:"primaryColumnValue",value:A.primaryAttributeName}],dataSourceName:U};yield r.t.instance.process(k)})()}handle(E){var d=this;return(0,o.A)(function*(){if(E.$context.PrimaryModelMode===L.b.Create&&!(yield d._saveViewModel(E)))return;const A=yield E.$context.QueueAgentsList,k=yield(0,P.lastValueFrom)(d.dialogService.open(a.q,{data:{validator:d._createDuplicationsValidator(A)}}));if(k?.id){const X=yield d._getInsertQuery(E,k.id),J=d.queryExecutor.executeInsertQuery(X);yield(0,P.lastValueFrom)(J),yield d._reloadAgentDetail(E)}yield d.next?.handle(E)})()}};R=(0,v.__decorate)([(0,u.l)({type:"crt.CreateQueueAgentHandler",requestType:"crt.CreateQueueAgentHandlerRequest"}),(0,v.__metadata)("design:paramtypes",[I.o,M.w,m.TranslateService])],R)},69906:(F,y,e)=>{e.d(y,{z:()=>r});var o=e(73308),v=e(5960),t=e.n(v),b=e(41287),n=e(844),j=e(44488);let r=class extends b.l{constructor(u){super(),this.telegramService=u,this._telegramBotAttrName="TelegramBot"}_setTelegramBotLink(u,m){const W=`<a target='_blank' href='https://t.me/${u}'>${u}</a>`;m[this._telegramBotAttrName]=W}handle(u){var m=this;return(0,o.A)(function*(){const W=u.$context,I=W.getViewModelAttributePaths(yield W.getPrimaryModelName(),"MsgSettingsId")[0],M=yield W[I],a=yield W[m._telegramBotAttrName];return M&&!a&&!m._getUserName$&&(m._getUserName$=m.telegramService.getTelegramUserName(M).subscribe(L=>{m._setTelegramBotLink(L,W),m._getUserName$.unsubscribe()})),yield m.next?.handle(u)})()}};r=(0,v.__decorate)([(0,n.l)({type:"crt.TelegramChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["TelegramChannel_EditPage"]}),(0,v.__metadata)("design:paramtypes",[j.A])],r)},42498:(F,y,e)=>{e.d(y,{c:()=>a});var o=e(73308),v=e(5960),t=e.n(v),b=e(41287),n=e(844),j=e(22592),r=e(79772),g=e.n(r),u=e(49213),m=e(62278),W=e.n(m),I=e(31576),M=e(44488);let a=class extends b.l{constructor(f,_,h,P){super(),this._telegramService=f,this._messageDialogProvider=_,this._translateService=h,this._maskService=P}_setModelValue(f,_,h,P){const K=f.getViewModelAttributePaths(_,h)[0];f[K]=P}_setModelValues(f,_){var h=this;return(0,o.A)(function*(){const P=yield f.getPrimaryModelName();h._setModelValue(f,P,"Name",_.ChannelName),h._setModelValue(f,P,"Source",_.TelegramId),h._setModelValue(f,P,"MsgSettingsId",_.SettingsId)})()}handle(f){var _=this;return(0,o.A)(function*(){const h=f.$context,P=yield h.validate();if(Object.keys(P).length>0)return;yield _._maskService.showBodyMask();const K=yield h.TelegramToken,S=yield(0,m.firstValueFrom)(_._telegramService.registerTelegramChannel(K)),R=_._telegramService.validateRegisterChannel(S);if(yield _._maskService.hideBodyMask(),R?.length>0)_._messageDialogProvider.open({data:{message:_._translateService.instant(R),actions:[I.C.OK]}});else return yield _._setModelValues(h,S),_.next?.handle(f)})()}};a=(0,v.__decorate)([(0,n.l)({requestType:"crt.SaveRecordRequest",type:"crt.TelegramChannelSaveHandler",scopes:["TelegramChannel_AddingPage"]}),(0,v.__metadata)("design:paramtypes",[M.A,u.L,r.TranslateService,j.s])],a)},90090:(F,y,e)=>{e.d(y,{X:()=>f});var o=e(73308),v=e(5960),t=e.n(v),b=e(41287),n=e(844),j=e(22592),r=e(79772),g=e.n(r),u=e(49213),m=e(62278),W=e.n(m),I=e(31576),M=e(98647),a=e(24788),L=e(33856);let f=class extends b.l{constructor(h,P,K,S,R){super(),this._whatsAppService=h,this._channelService=P,this._messageDialogProvider=K,this._translateService=S,this._maskService=R}_handleConnectError(h){if(h?.errorInfo?.errorCode){const P=this._whatsAppService.validateRegisterChannel(h);this._messageDialogProvider.open({data:{message:this._translateService.instant(P),actions:[I.C.OK]}})}}_getDigits(h){return h.replace(/\D+/g,"")}_setModelValue(h,P,K,S){const R=h.getViewModelAttributePaths(P,K)[0];h[R]=S}_setModelValues(h,P,K){var S=this;return(0,o.A)(function*(){const R=yield h.getPrimaryModelName();S._setModelValue(h,R,"MsgSettingsId",P.SettingsId),S._setModelValue(h,R,"Source",K),S._setModelValue(h,R,"Name",K)})()}handle(h){var P=this;return(0,o.A)(function*(){const K=h.$context,S=yield K.validate();if(Object.keys(S).length>0)return;yield P._maskService.showBodyMask();const R=yield K.TwilioToken,B=yield K.ApplicationId,E=P._getDigits(yield K.PhoneNumber);if(yield(0,m.firstValueFrom)(P.validateIntegration(E,R,B))){const U=yield(0,m.firstValueFrom)(P._whatsAppService.register(R,B,E)),A=P._whatsAppService.validateRegisterChannel(U);if(yield P._maskService.hideBodyMask(),A?.length>0)P._messageDialogProvider.open({data:{message:P._translateService.instant(A),actions:[I.C.OK]}});else return yield P._setModelValues(h.$context,U,E),P.next?.handle(h)}})()}validateIntegration(h,P,K){return new m.Observable(S=>{this._channelService.checkCanSaveChannel(h,M.C.WhatsApp,R=>{R?this._whatsAppService.tryConnect(P,K,h).subscribe(B=>{B?.IsConnectionSuccess?S.next(!0):(this._maskService.hideBodyMask(),this._handleConnectError(B),S.next(!1)),S.complete()}):(this._maskService.hideBodyMask(),this._messageDialogProvider.open({data:{message:this._translateService.instant("ChatSettings.ChannelPage.WhatsApp.ChannelDuplicatedErrorMessage"),actions:[I.C.OK]}}),S.next(!1),S.complete())})})}};f=(0,v.__decorate)([(0,n.l)({requestType:"crt.SaveRecordRequest",type:"crt.WhatsAppSaveChannelHandler",scopes:["WhatsAppChannel_AddingPage"]}),(0,v.__metadata)("design:paramtypes",[a.J,L.l,u.L,r.TranslateService,j.s])],f)},71640:(F,y,e)=>{e.d(y,{c:()=>v});var o=e(98647);class v{get type(){switch(this.typeId){case o.C.FacebookMessenger:return o.C.FacebookMessenger;case o.C.Telegram:return o.C.Telegram;default:throw new Error(`Type with id ${this.typeId} not found`)}}}},35463:(F,y,e)=>{e.d(y,{B:()=>gt});var o=e(5960),v=e(67057),t=e(5757),b=e(59247),n=e(10821),j=e(23681),r=e(55642),g=e(79772),u=e(74501),m=e(61267),W=e(37851),I=e(75628),M=e(10844),a=e(22307);class L{static{this.\u0275fac=function(l){return new(l||L)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:L})}static{this.\u0275inj=a.\u0275\u0275defineInjector({imports:[v.CommonModule]})}}(function(){(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(L,{declarations:[I.v,M.L],imports:[v.CommonModule],exports:[I.v,M.L]})})();var f=e(1034),_=e(18357),h=e(54314),P=e(62278),K=e(12087);function S(Q,C){if(Q&1&&(a.\u0275\u0275elementStart(0,"span",7),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),Q&2){const l=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(l.caption)}}function R(Q,C){if(Q&1){const l=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",3),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(l);const z=a.\u0275\u0275nextContext(2);return a.\u0275\u0275resetView(z.onTranslateButtonClick())}),a.\u0275\u0275elementContainerStart(1,4),a.\u0275\u0275element(2,"mat-icon",5),a.\u0275\u0275template(3,S,2,1,"span",6),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()}if(Q&2){const l=a.\u0275\u0275nextContext(2);a.\u0275\u0275classProp("translated",l.isTranslatedMode),a.\u0275\u0275property("libHintOverlay",l.getHint())("disabled",l.disabled)("ngClass",l.getClasses()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitch",l.iconPosition),a.\u0275\u0275advance(),a.\u0275\u0275property("svgIcon","translate-icon")("ngClass",l.getIconClasses()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",l.captionVisible)}}function B(Q,C){if(Q&1&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,R,4,9,"button",2),a.\u0275\u0275elementContainerEnd()),Q&2){const l=a.\u0275\u0275nextContext();a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",l.isTranslationButtonRendered)}}function E(Q,C){if(Q&1&&(a.\u0275\u0275elementStart(0,"span",7),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),Q&2){const l=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(l.caption)}}function d(Q,C){if(Q&1){const l=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",8),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(l);const z=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(z.onTranslateButtonClick())}),a.\u0275\u0275elementContainerStart(1,4),a.\u0275\u0275element(2,"mat-icon",5),a.\u0275\u0275template(3,E,2,1,"span",6),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()}if(Q&2){const l=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("translated",l.isTranslatedMode),a.\u0275\u0275property("disabled",l.disabled)("ngClass",l.getClasses()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngSwitch",l.iconPosition),a.\u0275\u0275advance(),a.\u0275\u0275property("svgIcon","translate-icon")("ngClass",l.getIconClasses()),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",l.captionVisible)}}const U="OmnichannelMessagingProfileData";let A=class dt extends K.b{get isTranslatedMode(){return this.autoEnabled}constructor(C){super(C),this.injector=C,this.autoEnabled=!0,this._userProfileService=this.injector.get(_.c)}_attach(){!this.translateTrigger$||this._sub||(this._sub=this.translateTrigger$.subscribe(C=>{typeof C=="string"&&(this.sourceText=C),this.isTranslationError=!1,this.disabled=!0,this.isTranslated=!1,this.translateText()}))}_detach(){this._sub?.unsubscribe(),this._sub=void 0}_loadToggleState(){this._userProfileService.getProfile(U).subscribe({next:C=>{C?.autoTranslateEnabled!==void 0?(this.autoEnabled=C.autoTranslateEnabled,this.autoEnabled&&this._attach()):this.autoEnabled&&this._attach()},error:()=>{this.autoEnabled&&this._attach()}})}_saveToggleState(){const C={autoTranslateEnabled:this.autoEnabled};this._userProfileService.saveProfile(U,C).subscribe()}ngOnInit(){this._loadToggleState()}ngOnDestroy(){this._detach()}getHint(){return new h.z({hintConfig:{displayValue:this.caption,cssClasses:"auto-translate-toggle-tooltip-hint"},componentType:M.L})}onTranslateButtonClick(){this.disabled||(this.autoEnabled=!this.autoEnabled,this.autoEnabled?this._attach():this._detach(),this._saveToggleState(),this.rerenderButton())}get caption(){return this.translateService.instant(this.autoEnabled?"TranslateToggle.AutoCaption.Off":"TranslateToggle.AutoCaption.On")}get captionVisible(){return this.iconPosition!==this.iconPositionEnum.OnlyIcon}static{this.\u0275fac=function(l){return new(l||dt)(a.\u0275\u0275directiveInject(a.Injector))}}static{this.\u0275cmp=a.\u0275\u0275defineComponent({type:dt,selectors:[["crt-auto-translate-toggle"]],inputs:{translateTrigger$:"translateTrigger$"},features:[a.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["withoutHint",""],[4,"ngIf","ngIfElse"],["type","button","mat-button","","class","translate-toggle-button","disableRipple","",3,"translated","libHintOverlay","disabled","ngClass","click",4,"ngIf"],["type","button","mat-button","","disableRipple","",1,"translate-toggle-button",3,"click","libHintOverlay","disabled","ngClass"],[3,"ngSwitch"],[1,"icon",3,"svgIcon","ngClass"],["class","caption",4,"ngIf"],[1,"caption"],["type","button","mat-button","","disableRipple","",1,"translate-toggle-button",3,"click","disabled","ngClass"]],template:function(l,N){if(l&1&&a.\u0275\u0275template(0,B,2,1,"ng-container",1)(1,d,4,8,"ng-template",null,0,a.\u0275\u0275templateRefExtractor),l&2){const z=a.\u0275\u0275reference(2);a.\u0275\u0275property("ngIf",N.iconPosition==="only-icon")("ngIfElse",z)}},dependencies:[v.NgClass,v.NgIf,v.NgSwitch,n.MatButton,W.MatIcon,I.v],styles:["button.translate-toggle-button[_ngcontent-%COMP%]{min-width:unset;max-width:100%;min-height:unset;display:inline-flex;align-items:center;justify-content:center;padding:0;background-color:transparent;text-transform:none!important}button.translate-toggle-button[_ngcontent-%COMP%]:hover{background-color:transparent!important;outline:none;border:none}.caption[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;font-size:12px;line-height:16px;vertical-align:middle}.icon[_ngcontent-%COMP%]{width:16px;height:16px;line-height:20px;vertical-align:middle;color:#8094b3}.translated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#004fd6}.button-icon-size-small[_ngcontent-%COMP%]{width:8px;height:8px}.button-icon-size-medium[_ngcontent-%COMP%]{width:12px;height:12px}.button-icon-size-large[_ngcontent-%COMP%]{width:16px;height:16px}.button-icon-size-extra-large[_ngcontent-%COMP%]{width:24px;height:24px}.button-size-small[_ngcontent-%COMP%]{min-width:12px!important;height:12px!important}.button-size-medium[_ngcontent-%COMP%]{min-width:16px!important;height:16px!important}.button-size-large[_ngcontent-%COMP%], .button-size-extra-large[_ngcontent-%COMP%]{min-width:24px!important;height:24px!important}  .auto-translate-toggle-tooltip-hint,   .translate-toggle-tooltip-hint{margin:0 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;position:relative;width:max-content;color:#757575;border-radius:50px;border:none;z-index:1;font-size:11px;padding:5px;box-shadow:none;top:10px;text-align:center}"]})}};A=(0,o.__decorate)([(0,f.v)({type:"crt.AutoTranslateToggle"}),(0,o.__metadata)("design:paramtypes",[a.Injector])],A);let k=class _t{static{this.\u0275fac=function(l){return new(l||_t)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:_t})}static{this.\u0275inj=a.\u0275\u0275defineInjector({imports:[v.CommonModule,n.MatButtonModule,g.TranslateModule,W.MatIconModule,L]})}};k=(0,o.__decorate)([(0,r.g)({viewElements:[K.b,A]})],k),function(){(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(k,{declarations:[K.b,A],imports:[v.CommonModule,n.MatButtonModule,g.TranslateModule,W.MatIconModule,L],exports:[K.b,A]})}();var X=e(23092),J=e(45328),q=e(97696),H=e(91308),D=e(58820),T=e(42498),Z=e(90090),tt=e(10414),ot=e(69906),it=e(90150),rt=e(91438),$=e(73308),G=e(41287),w=e(844),O=e(22592),c=e(49213),s=e(31576),i=e(56704);let p=class extends G.l{constructor(C,l,N,z){super(),this._chatService=C,this._maskService=l,this._messageDialogProvider=N,this._translateService=z,this._channelsListName="ChannelsList",this._activeChatsValidationErrorMsgCode="ChatSettings.Channel.ActiveChatsValidationError"}_validateForActiveChats(C){var l=this;return(0,$.A)(function*(){yield l._maskService.showBodyMask();const N=yield(0,P.lastValueFrom)(l._chatService.hasUncompletedChats(C));if(yield l._maskService.hideBodyMask(),N){const z=l._translateService.instant(l._activeChatsValidationErrorMsgCode);return l._messageDialogProvider.open({data:{message:z,actions:[s.C.OK]}}),!1}return!0})()}_isValid(C){return this._validateForActiveChats(C)}handle(C){var l=this;return(0,$.A)(function*(){if(C.itemsAttributeName===l._channelsListName){const N=C.recordId;if(!(yield l._isValid(N)))return}l.next?.handle(C)})()}};p=(0,o.__decorate)([(0,w.l)({requestType:"crt.DeleteRecordRequest",type:"crt.ChanelDeleteRecordHandler",scopes:["ChatSettingsPage"]}),(0,o.__metadata)("design:paramtypes",[i.I,O.s,c.L,g.TranslateService])],p);var x=e(65576);let Y=class extends G.l{constructor(C){super(),this._translateService=C,this._channelsListAttribute="ChannelsList",this._validationImageAttribute="ValidationImage"}_getAttributeValue(C,l,N){const z=C.getViewModelAttributePaths(l,N);return!z||z.length===0?"":C.attributes[z[0]]}_setupValidationError(C,l,N,z){const V=this._getAttributeValue(C,l,"Name"),nt=this._translateService.instant(`ChatSettings.ChannelPage.ErrorCodes.${N}`,{channelName:V});z.tooltip=nt,C.set(this._validationImageAttribute,z)}_resetValidationError(C){C.set(this._validationImageAttribute,null)}_validateChannelRecord(C){var l=this;return(0,$.A)(function*(){const N=C.attributes[l._validationImageAttribute];if(!N)return;const z=yield C.getPrimaryModelName(),V=l._getAttributeValue(C,z,"ErrorCode");return V?l._setupValidationError(C,z,V,N):l._resetValidationError(C)})()}_subscribeViewModelEvents(C){var l=this;const N=new P.Subscription;N.add(C.events$.pipe((0,P.filter)(({type:z,payload:V})=>z===x.n.FinishLoadModelAttributes&&V&&V[this._channelsListAttribute])).subscribe({next:function(){var z=(0,$.A)(function*(){const V=C.attributes[l._channelsListAttribute];for(const nt of V)yield l._validateChannelRecord(nt)});return function(){return z.apply(this,arguments)}}(),complete:()=>{N.unsubscribe()}}))}handle(C){var l=this;return(0,$.A)(function*(){yield l.next?.handle(C),l._subscribeViewModelEvents(C.$context)})()}};Y=(0,o.__decorate)([(0,w.l)({requestType:"crt.HandleViewModelInitRequest",type:"crt.ChannelErrorValidationHandler",scopes:["ChatSettingsPage"]}),(0,o.__metadata)("design:paramtypes",[g.TranslateService])],Y);var at=e(91820);let st=class extends G.l{_setFacebookPageLink(C,l,N){const z=`<a target='_blank' href='https://facebook.com/${l}'>${C}</a>`;N[this._facebookPageLinkAttrName]=z}constructor(C){super(),this._facebookSettingsService=C,this._facebookPageLinkAttrName="FacebookLink"}handle(C){var l=this;return(0,$.A)(function*(){const N=C.$context,z=N.getViewModelAttributePaths(yield N.getPrimaryModelName(),"Source")[0],V=yield N[z],nt=yield N[l._facebookPageLinkAttrName];if(V&&!nt&&!l._pageRequested){l._pageRequested=!0;const yt=N.getViewModelAttributePaths(yield N.getPrimaryModelName(),"Id")[0],At=yield N[yt];l._getPageName$=l._facebookSettingsService.getPageName(V,At).subscribe(Lt=>{l._setFacebookPageLink(Lt,V,N),l._getPageName$.unsubscribe()})}return yield l.next?.handle(C)})()}};st=(0,o.__decorate)([(0,w.l)({type:"crt.FacebookChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["FBMessengerChannel_EditPage"]}),(0,o.__metadata)("design:paramtypes",[at.d])],st);let et=class extends G.l{constructor(C,l,N){super(),this._messageDialogProvider=C,this._translateService=l,this._maskService=N}_savePrimaryData(C){var l=this;return(0,$.A)(function*(){const N={type:"crt.SavePrimaryDataRequest",$context:C.$context,scopes:C.scopes},z=yield l.handlerChain.process(N);return z.find(nt=>nt.success===!1)||z[0]})()}handle(C){var l=this;return(0,$.A)(function*(){const z=yield C.$context.validate();if(!(Object.keys(z).length>0)){yield l._maskService.showBodyMask();try{const V=yield l._savePrimaryData(C);if(!V.success)throw new Error(V.errorInfo);yield l.handlerChain.process({$context:C.$context,type:"crt.ClosePageRequest"})}catch(V){l._messageDialogProvider.open({data:{message:l._translateService.instant(V?.message),actions:[s.C.OK]}})}finally{l._maskService.hideBodyMask()}}})()}};et=(0,o.__decorate)([(0,w.l)({requestType:"crt.SaveRecordRequest",type:"crt.TelegramUpdateChannelHandler",scopes:["TelegramChannel_EditPage"]}),(0,o.__metadata)("design:paramtypes",[c.L,g.TranslateService,O.s])],et);let lt=class extends G.l{constructor(){super(...arguments),this._whatsappAttrName="WhatsAppLink"}_setWhatsAppLink(C,l){const N=`<a target='_blank' href='https://wa.me/${C}'>${C}</a>`;l[this._whatsappAttrName]=N}handle(C){var l=this;return(0,$.A)(function*(){const N=C.$context,z=N.getViewModelAttributePaths(yield N.getPrimaryModelName(),"Source")[0],V=yield N[z],nt=yield N[l._whatsappAttrName];return V&&!nt&&l._setWhatsAppLink(V,N),yield l.next?.handle(C)})()}};lt=(0,o.__decorate)([(0,w.l)({type:"crt.WhatsAppChannelAttributeChangedHandler",requestType:"crt.HandleViewModelAttributeChangeRequest",scopes:["WhatsAppChannel_EditPage"]})],lt);var pt=e(59237),Ct=e(66459),Mt=e(49281),Et=e(56484),vt=e(50663),ft=e(33429);let ct=class mt{constructor(C){C.addIcons([{name:"translate-icon",icon:e(37719)},{name:"arrow-left",icon:e(18030)},{name:"arrow-right",icon:e(96637)},{name:"menu-arrow",icon:e(67566)},{name:"small-close",icon:e(71222)}])}static{this.\u0275fac=function(l){return new(l||mt)(a.\u0275\u0275inject(vt.K))}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:mt})}static{this.\u0275inj=a.\u0275\u0275defineInjector({providers:[ft.K],imports:[v.CommonModule,g.TranslateModule,b.ReactiveFormsModule,Et.S,Ct.MatFormFieldModule,pt.MatAutocompleteModule,Mt.MatInputModule,W.MatIconModule,n.MatButtonModule,L]})}};ct=(0,o.__decorate)([(0,r.g)({viewElements:[D.r]}),(0,o.__metadata)("design:paramtypes",[vt.K])],ct),function(){(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(ct,{declarations:[D.r],imports:[v.CommonModule,g.TranslateModule,b.ReactiveFormsModule,Et.S,Ct.MatFormFieldModule,pt.MatAutocompleteModule,Mt.MatInputModule,W.MatIconModule,n.MatButtonModule,L],exports:[D.r]})}();var It=e(33856),Pt=e(75169),Ot=e(53136),Dt=e(82134),xt=e(14876),Tt=e(30700);let gt=class ut{static{this.\u0275fac=function(l){return new(l||ut)}}static{this.\u0275mod=a.\u0275\u0275defineNgModule({type:ut})}static{this.\u0275inj=a.\u0275\u0275defineInjector({providers:[It.l,Dt.p,i.I,xt.K,Pt.I,at.d,Tt.Z,X.vn,{provide:u.L,useClass:Ot.J},(0,t.provideHttpClient)((0,t.withInterceptorsFromDi)())],imports:[v.CommonModule,m.B,b.FormsModule,g.TranslateModule,n.MatButtonModule,j.MatDialogModule,ct,k]})}};gt=(0,o.__decorate)([(0,r.g)({requestHandlers:[T.c,Z.X,tt.D,ot.z,it.x,p,Y,st,lt,rt.F,et]})],gt),function(){(typeof ngJitMode>"u"||ngJitMode)&&a.\u0275\u0275setNgModuleScope(gt,{declarations:[J.D,q.z,H.p],imports:[v.CommonModule,m.B,b.FormsModule,g.TranslateModule,n.MatButtonModule,j.MatDialogModule,ct,k],exports:[J.D,q.z,H.p,D.r]})}()},33856:(F,y,e)=>{e.d(y,{l:()=>L});var o=e(6530),v=e(49973),t=e(61320),b=e(58504),n=e(79772),j=e.n(n),r=e(43272),g=e(36486),u=e.n(g),m=e(71640),W=e(22307),I=e.n(W),M=e(65751),a=e(82134);class L extends r.A{constructor(_,h,P){super(_,h,P),this.entitySchemaName="Channel"}_createNewChannel(_){const h=new m.c;return h.id=(0,o.qv)(),h.typeId=_,h}getLookupValues(_){const h=new v.s(_);return h.addSchemaColumn("Id"),h.addSchemaColumn("Name").withOrdering(t.Z.Asc,0),this.queryExecutor.executeSelectQuery(h).pipe((0,g.map)(P=>P.map(K=>({value:K.Id,displayValue:K.Name}))))}getChannelTypeItems(){const _=new v.s("ChannelProvider");return _.addSchemaColumn("Id"),_.addSchemaColumn("Name").withOrdering(t.Z.Asc,0),_.addSchemaColumn("PageUrl"),this.queryExecutor.executeSelectQuery(_).pipe((0,g.map)(h=>h.map(P=>({value:P.Id,displayValue:P.Name,pageUrl:P.PageUrl}))))}getChannelQueueItems(){const _=new v.s("ChatQueue");return _.addSchemaColumn("Id"),_.addSchemaColumn("Name").withOrdering(t.Z.Asc,0),_.addSchemaColumn("[ChatQueueOperator:ChatQueue].Id","Operator"),this.queryExecutor.executeSelectQuery(_).pipe((0,g.map)(h=>{const P=h.filter(S=>!!S.Operator);return P.filter((S,R)=>P.findIndex(B=>B.Id===S.Id)===R).map(S=>({value:S.Id,displayValue:S.Name}))}))}getActiveLanguages(){const _=new v.s("SysLanguage");return _.addSchemaColumn("Id"),_.addSchemaColumn("Name").withOrdering(t.Z.Asc,0),_.filters.addSchemaColumnFilterWithParameter(b.H.Equal,"IsUsed",1),this.queryExecutor.executeSelectQuery(_).pipe((0,g.map)(h=>h.map(P=>({value:P.Id,displayValue:P.Name}))))}generateNewChannelResponse(_){return{success:!0,result:[this._createNewChannel(_)]}}checkCanSaveChannel(_,h,P){const K=new v.s("Channel");K.filters.addSchemaColumnFilterWithParameter(b.H.Equal,"Source",_),K.filters.addSchemaColumnFilterWithParameter(b.H.Equal,"Provider",h),this.queryExecutor.executeSelectQuery(K).subscribe(S=>{P(!(S&&S[0]))})}static{this.\u0275fac=function(h){return new(h||L)(W.\u0275\u0275inject(M.w),W.\u0275\u0275inject(n.TranslateService),W.\u0275\u0275inject(a.p))}}static{this.\u0275prov=W.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac})}}},53136:(F,y,e)=>{e.d(y,{J:()=>a});var o=e(41108),v=e(56267),t=e(58504),b=e(49973),n=e(79772),j=e.n(n),r=e(43272),g=e(36486),u=e.n(g),m=e(22307),W=e.n(m),I=e(65751),M=e(30700);class a extends r.A{constructor(f,_,h){super(f,_,h),this.entitySchemaName="ChatQueueOperator"}mapSysAdminUnit(f){return{id:f.Id,name:f.Name,parentRoleId:f.ParentRole&&f.ParentRole.value,sysAdminUnitTypeValue:f.SysAdminUnitTypeValue}}addSysAdminUnitQueryFilters(f){const _=new o.X;_.logicalOperation=v.H.Or,_.addSchemaColumnFilterWithParameter(t.H.Not_equal,"SysAdminUnitTypeValue",4),_.addSchemaColumnFilterWithParameter(t.H.Equal,"Active",1),f.filters.addSchemaColumnFilterWithParameter(t.H.Equal,"ConnectionType",0),f.filters.add(_)}getSysAdminUnitQuery(){const f=new b.s("SysAdminUnit");return f.addSchemaColumn("Id"),f.addSchemaColumn("Name"),f.addSchemaColumn("ParentRole"),f.addSchemaColumn("SysAdminUnitTypeValue"),f.addSchemaColumn("ConnectionType"),f.addSchemaColumn("Active"),this.addSysAdminUnitQueryFilters(f),f}getItemsByChatQueueId(f){const _=this.createGetAllItemsEsq();return _.filters.addSchemaColumnFilterWithParameter(t.H.Equal,"ChatQueue",f),this.queryExecutor.executeSelectQuery(_).pipe((0,g.map)(h=>({success:!0,errorInfo:null,result:h.map(P=>this.entityConverter.getEntity(P))})),(0,g.catchError)(h=>this.getBaseErrorResponse(h)))}getSysAdminUnitList(){const f=this.getSysAdminUnitQuery();return this.queryExecutor.executeSelectQuery(f).pipe((0,g.map)(_=>({success:!0,errorInfo:null,sysAdminUnits:_.map(h=>this.mapSysAdminUnit(h))})))}static{this.\u0275fac=function(_){return new(_||a)(m.\u0275\u0275inject(I.w),m.\u0275\u0275inject(n.TranslateService),m.\u0275\u0275inject(M.Z))}}static{this.\u0275prov=m.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac})}}},75169:(F,y,e)=>{e.d(y,{I:()=>m});var o=e(73308),v=e(28399),t=e.n(v),b=e(62278),n=e.n(b),j=e(22307),r=e.n(j),g=e(95145),u=e(91820);class m{constructor(I,M,a){this._sysSettingsService=I,this._facebookSettingsService=M,this._window=a,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management,pages_read_engagement",this._fieldsToSubscribe="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}get fbApiLibrary(){return this._window.FB||null}_initApi(I){console.log(`FB.init call for appId:${I}`),this.fbApiLibrary.init({appId:I,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._facebookSettingsService.getApiVersion()})}_getSubscribedApps(I){return new b.Observable(M=>{console.log(`FB.api call for path '/me/subscribed_apps?access_token=${I}'`),this.fbApiLibrary.api(`/me/subscribed_apps?access_token=${I}`,"GET",{},a=>{const L=a?.data?.[0]?.subscribed_fields||[];M.next(L),M.complete()})})}isFacebookSettingValid(){var I=this;return(0,o.A)(function*(){return(yield(0,b.firstValueFrom)(I._sysSettingsService.getValueByCode("IdentityServerUrl")))&&I._window.location.protocol==="https:"})()}initApi(){return this.fbApiLibrary?(0,b.of)(!0):this.loadLibrary().pipe((0,b.concatMap)(()=>this._facebookSettingsService.getApplicationId()),(0,b.concatMap)(I=>{const M=I.replace(/\D+/g,"").trim();return this._initApi(M),(0,b.of)(!0)}))}loadLibrary(){return new b.Observable(I=>{console.log("Loading FB SDK...");const M=document.createElement("script");M.src=this._sdkUrl,M.onload=()=>{console.log("FB SDK loaded"),I.next(),I.complete()},M.onerror=a=>{I.error(a)},document.body.appendChild(M)})}login(){const I={scope:this._permissions,return_scopes:!0,auth_type:"rerequest"};return new b.Observable(M=>{console.log("FB.login call"),this.fbApiLibrary.login(a=>{a.authResponse&&a.status==="connected"&&(M.next(),M.complete())},I)})}getPages(){return new b.Observable(I=>{console.log("FB.api call for path 'me/accounts'"),this.fbApiLibrary.api("me/accounts",M=>{const a=[];M.data.forEach(L=>{a.push({id:L.id,name:L.name,token:L.access_token})}),I.next(a),I.complete()})})}subscribeApps(I,M){return new b.Observable(a=>{console.log(`FB.api call for path '/me/subscribed_apps?subscribed_fields=${M}&access_token=${I}'`),this.fbApiLibrary.api(`/me/subscribed_apps?subscribed_fields=${M}&access_token=${I}`,"POST",{},L=>{a.next(!!L),a.complete()})})}attachPage(I){return this._getSubscribedApps(I).pipe((0,b.concatMap)(M=>{const a=(0,v.union)(M,this._fieldsToSubscribe.split(",")).join(",");return this.subscribeApps(I,a)}))}static{this.\u0275fac=function(M){return new(M||m)(j.\u0275\u0275inject(g.A),j.\u0275\u0275inject(u.d),j.\u0275\u0275inject("Window"))}}static{this.\u0275prov=j.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}}},21896:(F,y,e)=>{e.d(y,{T:()=>n});var o=e(5757),v=e.n(o),t=e(22307),b=e.n(t);class n{constructor(r){this.httpClient=r,this._serviceUrl="/rest/FacebookOmnichannelMessagingService/"}registerFacebookChannel(r,g){const u=new o.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),m=this._serviceUrl+"Register";return this.httpClient.post(m,{token:r,source:g},{headers:u})}removeFacebookChannel(r){const g=new o.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),u=this._serviceUrl+"RemoveChannel";return this.httpClient.post(u,{facebookId:r},{headers:g})}static{this.\u0275fac=function(g){return new(g||n)(t.\u0275\u0275inject(o.HttpClient))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}},44488:(F,y,e)=>{e.d(y,{A:()=>n});var o=e(5757),v=e.n(o),t=e(22307),b=e.n(t);class n{constructor(r){this.httpClient=r,this._serviceUrl="/rest/TelegramOmnichannelMessagingService/"}registerTelegramChannel(r){const g=this._serviceUrl+"RegisterChannel";return this.httpClient.post(g,{token:r})}validateRegisterChannel(r){return[{condition:!r.IsTokenValid,message:"ChatSettings.ChannelPage.Telegram.InvalidTelegramToken"},{condition:r.IsTokenExist,message:"ChatSettings.ChannelPage.Telegram.TelegramTokenAlreadyExists"},{condition:r.IsActiveWebhook,message:"ChatSettings.ChannelPage.Telegram.ActiveWebhookErrorMessageForCreating"}].find(u=>u.condition)?.message||""}getTelegramUserName(r){const g=this._serviceUrl+"GetUserName";return this.httpClient.post(g,{settingsId:r})}removeTelegramChannel(r){const g=new o.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),u=this._serviceUrl+"RemoveChannel";return this.httpClient.post(u,{telegramId:r},{headers:g})}static{this.\u0275fac=function(g){return new(g||n)(t.\u0275\u0275inject(o.HttpClient))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}},24788:(F,y,e)=>{e.d(y,{J:()=>n});var o=e(5757),v=e.n(o),t=e(22307),b=e.n(t);class n{wrapPhoneNumber(r){return`+${r}`}getRequestData(r,g,u){return{token:r,appId:g,channelPhoneNumber:this.wrapPhoneNumber(u)}}constructor(r){this.httpClient=r,this._serviceUrl="/rest/WhatsAppOmnichannelMessagingService/"}tryConnect(r,g,u){const m=this._serviceUrl+"Validate";return this.httpClient.post(m,this.getRequestData(r,g,u))}register(r,g,u){const m=this._serviceUrl+"RegisterChannel";return this.httpClient.post(m,this.getRequestData(r,g,u))}validateRegisterChannel(r){let g="";if(!r?.IsConnectionSuccess&&r?.errorInfo?.errorCode){const u=r.errorInfo.errorCode;["InvalidAppSidException","InvalidAccountPhoneNumberException","AuthenticateException"].indexOf(u)>-1?g=`ChatSettings.ChannelPage.WhatsApp.ErrorMessages.${u}`:g=r.errorInfo.message}return g}removeWhatsAppChannel(r){const g=new o.HttpHeaders().set("Content-Type","application/json; charset=utf-8"),u=this._serviceUrl+"RemoveChannel";return this.httpClient.post(u,{whatsAppId:r},{headers:g})}static{this.\u0275fac=function(g){return new(g||n)(t.\u0275\u0275inject(o.HttpClient))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})}}},82134:(F,y,e)=>{e.d(y,{p:()=>n});var o=e(86464),v=e(55363),t=e(22307),b=e.n(t);class n{_createChannel(r){const g=r.Provider,u=r.ChatQueue,m=r.Language;return{id:r.Id,name:r.Name,typeId:g.value,typeName:g.displayValue,msgSettingsId:r.MsgSettingsId,queueId:u.value,queueName:u.displayValue,source:r.Source,isActive:r.IsActive,languageId:m.value,languageName:m.displayValue}}getEntity(r){return this._createChannel(r)}getEntityColumns(r){return[new v.a("Id",r.id,o.r.Guid),new v.a("Name",r.name,o.r.Text),new v.a("Provider",r.typeId,o.r.Lookup),new v.a("MsgSettingsId",r.msgSettingsId,o.r.Guid),new v.a("ChatQueue",r.queueId,o.r.Lookup),new v.a("Source",r.source,o.r.Text),new v.a("IsActive",r.isActive,o.r.Boolean),new v.a("Language",r.languageId,o.r.Lookup)]}static{this.\u0275fac=function(g){return new(g||n)}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac})}}},30700:(F,y,e)=>{e.d(y,{Z:()=>r});var o=e(86464),v=e(55363),t=e(28399),b=e.n(t),n=e(22307),j=e.n(n);class r{_createChatQueueOperator(u){return{id:u.Id,operator:u.Operator,chatQueue:u.ChatQueue}}getValueFromLookup(u,m){return u.hasOwnProperty(m)&&!(0,t.isEmpty)(u[m])?u[m].value:void 0}getEntity(u){return this._createChatQueueOperator(u)}getEntityColumns(u){return[new v.a("Id",u.id,o.r.Guid),new v.a("Operator",this.getValueFromLookup(u,"operator"),o.r.Lookup),new v.a("ChatQueue",this.getValueFromLookup(u,"chatQueue"),o.r.Lookup)]}static{this.\u0275fac=function(m){return new(m||r)}}static{this.\u0275prov=n.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac})}}},12087:(F,y,e)=>{e.d(y,{b:()=>q});var o=e(5960),v=e.n(o),t=e(22307),b=e.n(t),n=e(34760),j=e(1034),r=e(79772),g=e.n(r),u=e(6503),m=e(33429),W=e(10844),I=e(68712),M=e(54314),a=e(65001),L=e(95211),f=e(62278),_=e.n(f),h=e(67057),P=e.n(h),K=e(10821),S=e.n(K),R=e(37851),B=e.n(R),E=e(75628),d;function U(H,D){if(H&1&&(t.\u0275\u0275elementStart(0,"span",7),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),H&2){const T=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(T.caption)}}function A(H,D){if(H&1){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",3),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(T);const tt=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(tt.onTranslateButtonClick())}),t.\u0275\u0275elementContainerStart(1,4),t.\u0275\u0275element(2,"mat-icon",5),t.\u0275\u0275template(3,U,2,1,"span",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()}if(H&2){const T=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("translated",T.isTranslatedMode),t.\u0275\u0275property("libHintOverlay",T.getHint())("disabled",T.disabled)("ngClass",T.getClasses()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitch",T.iconPosition),t.\u0275\u0275advance(),t.\u0275\u0275property("svgIcon","translate-icon")("ngClass",T.getIconClasses()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",T.captionVisible)}}function k(H,D){if(H&1&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,A,4,9,"button",2),t.\u0275\u0275elementContainerEnd()),H&2){const T=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",T.isTranslationButtonRendered)}}function X(H,D){if(H&1&&(t.\u0275\u0275elementStart(0,"span",7),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),H&2){const T=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(T.caption)}}function J(H,D){if(H&1){const T=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",8),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(T);const tt=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(tt.onTranslateButtonClick())}),t.\u0275\u0275elementContainerStart(1,4),t.\u0275\u0275element(2,"mat-icon",5),t.\u0275\u0275template(3,X,2,1,"span",6),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()}if(H&2){const T=t.\u0275\u0275nextContext();t.\u0275\u0275classProp("translated",T.isTranslatedMode),t.\u0275\u0275property("disabled",T.disabled)("ngClass",T.getClasses()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngSwitch",T.iconPosition),t.\u0275\u0275advance(),t.\u0275\u0275property("svgIcon","translate-icon")("ngClass",T.getIconClasses()),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",T.captionVisible)}}let q=class ht extends I.K{static{d=this}static{this._cache=new Map}get isTranslatedMode(){return this.isTranslated}set isTranslationError(D){if(this._translationError=D,D){if(this.showErrorSnackbar&&this._notifyService){const T=this.translateService.instant("MultilingualMessages.TranslationFailedHeader");this._notifyService.show({message:T})}this.translationError$?.emit()}}get isTranslationError(){return this._translationError}constructor(D){super(D),this.injector=D,this._focusedEditable=null,this._translationError=!1,this.sizeEnum=a.Z,this.iconPositionEnum=L.q,this.autoEnabled=!1,this.isTranslationButtonRendered=!0,this.iconPosition=L.q.OnlyIcon,this.size=a.Z.Medium,this.iconSize=a.Z.Large,this.sourceLanguageCode="autodetect",this.targetLanguageCode="",this.translationKey="",this.sourceText="",this.isTranslated=!1,this.disabled=!1,this.showErrorSnackbar=!0,this.translationReady=new t.EventEmitter,this.translationError$=new t.EventEmitter,this._translationService=this.injector.get(m.K),this.translateService=this.injector.get(r.TranslateService),this._notifyService=this.injector.get(u.F),this._cdr=this.injector.get(t.ChangeDetectorRef)}static _hash(D){if(!D)return"0";let T=0;for(let Z=0;Z<D.length;Z++)T=(T*31+D.charCodeAt(Z))%Number.MAX_SAFE_INTEGER;return T.toString(16)}_captureFocusedEditableElement(){const D=document.activeElement;if(!D){this._focusedEditable=null;return}const T=D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.isContentEditable;this._focusedEditable=T?D:null}_restoreCaretAtEnd(){const D=this._focusedEditable;if(D){if(D instanceof HTMLInputElement||D instanceof HTMLTextAreaElement){const T=D.value.length;D.setSelectionRange(T,T);return}if(D.isContentEditable){const T=window.getSelection();if(!T)return;const Z=document.createRange();Z.selectNodeContents(D),Z.collapse(!1),T.removeAllRanges(),T.addRange(Z)}}}_getTranslatedKey(D=""){const T=D||d._hash(this.sourceText);return`${this.translationKey}|${this.sourceLanguageCode}|${this.targetLanguageCode}|${T}|translated`}_getOriginalKey(){return`${this.translationKey}|original`}_getCachedTranslation(){return d._cache.get(this._getTranslatedKey())}_getOriginalText(){const D=this._getOriginalKey();return d._cache.get(D)}_fetchTranslation(){const D=this._getCachedTranslation();return D?(0,f.of)(D):this.sourceLanguageCode==="autodetect"?this._translationService.translateTextWithSourceLanguageDetecting(this.sourceText,this.targetLanguageCode):this._translationService.translateText(this.sourceText,this.sourceLanguageCode,this.targetLanguageCode)}_restoreOriginalText(){let D=this._getOriginalText();!D&&this.originalText&&(d._cache.set(this._getOriginalKey(),this.originalText),D=this.originalText),this._ensureTranslationCachedForOriginalText(),this.isTranslated=!1,this.translationReady.emit({translationKey:this.translationKey,translation:D}),this.disabled=!1}_ensureTranslationCachedForOriginalText(){if(this.originalText&&!this._getCachedTranslation()){const D=d._hash(this.originalText),T=this._getTranslatedKey(D);d._cache.set(T,this.sourceText)}}_onMouseDown(D){this.disabled||D.preventDefault()}rerenderButton(){this.isTranslationButtonRendered=!1,setTimeout(()=>{this.isTranslationButtonRendered=!0,this._cdr.detectChanges()})}translateText(){const D=this._getTranslatedKey(),T=this._getCachedTranslation();if(T){this.isTranslated=!0,this.isTranslationError=!1,this.translationReady.emit({translationKey:this.translationKey,translation:T}),this.disabled=!1;return}d._cache.set(this._getOriginalKey(),this.sourceText),this._fetchTranslation().subscribe({next:Z=>{if(!Z){this.isTranslated=!1,this.isTranslationError=!0,this.disabled=!1,this._cdr.markForCheck();return}d._cache.set(D,Z),this.isTranslationError=!1,this.isTranslated=!0,this.translationReady.emit({translationKey:this.translationKey,translation:Z}),this.disabled=!1},error:()=>{this.isTranslated=!1,this.isTranslationError=!0,this.disabled=!1}})}getClasses(){const D=[];return this.switchClass(D,this.iconPosition,[[L.q.LeftIcon,"button-icon-position-left"],[L.q.RightIcon,"button-icon-position-right"],[L.q.OnlyIcon,"button-icon-position-only-icon"]]),this.switchClass(D,this.size,[[a.Z.None,"button-size-none"],[a.Z.Small,"button-size-small"],[a.Z.Medium,"button-size-medium"],[a.Z.Large,"button-size-large"],[a.Z.ExtraLarge,"button-size-extra-large"]]),D}get caption(){return this.isTranslationError?this.translateService.instant("TranslateToggle.DefaultCaption.Retry"):this.isTranslated?this.translateService.instant("TranslateToggle.DefaultCaption.Translated"):this.translateService.instant("TranslateToggle.DefaultCaption.Original")}get captionVisible(){return this.iconPosition!==L.q.OnlyIcon}getHint(){return new M.z({hintConfig:{displayValue:this.caption,cssClasses:"translate-toggle-tooltip-hint"},componentType:W.L})}getIconClasses(){const D=[];return this.switchClass(D,this.iconSize,[[a.Z.Small,"button-icon-size-small"],[a.Z.Medium,"button-icon-size-medium"],[a.Z.Large,"button-icon-size-large"],[a.Z.ExtraLarge,"button-icon-size-extra-large"]]),D}onTranslateButtonClick(){if(!this.disabled){if(this._captureFocusedEditableElement(),this.disabled=!0,this.isTranslationError){this.isTranslationError=!1,this.translateText(),this._restoreCaretAtEnd();return}this.isTranslated?(this._restoreOriginalText(),this._restoreCaretAtEnd()):(this.translateText(),this._restoreCaretAtEnd()),this.rerenderButton()}}static{this.\u0275fac=function(T){return new(T||ht)(t.\u0275\u0275directiveInject(t.Injector))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:ht,selectors:[["crt-translate-toggle"]],hostBindings:function(T,Z){T&1&&t.\u0275\u0275listener("mousedown",function(ot){return Z._onMouseDown(ot)})},inputs:{iconPosition:"iconPosition",size:"size",iconSize:"iconSize",sourceLanguageCode:"sourceLanguageCode",targetLanguageCode:"targetLanguageCode",translationKey:"translationKey",sourceText:"sourceText",isTranslated:"isTranslated",disabled:"disabled",originalText:"originalText",showErrorSnackbar:"showErrorSnackbar"},outputs:{translationReady:"translationReady",translationError$:"translationError$"},features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["withoutHint",""],[4,"ngIf","ngIfElse"],["type","button","mat-button","","class","translate-toggle-button","disableRipple","",3,"translated","libHintOverlay","disabled","ngClass","click",4,"ngIf"],["type","button","mat-button","","disableRipple","",1,"translate-toggle-button",3,"click","libHintOverlay","disabled","ngClass"],[3,"ngSwitch"],[1,"icon",3,"svgIcon","ngClass"],["class","caption",4,"ngIf"],[1,"caption"],["type","button","mat-button","","disableRipple","",1,"translate-toggle-button",3,"click","disabled","ngClass"]],template:function(T,Z){if(T&1&&t.\u0275\u0275template(0,k,2,1,"ng-container",1)(1,J,4,8,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),T&2){const tt=t.\u0275\u0275reference(2);t.\u0275\u0275property("ngIf",Z.iconPosition==="only-icon")("ngIfElse",tt)}},dependencies:[h.NgClass,h.NgIf,h.NgSwitch,K.MatButton,R.MatIcon,E.v],styles:["button.translate-toggle-button[_ngcontent-%COMP%]{min-width:unset;max-width:100%;min-height:unset;display:inline-flex;align-items:center;justify-content:center;padding:0;background-color:transparent;text-transform:none!important}button.translate-toggle-button[_ngcontent-%COMP%]:hover{background-color:transparent!important;outline:none;border:none}.caption[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:500;font-size:12px;line-height:16px;vertical-align:middle}.icon[_ngcontent-%COMP%]{width:16px;height:16px;line-height:20px;vertical-align:middle;color:#8094b3}.translated[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#004fd6}.button-icon-size-small[_ngcontent-%COMP%]{width:8px;height:8px}.button-icon-size-medium[_ngcontent-%COMP%]{width:12px;height:12px}.button-icon-size-large[_ngcontent-%COMP%]{width:16px;height:16px}.button-icon-size-extra-large[_ngcontent-%COMP%]{width:24px;height:24px}.button-size-small[_ngcontent-%COMP%]{min-width:12px!important;height:12px!important}.button-size-medium[_ngcontent-%COMP%]{min-width:16px!important;height:16px!important}.button-size-large[_ngcontent-%COMP%], .button-size-extra-large[_ngcontent-%COMP%]{min-width:24px!important;height:24px!important}  .auto-translate-toggle-tooltip-hint,   .translate-toggle-tooltip-hint{margin:0 30px;min-width:60px;max-width:300px;display:inline-block;align-items:center;background:#fff;position:relative;width:max-content;color:#757575;border-radius:50px;border:none;z-index:1;font-size:11px;padding:5px;box-shadow:none;top:10px;text-align:center}"]})}};(0,o.__decorate)([(0,n.j)(),(0,o.__metadata)("design:type",Object)],q.prototype,"translationReady",void 0),(0,o.__decorate)([(0,n.j)(),(0,o.__metadata)("design:type",Object)],q.prototype,"translationError$",void 0),q=d=(0,o.__decorate)([(0,j.v)({type:"crt.TranslateToggle"}),(0,o.__metadata)("design:paramtypes",[t.Injector])],q)},54314:(F,y,e)=>{e.d(y,{z:()=>o});class o{constructor(t){Object.assign(this,t)}}},75628:(F,y,e)=>{e.d(y,{v:()=>W});var o=e(30421),v=e.n(o),t=e(36931),b=e.n(t),n=e(22307),j=e.n(n),r=e(62278),g=e.n(r),u=e(36486),m=e.n(u);class W{constructor(M,a,L,f){this.overlay=M,this.overlayPositionBuilder=a,this.elementRef=L,this.ngZone=f,this.delayTime=500}_createIconHoveredStream(M){return this.ngZone.runOutsideAngular(()=>(0,r.fromEvent)(this.elementRef.nativeElement,"mouseenter").pipe((0,u.auditTime)(this.delayTime),(0,u.takeUntil)(M)))}_createIconMouseOutStream(){return this.ngZone.runOutsideAngular(()=>(0,r.fromEvent)(this.elementRef.nativeElement,"mouseleave"))}_createEventsStream(M,a){this.subscription=a.subscribe(),this.subscription.add(M.subscribe());const L=(0,r.merge)(M,a);L.pipe((0,u.takeUntil)(a));const f=L.subscribe(_=>{if(_.type==="mouseenter"&&this.show(),_.type==="mouseleave"){this.hide(),this.subscription.unsubscribe();const h=this._createIconMouseOutStream(),P=this._createIconHoveredStream(h);this._createEventsStream(P,h)}});this.subscription.add(f)}hide(){this.overlayRef.hasAttached()&&this.overlayRef.detach()}show(){this.hintConfig&&(this.overlayRef.hasAttached()||(this.tooltipRef=this.overlayRef.attach(new t.ComponentPortal(this.hintConfig.componentType))),this.tooltipRef.instance.hintConfig=this.hintConfig.hintConfig)}ngOnInit(){const M=this.overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetX:this.hintConfig.positionX?this.hintConfig.positionX:0,offsetY:this.hintConfig.positionY?this.hintConfig.positionY:0}]);this.overlayRef=this.overlay.create({scrollStrategy:this.overlay.scrollStrategies.close(),positionStrategy:M})}ngAfterViewInit(){const M=this._createIconMouseOutStream(),a=this._createIconHoveredStream(M);this._createEventsStream(a,M)}ngOnDestroy(){this.hide(),this.subscription.unsubscribe()}static{this.\u0275fac=function(a){return new(a||W)(n.\u0275\u0275directiveInject(o.Overlay),n.\u0275\u0275directiveInject(o.OverlayPositionBuilder),n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(n.NgZone))}}static{this.\u0275dir=n.\u0275\u0275defineDirective({type:W,selectors:[["","libHintOverlay",""]],inputs:{hintConfig:[0,"libHintOverlay","hintConfig"]},exportAs:["libHintOverlay"]})}}},71222:F=>{F.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\r
	<path d="M11.6934 5.35551C11.8887 5.16024 11.8887 4.84366 11.6934 4.6484C11.4981 4.45314 11.1816 4.45314 10.9863 4.6484L8.3418 7.29289L5.6973 4.6484C5.50204 4.45314 5.18546 4.45314 4.9902 4.6484C4.79493 4.84366 4.79493 5.16024 4.9902 5.35551L7.63469 8L4.9902 10.6445C4.79493 10.8398 4.79493 11.1563 4.9902 11.3516C5.18546 11.5469 5.50204 11.5469 5.6973 11.3516L8.3418 8.70711L10.9863 11.3516C11.1816 11.5469 11.4981 11.5469 11.6934 11.3516C11.8887 11.1563 11.8887 10.8398 11.6934 10.6445L9.0489 8L11.6934 5.35551Z" fill="currentColor"/>\r
</svg>\r
`},18030:F=>{F.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M14.3965 8.12903L1.78105 8.12903" stroke="currentColor"/>\r
<path d="M7.21062 2.37312L1.45715 8.12659L7.21062 13.8801" stroke="currentColor"/>\r
</svg>\r
`},96637:F=>{F.exports=`<svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M1.45715 8.12659H14.0726" stroke="currentColor"/>\r
<path d="M8.64305 13.8825L14.3965 8.12903L8.64305 2.37556" stroke="currentColor"/>\r
</svg>\r
`},37719:F=>{F.exports=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M13.9008 17.65L12.7758 20.475C12.7424 20.5417 12.6966 20.5959 12.6383 20.6375C12.5799 20.6792 12.5091 20.7 12.4258 20.7C12.2924 20.7 12.1924 20.6459 12.1258 20.5375C12.0591 20.4292 12.0508 20.3167 12.1008 20.2L16.1258 10.2C16.1591 10.1334 16.2008 10.0834 16.2508 10.05C16.3008 10.0167 16.3591 10 16.4258 10H16.6758C16.7424 10 16.8008 10.0167 16.8508 10.05C16.9008 10.0834 16.9424 10.1334 16.9758 10.2L21.0008 20.2C21.0508 20.3167 21.0424 20.4292 20.9758 20.5375C20.9091 20.6459 20.8091 20.7 20.6758 20.7C20.5924 20.7 20.5216 20.6792 20.4633 20.6375C20.4049 20.5959 20.3591 20.5417 20.3258 20.475L19.2008 17.65H13.9008ZM8.87578 12.975L4.27578 17.6C4.20911 17.6834 4.12995 17.725 4.03828 17.725C3.94661 17.725 3.85911 17.6834 3.77578 17.6C3.69245 17.5167 3.65078 17.4334 3.65078 17.35C3.65078 17.2667 3.69245 17.1834 3.77578 17.1L8.37578 12.475C7.80911 11.8917 7.22995 11.1584 6.63828 10.275C6.04661 9.39172 5.63411 8.63338 5.40078 8.00005H6.17578C6.39245 8.53338 6.77161 9.20005 7.31328 10C7.85495 10.8 8.37578 11.4584 8.87578 11.975C9.84245 10.9917 10.6758 9.96255 11.3758 8.88755C12.0758 7.81255 12.5258 6.85005 12.7258 6.00005H3.15078C3.05078 6.00005 2.96745 5.96672 2.90078 5.90005C2.83411 5.83338 2.80078 5.75005 2.80078 5.65005C2.80078 5.55005 2.83411 5.46672 2.90078 5.40005C2.96745 5.33338 3.05078 5.30005 3.15078 5.30005H8.65078V4.65005C8.65078 4.55005 8.68411 4.46672 8.75078 4.40005C8.81745 4.33338 8.90078 4.30005 9.00078 4.30005C9.10078 4.30005 9.18411 4.33338 9.25078 4.40005C9.31745 4.46672 9.35078 4.55005 9.35078 4.65005V5.30005H14.8508C14.9508 5.30005 15.0341 5.33338 15.1008 5.40005C15.1674 5.46672 15.2008 5.55005 15.2008 5.65005C15.2008 5.75005 15.1674 5.83338 15.1008 5.90005C15.0341 5.96672 14.9508 6.00005 14.8508 6.00005H13.4758C13.1924 7.00005 12.6883 8.07922 11.9633 9.23755C11.2383 10.3959 10.3758 11.475 9.37578 12.475L11.9508 15.125L11.6758 15.85L8.87578 12.975ZM14.1508 17H18.9508L16.5508 10.975L14.1508 17Z" stroke="currentColor" fill="currentColor"/>\r
</svg>\r
`}}]);
