(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[5245],{55245:(P,g,e)=>{e.r(g),e.d(g,{ABSTRACT_DIALOG_PROVIDER_ACTIONS:()=>k.C,Attachment:()=>d.o3,Channel:()=>J.c,ChannelEntityConverter:()=>Y.p,ChannelService:()=>F.l,ChannelType:()=>N.C,ChatEntityConverter:()=>X.K,ChatMessage:()=>d.cM,ChatOperator:()=>O.BP,ChatOperatorStatus:()=>O.f7,ChatQueueOperator:()=>$,ChatQueueOperatorEntityConverter:()=>Z.Z,ChatQueueOperatorService:()=>B.J,ChatSettingsPageInitHandler:()=>j.F,ChatStatus:()=>O.BA,CreateQueueAgentHandler:()=>A.D,CreateQueueAgentRequest:()=>A.A,CrtChatHistoryComponent:()=>o.D,CrtChatMessagesComponent:()=>E.z,CrtOmnichatModule:()=>v.B,CrtTranslateLanguagePickerComponent:()=>m.r,FacebookApiProvider:()=>c.I,FacebookChannelCreateRecordHandler:()=>U.x,FacebookChannelErrorDialogComponent:()=>u.p,FacebookProvider:()=>t,FacebookRegistrationService:()=>S.T,FacebookSettingsService:()=>_.d,LoadTranslationLanguagesHandler:()=>Q.R,LoadTranslationLanguagesRequest:()=>R,LookupDataTokenType:()=>d.WS,MessageDirection:()=>d.Tt,MessageLocalizableData:()=>d.eo,MessageLocalizableDataToken:()=>d.Rk,MessageType:()=>d.Go,OmnichannelChat:()=>O.Hh,OmnichannelChatService:()=>h.I,OpenFacebookIntegrationPageRequestHandler:()=>M,RegisterTelegramResponse:()=>G,RegisterWhatsAppResponse:()=>V,TelegramChannelAttributeChangedHandler:()=>K.z,TelegramChannelSaveHandler:()=>H.c,TelegramRegistrationService:()=>D.A,TranslateChatMessagesHandler:()=>z.l,TranslateChatMessagesRequest:()=>L,WhatsAppChannelSaveHandler:()=>b.X,WhatsAppRegistrationService:()=>f.J});var v=e(35463),o=e(45328),E=e(97696),u=e(91308),m=e(58820),h=e(56704),C=e(28399),i=e(62278),r=e(22307),_=e(91820);class t{constructor(a,s){this._settingsService=a,this._window=s,this._permissions="pages_show_list,pages_messaging,pages_manage_metadata,business_management,pages_read_engagement",this._toSubscribeFields="messages,messaging_postbacks,message_echoes,standby,messaging_handovers",this._sdkUrl="https://connect.facebook.net/en_US/sdk.js"}_loadScript(a,s,n=null){const l=document.createElement("script");l.async=!0,l.src=a,l.onload=s,n||(n=document.head),n.appendChild(l)}_innerLogin(a=!1){const s={scope:this._permissions,return_scopes:!0};return a&&(s.auth_type="rerequest"),new i.Observable(n=>{FB.login(l=>{l.authResponse?n.next(!0):n.next(!1)},s)})}_getSubscribed(a,s){FB.api(`/me/subscribed_apps?access_token=${a}`,"GET",{},n=>{s(n?.data?.[0]?.subscribed_fields||[])})}isLoggedIn(){return new i.Observable(a=>{FB.getLoginStatus(s=>{s.status==="connected"?a.next(!0):a.next(!1)})})}login(){return this._innerLogin()}reLogin(){return this._innerLogin(!0)}getPages(){return new i.Observable(a=>{FB.api("me/accounts",s=>{a.next(s)})})}initialize(){return new i.Observable(a=>{this._loadScript(this._sdkUrl,()=>{this._settingsService.getApplicationId().subscribe(s=>{const n=s.replace(/\D+/g,"").trim();FB.init({appId:n,autoLogAppEvents:!0,cookie:!0,xfbml:!0,version:this._settingsService.getApiVersion()}),this.isInitialized=!0,a.next(!0)})})})}attachPage(a){return new i.Observable(s=>{this._getSubscribed(a,n=>{const l=(0,C.union)(n,this._toSubscribeFields.split(",")).join(",");FB.api(`/me/subscribed_apps?subscribed_fields=${l}&access_token=${a}`,"POST",{},q=>{s.next(q)})})})}isFacebookSettingValid(){return this._settingsService.getIdentityServerUrl()&&this._window.location.protocol==="https:"}static{this.\u0275fac=function(s){return new(s||t)(r.\u0275\u0275inject(_.d),r.\u0275\u0275inject("Window"))}}static{this.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac})}}var c=e(75169),D=e(44488),S=e(21896),f=e(24788),B=e(53136),F=e(33856),T=e(5960),W=e(41287),x=e(844);let M=class extends W.l{constructor(a){super(),this._facebookProvider=a}handle(a){return this._facebookProvider.initialize().pipe((0,i.take)(1)).subscribe(),this.next?.handle(a)}};M=(0,T.__decorate)([(0,x.l)({requestType:"crt.OpenFacebookIntegrationPageRequest",type:"crt.OpenFacebookIntegrationPageHandler"}),(0,T.__metadata)("design:paramtypes",[t])],M);var H=e(42498),U=e(90150),b=e(90090),A=e(10414),K=e(69906),j=e(91438),z=e(63726),Q=e(31616),O=e(32072),d=e(48594);class G{}class V{}class ${}var J=e(71640),N=e(98647),X=e(14876),Z=e(30700),Y=e(82134),k=e(31576),y=e(81517),I=e(2828);let R=class extends y.S{};R=(0,T.__decorate)([(0,I.$)({type:"crt.LoadTranslationLanguagesRequest"})],R);let L=class extends y.S{};L=(0,T.__decorate)([(0,I.$)({type:"crt.TranslateChatMessagesRequest"})],L)},31616:(P,g,e)=>{e.d(g,{R:()=>r});var v=e(73308),o=e(5960),E=e.n(o),u=e(41287),m=e(844),h=e(33429),C=e(62278),i=e.n(C);let r=class extends u.l{constructor(t){super(),this._translationService=t}handle(t){var c=this;return(0,v.A)(function*(){try{t.languages=yield(0,C.lastValueFrom)(c._translationService.getAvailableTranslationLanguages())}catch{t.languages=[]}yield c.next?.handle(t)})()}};r=(0,o.__decorate)([(0,m.l)({requestType:"crt.LoadTranslationLanguagesRequest",type:"crt.LoadTranslationLanguagesHandler"}),(0,o.__metadata)("design:paramtypes",[h.K])],r)},63726:(P,g,e)=>{e.d(g,{l:()=>r});var v=e(73308),o=e(5960),E=e.n(o),u=e(41287),m=e(844),h=e(62278),C=e.n(h),i=e(56704);let r=class extends u.l{constructor(t){super(),this._service=t}handle(t){var c=this;return(0,v.A)(function*(){return yield c.next?.handle(t),yield(0,h.lastValueFrom)(c._service.translateChatMessages(t.chatId,t.sourceLanguage,t.targetLanguage))})()}};r=(0,o.__decorate)([(0,m.l)({type:"crt.TranslateChatMessagesHandler",requestType:"crt.TranslateChatMessagesRequest"}),(0,o.__metadata)("design:paramtypes",[i.I])],r)}}]);
