(self.webpackChunkapp_studio_enterprise_schema_view=self.webpackChunkapp_studio_enterprise_schema_view||[]).push([[2614],{52614:(P,ie,l)=>{l.r(ie),l.d(ie,{CrtAccountCompactProfileComponent:()=>x,CrtCompactProfileModule:()=>W,CrtCompactProfilePlaceholderComponent:()=>V,CrtContactCompactProfileComponent:()=>h,CrtUserCompactProfileComponent:()=>v});var n=l(5960),A=l(67057),ne=l(23681),U=l(37851),xe=l(55642),w=l(79772),re=l(5476),le=l(50663),Pe=l(48067),pe=l(59969),se=l(31149),ce=l(90895),me=l(24091),de=l(67003),ve=l(65344),fe=l(96176),X=l(47193),$=l(12841),ue=l(43691),d=l(77592),G=l(52506),K=l(1034),z=l(96677),J=l(52793),Q=l(10098),he=l(16805),e=l(22307),Te=l(66823),D=l(34760),Ie=l(68712);class b extends Ie.K{constructor(){super(...arguments),this.skeletonStyles={height:"80px",width:"100%"},this.imageSelected=new e.EventEmitter,this.imageClear=new e.EventEmitter}onImageSelected(t){this.imageSelected.next(t)}onImageClear(){this.imageClear.next()}getValidationResult(t){return!t?.valid&&(t?.dirty||t?.touched)}isRtl(){return this.documentDirection==="rtl"}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(b)))(a||b)}})()}static{this.\u0275dir=e.\u0275\u0275defineDirective({type:b,inputs:{dialogTitle:"dialogTitle",referenceColumn:"referenceColumn",readonly:"readonly",photo:"photo",photoTitle:"photoTitle"},outputs:{imageSelected:"imageSelected",imageClear:"imageClear"},features:[e.\u0275\u0275InheritDefinitionFeature]})}}(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",String)],b.prototype,"dialogTitle",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",String)],b.prototype,"referenceColumn",void 0),(0,n.__decorate)([(0,d.k)({propertyBindable:!0,defaultValue:!1,propertyName:Te.R.Readonly}),(0,n.__metadata)("design:type",Boolean)],b.prototype,"readonly",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],b.prototype,"photo",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",String)],b.prototype,"photoTitle",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],b.prototype,"imageSelected",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],b.prototype,"imageClear",void 0);var H=l(95588),O=l(12325),ge=l(13343),Y=l(58433),Se=l(6530),we=l(7471);const Ee=["editForm"],Ae=["editProfileButton"],De=[[["","profile",""]],"*"],Ve=["[profile]","*"],Re=(i,t,o)=>({pressed:i,readonly:t,required:o});function Me(i,t){if(i&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275listener("keydown",function(r){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onKeyDown(r))}),e.\u0275\u0275element(1,"div",4),e.\u0275\u0275elementStart(2,"div",5),e.\u0275\u0275element(3,"crt-label",6),e.\u0275\u0275elementStart(4,"button",7),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.editDialogClosed())}),e.\u0275\u0275element(6,"mat-icon",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275projection(7,1),e.\u0275\u0275elementEnd()}if(i&2){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngClass",o.positionClasses),e.\u0275\u0275advance(2),e.\u0275\u0275property("caption",o.caption),e.\u0275\u0275advance(),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(5,3,"BaseCompactProfile.DialogClose"))}}class S{get positionClasses(){return this._positionClasses}constructor(t,o,a){this._dialogService=t,this._changeDetector=o,this._window=a,this._dialogId=`profile-edit-dialog ${(0,Se.qv)()}`,this._minDialogWidthPx=300,this._mobileViewMaxWidth=600,this._dialogWidthPx=this._minDialogWidthPx,this.isRtl=!1,this.readonly=!0,this.isShownRequiredMark=!1}editDialogOpening(){this.isEditButtonPressed=!0}editDialogClosed(){this.isEditButtonPressed=!1,this._dialogService.closeById(this._dialogId)}openDialog(t){if(this.readonly)return;t.preventDefault(),t.stopPropagation(),this.editDialogOpening();const a=this.editProfileButton.nativeElement.getBoundingClientRect(),r=this.getDialogPosition(a);this._dialogService.open(this.editForm,{id:this._dialogId,panelClass:"profile-edit-panel",width:`${this._dialogWidthPx}px`,maxWidth:"100vw",position:r,autoFocus:!0,ariaLabelledBy:"profile-form-header-label"}).subscribe(()=>{this.editDialogClosed(),this._changeDetector.detectChanges()})}getDialogPosition(t){const o={},a=this._window.innerWidth,r=this._window.innerHeight,p=24,s=`${a-t.left+p}px`,u=`${t.right+p}px`;if(a<=this._mobileViewMaxWidth)return o.bottom="-5px",o.left="0px",this._dialogWidthPx=this._mobileViewMaxWidth,o;this._dialogWidthPx=this._minDialogWidthPx;const y={};return!this.isRtl&&t.right+this._dialogWidthPx<a||this.isRtl&&t.left-this._dialogWidthPx<0?(y.right=!0,o.left=u):(y.left=!0,o.right=s),t.top>r-t.bottom?(y.up=!0,o.bottom=`${r-t.top-2*16}px`):(y.down=!0,o.top=`${t.top-16}px`),this._positionClasses=y,o}onKeyDown(t,o=!1){if(!o&&t.keyCode===27){t.stopPropagation(),t.preventDefault(),this.editDialogClosed();return}![32,13].includes(t.keyCode)||this.isEditButtonPressed||this.openDialog(t)}static{this.\u0275fac=function(o){return new(o||S)(e.\u0275\u0275directiveInject(we.o),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(pe.ZP))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["crt-profile-edit-dialog"]],viewQuery:function(o,a){if(o&1&&(e.\u0275\u0275viewQuery(Ee,7),e.\u0275\u0275viewQuery(Ae,5,e.ElementRef)),o&2){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(a.editForm=r.first),e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(a.editProfileButton=r.first)}},inputs:{isRtl:"isRtl",caption:"caption",readonly:"readonly",isShownRequiredMark:"isShownRequiredMark"},ngContentSelectors:Ve,decls:5,vars:5,consts:[["editProfileButton",""],["editForm",""],["tabindex","0","role","button",1,"edit-profile-button",3,"click","keydown","ngClass"],[1,"profile-form",3,"keydown"],[1,"arrow",3,"ngClass"],[1,"profile-form-header"],["id","profile-form-header-label","labelType","headline-2","labelEllipsis","true","labelColor","var(--crt-palette-primary-500)",1,"profile-form-caption",3,"caption"],["mat-button","",1,"modal-close",3,"click","title"],["svgIcon","dialog-close"]],template:function(o,a){if(o&1){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275projectionDef(De),e.\u0275\u0275elementStart(0,"div",2,0),e.\u0275\u0275listener("click",function(s){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(a.openDialog(s))})("keydown",function(s){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(a.onKeyDown(s,!0))}),e.\u0275\u0275projection(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Me,8,5,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)}o&2&&e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(1,Re,a.isEditButtonPressed,a.readonly,a.isShownRequiredMark))},dependencies:[A.NgClass,U.MatIcon,O.V,w.TranslatePipe],styles:[`body{--focus-outline-outer-color: var(--crt-palette-secondary-500);--focus-outline-inner-color: white}crt-profile-edit-dialog{display:block;overflow:hidden}.edit-profile-button{padding:2px;position:relative}.edit-profile-button:not(.readonly):hover{pointer-events:auto;cursor:pointer}.edit-profile-button:not(.readonly):hover *{pointer-events:none!important}.edit-profile-button:focus-visible{box-shadow:inset 0 0 0 1px var(--focus-outline-outer-color),inset 0 0 0 2px var(--focus-outline-inner-color);outline:none;border-radius:4px}.profile-form{display:flex;flex-direction:column;position:relative}.profile-form .profile-form-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%;padding-bottom:8px}.profile-form .profile-form-header .modal-close{align-self:center;border:none;background:none;padding:0;height:16px}.profile-form .profile-form-header .modal-close mat-icon{width:16px;height:16px}.profile-edit-panel .mat-mdc-dialog-surface{padding:16px;border-radius:8px;overflow:visible}.profile-edit-panel .mat-mdc-dialog-surface .arrow{width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;position:absolute}.profile-edit-panel .mat-mdc-dialog-surface .arrow.right{border-right:8px solid white;left:-24px}.profile-edit-panel .mat-mdc-dialog-surface .arrow.left{right:-24px;border-left:8px solid white}.profile-edit-panel .mat-mdc-dialog-surface .arrow.down{top:0}.profile-edit-panel .mat-mdc-dialog-surface .arrow.up{bottom:0}
`],encapsulation:2,changeDetection:0})}}const Fe=["*"];function ke(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",5),i&2){const o=e.\u0275\u0275nextContext();e.\u0275\u0275property("styles",o.skeletonStyles)}}function je(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-local-time",20),i&2){const o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("control",o.timeZone)}}function Oe(i,t){i&1&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275text(1," \u2022 "),e.\u0275\u0275elementEnd())}function Be(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",15),e.\u0275\u0275template(1,je,1,1,"crt-local-time",18)(2,Oe,2,0,"span",19),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city&&!!o.country),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.country==null?null:o.country.displayValue," ")}}function He(i,t){if(i&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"crt-label",13),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",14)(4,"crt-label",15),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",16),e.\u0275\u0275template(7,Be,4,3,"crt-label",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),i&2){e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(8),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.accountName),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",a.alternativeName," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.isRtl())("ngIfElse",o)}}function Le(i,t){i&1&&(e.\u0275\u0275elementStart(0,"span",21),e.\u0275\u0275text(1," \u2022 "),e.\u0275\u0275elementEnd())}function We(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-local-time",20),i&2){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("control",o.timeZone)}}function Ze(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",15),e.\u0275\u0275text(1),e.\u0275\u0275template(2,Le,2,0,"span",19)(3,We,1,1,"crt-local-time",18),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.country==null?null:o.country.displayValue," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city&&!!o.country),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city)}}function Ue(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AccountCompactProfile.EmptyRecord.NamePlaceholder")," "))}function Xe(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AccountCompactProfile.EmptyRecord.AlternativeNamePlaceholder")," "))}function $e(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",26),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AccountCompactProfile.EmptyRecord.CountryPlaceholder")," "))}function Ge(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"AccountCompactProfile.NamePlaceholder")," "))}function Ke(i,t){if(i&1&&e.\u0275\u0275template(0,Ue,3,3,"crt-label",22)(1,Xe,3,3,"crt-label",23)(2,$e,3,3,"crt-label",24)(3,Ge,3,3,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),i&2){const o=e.\u0275\u0275reference(4),a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",a.readonly),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.readonly),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.readonly)("ngIfElse",o)}}function ze(i,t){if(i&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6)(1,"div",7)(2,"crt-image-input",8),e.\u0275\u0275listener("imageSelected",function(r){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onImageSelected(r))})("imageClear",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onImageClear())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(3,"div",9),e.\u0275\u0275elementStart(4,"crt-profile-edit-dialog",10)(5,"div",11),e.\u0275\u0275template(6,He,8,4,"ng-container",12)(7,Ze,4,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(9,Ke,5,4,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(11),e.\u0275\u0275elementEnd()()}if(i&2){const o=e.\u0275\u0275reference(10),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",a.readonly)("value",a.photo)("alt",a.photoTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("isRtl",a.isRtl())("readonly",a.readonly)("caption",a.dialogTitle)("isShownRequiredMark",a.isShownRequiredMark),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!a.accountName||!!a.alternativeName)("ngIfElse",o)}}let x=class Z extends b{get isShownRequiredMark(){return this.getValidationResult(this.accountNameValidationInfo)}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(Z)))(a||Z)}})()}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:Z,selectors:[["crt-account-compact-profile"]],inputs:{accountName:"accountName",accountNameValidationInfo:"accountNameValidationInfo",alternativeName:"alternativeName",country:"country",city:"city",timeZone:"timeZone"},features:[e.\u0275\u0275ProvidersFeature([he.I]),e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Fe,decls:3,vars:2,consts:[["profile_template",""],["countryRtl",""],["placeholder",""],["editable_placeholder",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"profile-header"],[1,"profile-photo"],["placeholder","account-compact-profile-icon-placeholder","borderRadius","medium","customBorderWidth","1px","positioning","cover","size","large",3,"imageSelected","imageClear","readonly","value","alt"],[1,"empty-divider"],[3,"isRtl","readonly","caption","isShownRequiredMark"],["profile","",1,"profile-info"],[4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-name","block-ellipsis"],[1,"profile-block","one-line"],["labelType","caption"],[1,"profile-block","two-lines"],["labelType","caption",4,"ngIf","ngIfElse"],["labelType","caption","labelEllipsis","true",3,"control",4,"ngIf"],["class","divider-dot",4,"ngIf"],["labelType","caption","labelEllipsis","true",3,"control"],[1,"divider-dot"],["class","profile-name block-ellipsis two-lines","labelType","headline-3",4,"ngIf"],["class","profile-block one-line","labelType","caption",4,"ngIf"],["class","profile-block one-line","labelType","caption",4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-name","block-ellipsis","two-lines"],["labelType","caption",1,"profile-block","one-line"],["labelType","headline-3",1,"profile-name","profile-empty","block-ellipsis"]],template:function(o,a){if(o&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,ke,1,1,"crt-skeleton-loader",4)(1,ze,12,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),o&2){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",a.loaderVisible)("ngIfElse",r)}},dependencies:[A.NgIf,H.g,O.V,ge.j,Y.W,S,w.TranslatePipe],styles:[`.profile-header{display:flex;flex-direction:row;overflow:hidden;border-radius:4px}.profile-header .profile-photo{min-width:80px}.profile-header .profile-photo .crt-image-input .image-placeholder{height:30px}.profile-header .profile-info{width:100%;height:100%;overflow:hidden}.profile-header crt-local-time{display:inline-block;vertical-align:bottom;text-overflow:ellipsis;overflow:hidden}.profile-header .block-ellipsis,.profile-header .profile-block{display:block;display:-webkit-box;max-width:100%;max-height:62px;margin:0 auto;line-height:1;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.profile-header .profile-block{margin-top:4px}.profile-header .one-line{max-height:19px;-webkit-line-clamp:1}.profile-header .two-lines{max-height:38px;-webkit-line-clamp:2}@media screen and (max-width: 600px){.profile-header{flex-direction:column;align-content:center;align-items:center;text-align:-webkit-center;gap:8px}}
`],encapsulation:2,changeDetection:0})}};(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",String)],x.prototype,"accountName",void 0),(0,n.__decorate)([(0,d.k)(),(0,G.h)(),(0,n.__metadata)("design:type",Object)],x.prototype,"accountNameValidationInfo",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",String)],x.prototype,"alternativeName",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],x.prototype,"country",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],x.prototype,"city",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],x.prototype,"timeZone",void 0),x=(0,n.__decorate)([(0,K.v)({type:"crt.AccountCompactProfile",contentSlots:["dialogItems"],reuseStrategy:z.B.Reuse}),(0,J.f)({toolbarConfig:{position:210,icon:l(69200),defaultPropertyValues:{readonly:!1},defaultLocalizableStrings:{},requiredPackages:["CrtCustomer360App"]},designViewItemCommands:{create:"crt.AddAccountCompactProfileCommand"},propertiesPanelComponentTypeName:"crt.AccountCompactProfilePropertiesPanel",typeCaption:"AccountCompactProfile.Caption",viewElementGroupType:Q.J.Components})],x);class V{static{this.\u0275fac=function(o){return new(o||V)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["crt-compact-profile-placeholder"]],inputs:{name:"name",subheading:"subheading",text:"text",icon:"icon"},decls:12,vars:6,consts:[[1,"profile-header"],[1,"profile-photo"],["placeholderMode","icon","borderRadius","medium","customBorderWidth","1px","positioning","cover","size","large",3,"readonly","placeholder"],[1,"empty-divider"],[3,"readonly"],["profile","",1,"profile-info"],["labelType","headline-3",1,"profile-name","block-ellipsis","two-lines"],["labelType","caption",1,"profile-block","one-line"]],template:function(o,a){o&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"crt-image-input",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"div",3),e.\u0275\u0275elementStart(4,"crt-profile-edit-dialog",4)(5,"div",5)(6,"crt-label",6),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"crt-label",7),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"crt-label",7),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()()),o&2&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0)("placeholder",a.icon),e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",a.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.subheading," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.text," "))},dependencies:[H.g,O.V,S],encapsulation:2,changeDetection:0})}}var c=l(86464),Je=l(30046),Qe=l.n(Je),N=l(62278),m=l(29957),Ye=l(5757);const qe="GetFullNameTemplate",et="rest/ContactInfoService/",q="F M L";var Ce=l(23092);class I{constructor(t,o){this._http=t,this._userInfo=o}_getEndpoint(t){return(this._userInfo.isSSP?"ssp/":"")+`${et}${t}`}_getFullNameTemplate(){return this._http.get(this._getEndpoint(qe)).pipe((0,N.map)(t=>t.GetFullNameTemplateResult??q))}getFullNameTemplateValue(){return this._fullNameTemplate?(0,N.of)(this._fullNameTemplate):this._getFullNameTemplate().pipe((0,N.tap)(t=>{this._fullNameTemplate=t}))}getFullName(t,o,a,r){const p=(t??q).split(" "),s={F:o,M:a,L:r};return p.map(u=>s[u]).filter(u=>!!u?.trim()).join(" ")}getNameParts(t,o){const a=(t??q).split(" "),r=o?.trim().split(" ").map(j=>j.trim()).filter(j=>j)||[],p=a.indexOf("F"),s=a.indexOf("L"),u=a.indexOf("M");let _,y;p===0&&(_=r.shift()),s===0&&(y=r.shift()),p===2&&(_=r.pop()),s===2&&(y=r.pop()),u===2&&!_&&(_=r.shift()),u===2&&!y&&(y=r.shift());const T=r.join(" ");return{firstName:_||"",middleName:T,lastName:y||""}}static{this.\u0275fac=function(o){return new(o||I)(e.\u0275\u0275inject(Ye.HttpClient),e.\u0275\u0275inject(Ce.oq))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}var tt=l(38884);const ot=["*"],ye=i=>({dataType:i});function at(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",6),i&2){const o=e.\u0275\u0275nextContext();e.\u0275\u0275property("styles",o.skeletonStyles)}}function it(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"dateTimeFormat"),e.\u0275\u0275elementStart(3,"span",20),e.\u0275\u0275text(4,"\u2022\xA0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,2,o.birthDate,e.\u0275\u0275pureFunction1(5,ye,o.dateValueType))," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",o.getAge()," ")}}function nt(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"div",18),e.\u0275\u0275template(1,it,6,7,"crt-label",17),e.\u0275\u0275elementEnd()),i&2){e.\u0275\u0275nextContext(2);const o=e.\u0275\u0275reference(8),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!a.isRtl())("ngIfElse",o)}}function rt(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-local-time",23),i&2){const o=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("control",o.timeZone)}}function lt(i,t){i&1&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1," \u2022 "),e.\u0275\u0275elementEnd())}function pt(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",19),e.\u0275\u0275template(1,rt,1,1,"crt-local-time",21)(2,lt,2,0,"span",22),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city&&o.hasCountry),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.country==null?null:o.country.displayValue," ")}}function st(i,t){if(i&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"crt-label",14),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,nt,2,2,"div",15),e.\u0275\u0275elementStart(4,"div",16),e.\u0275\u0275template(5,pt,4,3,"crt-label",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),i&2){e.\u0275\u0275nextContext();const o=e.\u0275\u0275reference(10),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.fullName," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.hasBirthDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!a.isRtl())("ngIfElse",o)}}function ct(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",19),e.\u0275\u0275text(1),e.\u0275\u0275elementStart(2,"span",20),e.\u0275\u0275text(3,"\u2022\xA0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"dateTimeFormat"),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.getAge(),""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(5,2,o.birthDate,e.\u0275\u0275pureFunction1(5,ye,o.dateValueType))," ")}}function mt(i,t){i&1&&(e.\u0275\u0275elementStart(0,"span",20),e.\u0275\u0275text(1," \u2022 "),e.\u0275\u0275elementEnd())}function dt(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-local-time",23),i&2){const o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("control",o.timeZone)}}function ft(i,t){if(i&1&&(e.\u0275\u0275elementStart(0,"crt-label",19),e.\u0275\u0275text(1),e.\u0275\u0275template(2,mt,2,0,"span",22)(3,dt,1,1,"crt-local-time",21),e.\u0275\u0275elementEnd()),i&2){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.country==null?null:o.country.displayValue," "),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city&&o.hasCountry),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!!o.city)}}function ut(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"ContactCompactProfile.EmptyRecord.NamePlaceholder")," "))}function ht(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"ContactCompactProfile.EmptyRecord.BirthDatePlaceholder")," "))}function gt(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",28),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"ContactCompactProfile.EmptyRecord.CountryPlaceholder")," "))}function Ct(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",29),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"crt-label",30),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"ContactCompactProfile.NamePlaceholder")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(5,4,"ContactCompactProfile.BirthDatePlaceholder")," "))}function yt(i,t){if(i&1&&e.\u0275\u0275template(0,ut,3,3,"crt-label",24)(1,ht,3,3,"crt-label",25)(2,gt,3,3,"crt-label",26)(3,Ct,6,6,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),i&2){const o=e.\u0275\u0275reference(4),a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",a.readonly),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.readonly),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",a.readonly)("ngIfElse",o)}}function _t(i,t){if(i&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"div",8)(2,"crt-image-input",9),e.\u0275\u0275listener("imageSelected",function(r){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onImageSelected(r))})("imageClear",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onImageClear())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(3,"div",10),e.\u0275\u0275elementStart(4,"crt-profile-edit-dialog",11)(5,"div",12),e.\u0275\u0275template(6,st,6,4,"ng-container",13)(7,ct,6,7,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)(9,ft,4,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor)(11,yt,5,4,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(13),e.\u0275\u0275elementEnd()()}if(i&2){const o=e.\u0275\u0275reference(12),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("readonly",a.readonly)("value",a.photo)("alt",a.photoTitle),e.\u0275\u0275advance(2),e.\u0275\u0275property("isRtl",a.isRtl())("readonly",a.readonly)("caption",a.dialogTitle)("isShownRequiredMark",a.isShownRequiredMark),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.hasName||a.hasBirthDate||a.hasCountry)("ngIfElse",o)}}let h=class te extends b{constructor(t,o){super(t),this._injector=t,this._contactInfoService=o,this._subscription=new N.Subscription,this.fullNameChangeSubject=new N.Subject,this._destroy$=new N.Subject,this.dateValueType=c.r.Date,this.fullNameChange=new e.EventEmitter,this.firstNameChange=new e.EventEmitter,this.lastNameChange=new e.EventEmitter,this.middleNameChange=new e.EventEmitter,this._subscribeEvents()}set displayName(t){this._displayName=t,t!==null&&this._updateName()}get displayName(){return this._displayName}set firstName(t){this._firstName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.middleName)&&m.String.isNullOrWhiteSpace(this.lastName)):this._hasName=!0,t!==null&&this._updateFullName()}get firstName(){return this._firstName}set middleName(t){this._middleName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.firstName)&&m.String.isNullOrWhiteSpace(this.lastName)):this._hasName=!0,t!==null&&this._updateFullName()}get middleName(){return this._middleName}set lastName(t){this._lastName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.firstName)&&m.String.isNullOrWhiteSpace(this.middleName)):this._hasName=!0,t!==null&&this._updateFullName()}get lastName(){return this._lastName}get hasName(){return this._upadteReadonlyFullName(),this._hasName}get hasBirthDate(){return!!this.birthDate}get hasCountry(){return!!this.country}get fullName(){return this._fullName}get isShownRequiredMark(){return this.getValidationResult(this.firstNameValidationInfo)}_subscribeEvents(){this.fullNameChangeSubject.pipe((0,N.debounceTime)(100),(0,N.takeUntil)(this._destroy$)).subscribe(t=>this.fullNameChange.emit(t))}_upadteReadonlyFullName(){this.readonly&&!this._hasName&&(this._fullName=this.displayName,this._hasName=!!this.displayName)}_updateFullName(){if(!this._fullNameTemplate)return;const t=this._contactInfoService.getFullName(this._fullNameTemplate,this.firstName,this.middleName,this.lastName);t&&(this._fullName=t,this.fullNameChangeSubject.next(this._fullName)),this.changeDetectorRef.markForCheck()}getAge(){if(!this.hasBirthDate)return"";const t=Qe()().diff(this.birthDate,"years",!1);return t<0?"?":t.toString()}_updateNameParts(){if(!this.displayName)return;const{firstName:t,lastName:o,middleName:a}=this._contactInfoService.getNameParts(this._fullNameTemplate,this.displayName);this._firstName=t,this._lastName=o,this._middleName=a,this._emitNameChanges()}_emitNameChanges(){this.readonly||(this._firstName&&this.firstNameChange.next(this._firstName),this._middleName&&this.middleNameChange.next(this._middleName),this._lastName&&this.lastNameChange.next(this._lastName),this.changeDetectorRef.markForCheck())}ngOnInit(){this._subscription?.add(this._contactInfoService.getFullNameTemplateValue().subscribe(t=>{this._fullNameTemplate=t,this._updateName()}))}_updateName(){this.hasName?this._updateFullName():this._updateNameParts()}ngOnChanges(t){if(["firstName","lastName","middleName","displayName"].every(r=>r in t)&&this._fullNameTemplate){this._updateName();return}if(t.displayName&&t.displayName.currentValue===null&&!t.displayName.firstChange)return;let a=!1;t.firstName&&t.firstName.currentValue===null&&!t.firstName.firstChange&&(this._firstName=t.firstName.previousValue,delete t.firstName,delete t.firstNameValidationInfo,a=!0),t.middleName&&t.middleName.currentValue===null&&!t.middleName.firstChange&&(this._middleName=t.middleName.previousValue,delete t.middleName,a=!0),t.lastName&&t.lastName.currentValue===null&&!t.lastName.firstChange&&(this._lastName=t.lastName.previousValue,delete t.lastName,a=!0),a&&this._emitNameChanges()}ngOnDestroy(){this._subscription?.unsubscribe(),this._destroy$.next(),this._destroy$.complete()}static{this.\u0275fac=function(o){return new(o||te)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:te,selectors:[["crt-contact-compact-profile"]],inputs:{firstNameValidationInfo:"firstNameValidationInfo",birthDate:"birthDate",country:"country",city:"city",timeZone:"timeZone",displayName:"displayName",firstName:"firstName",middleName:"middleName",lastName:"lastName"},outputs:{fullNameChange:"fullNameChange",firstNameChange:"firstNameChange",lastNameChange:"lastNameChange",middleNameChange:"middleNameChange"},features:[e.\u0275\u0275ProvidersFeature([he.I]),e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:ot,decls:3,vars:2,consts:[["profile_template",""],["birthDateRtl",""],["countryRtl",""],["placeholder",""],["editable_placeholder",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"profile-header"],[1,"profile-photo"],["placeholder","contact-compact-profile-icon-placeholder","borderRadius","medium","customBorderWidth","1px","positioning","cover","size","large",3,"imageSelected","imageClear","readonly","value","alt"],[1,"empty-divider"],[3,"isRtl","readonly","caption","isShownRequiredMark"],["profile","",1,"profile-info"],[4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-name","block-ellipsis"],["class","profile-block one-line",4,"ngIf"],[1,"profile-block","two-lines"],["labelType","caption",4,"ngIf","ngIfElse"],[1,"profile-block","one-line"],["labelType","caption"],[1,"divider-dot"],["labelType","caption","labelEllipsis","true",3,"control",4,"ngIf"],["class","divider-dot",4,"ngIf"],["labelType","caption","labelEllipsis","true",3,"control"],["class","profile-name block-ellipsis two-lines","labelType","headline-3",4,"ngIf"],["class","profile-block one-line","labelType","caption",4,"ngIf"],["class","profile-block one-line","labelType","caption",4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-name","block-ellipsis","two-lines"],["labelType","caption",1,"profile-block","one-line"],["labelType","headline-3",1,"profile-name","profile-empty","block-ellipsis"],["labelType","caption",1,"profile-block","profile-empty","one-line"]],template:function(o,a){if(o&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,at,1,1,"crt-skeleton-loader",5)(1,_t,14,9,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),o&2){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",a.loaderVisible)("ngIfElse",r)}},dependencies:[A.NgIf,H.g,O.V,ge.j,Y.W,S,tt.V,w.TranslatePipe],styles:[`.profile-header{display:flex;flex-direction:row;overflow:hidden;border-radius:4px}.profile-header .profile-photo{min-width:80px}.profile-header .profile-photo .crt-image-input .image-placeholder{height:30px}.profile-header .profile-info{width:100%;height:100%;overflow:hidden}.profile-header crt-local-time{display:inline-block;vertical-align:bottom;text-overflow:ellipsis;overflow:hidden}.profile-header .block-ellipsis,.profile-header .profile-block{display:block;display:-webkit-box;max-width:100%;max-height:62px;margin:0 auto;line-height:1;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.profile-header .profile-block{margin-top:4px}.profile-header .one-line{max-height:19px;-webkit-line-clamp:1}.profile-header .two-lines{max-height:38px;-webkit-line-clamp:2}@media screen and (max-width: 600px){.profile-header{flex-direction:column;align-content:center;align-items:center;text-align:-webkit-center;gap:8px}}
`],encapsulation:2,changeDetection:0})}};(0,n.__decorate)([(0,d.k)(),(0,G.h)(),(0,n.__metadata)("design:type",Object)],h.prototype,"firstNameValidationInfo",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],h.prototype,"birthDate",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],h.prototype,"country",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],h.prototype,"city",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",Object)],h.prototype,"timeZone",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],h.prototype,"fullNameChange",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],h.prototype,"firstNameChange",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],h.prototype,"lastNameChange",void 0),(0,n.__decorate)([(0,D.j)(),(0,n.__metadata)("design:type",Object)],h.prototype,"middleNameChange",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],h.prototype,"displayName",null),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],h.prototype,"firstName",null),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],h.prototype,"middleName",null),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],h.prototype,"lastName",null),h=(0,n.__decorate)([(0,K.v)({type:"crt.ContactCompactProfile",contentSlots:["dialogItems"],reuseStrategy:z.B.Reuse}),(0,J.f)({toolbarConfig:{position:220,icon:l(40941),defaultPropertyValues:{readonly:!1},defaultLocalizableStrings:{},requiredPackages:["CrtCustomer360App"]},designViewItemCommands:{create:"crt.AddContactCompactProfileCommand"},propertiesPanelComponentTypeName:"crt.ContactCompactProfilePropertiesPanel",typeCaption:"ContactCompactProfile.Caption",viewElementGroupType:Q.J.Components}),(0,n.__metadata)("design:paramtypes",[e.Injector,I])],h);const bt=["*"];function Nt(i,t){if(i&1&&e.\u0275\u0275element(0,"crt-skeleton-loader",4),i&2){const o=e.\u0275\u0275nextContext();e.\u0275\u0275property("styles",o.skeletonStyles)}}function xt(i,t){if(i&1&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"crt-label",12),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),i&2){const o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",o.fullName," ")}}function Pt(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"UserCompactProfile.EmptyDisplayValue")," "))}function vt(i,t){i&1&&(e.\u0275\u0275elementStart(0,"crt-label",15),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),i&2&&(e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"UserCompactProfile.NamePlaceholder")," "))}function Tt(i,t){if(i&1&&e.\u0275\u0275template(0,Pt,3,3,"crt-label",13)(1,vt,3,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),i&2){const o=e.\u0275\u0275reference(2),a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngIf",a.readonly)("ngIfElse",o)}}function It(i,t){if(i&1){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5)(1,"div",6)(2,"crt-image-input",7),e.\u0275\u0275listener("imageSelected",function(r){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(p.onImageSelected(r))})("imageClear",function(){e.\u0275\u0275restoreView(o);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onImageClear())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(3,"div",8),e.\u0275\u0275elementStart(4,"crt-profile-edit-dialog",9)(5,"div",10),e.\u0275\u0275template(6,xt,3,1,"ng-container",11)(7,Tt,3,2,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(9),e.\u0275\u0275elementEnd()()}if(i&2){const o=e.\u0275\u0275reference(8),a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",a.fullName),e.\u0275\u0275property("readonly",a.readonly)("value",a.photo)("alt",a.photoTitle)("colorId",a.getRefId()),e.\u0275\u0275advance(2),e.\u0275\u0275property("isRtl",a.isRtl())("readonly",a.readonly)("caption",a.dialogTitle)("isShownRequiredMark",a.isShownRequiredMark),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.hasName)("ngIfElse",o)}}let v=class oe extends b{constructor(t,o){super(t),this._injector=t,this._contactInfoService=o,this._subscription=new N.Subscription,this._userInfo=t?.get(Ce.oq)}set firstName(t){this._firstName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.middleName)&&m.String.isNullOrWhiteSpace(this.lastName)):this._hasName=!0,this._updateFullName()}get firstName(){return this._firstName}set middleName(t){this._middleName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.firstName)&&m.String.isNullOrWhiteSpace(this.lastName)):this._hasName=!0,this._updateFullName()}get middleName(){return this._middleName}set lastName(t){this._lastName=t,m.String.isNullOrWhiteSpace(t)?this._hasName=!(m.String.isNullOrWhiteSpace(this.firstName)&&m.String.isNullOrWhiteSpace(this.middleName)):this._hasName=!0,this._updateFullName()}get lastName(){return this._lastName}get hasName(){return this._hasName}get fullName(){return this._fullName}get isShownRequiredMark(){return this.getValidationResult(this.firstNameValidationInfo)}_updateFullName(){this._fullName=this._contactInfoService.getFullName(this._fullNameTemplate,this.firstName,this.middleName,this.lastName),this.changeDetectorRef.markForCheck()}getRefId(){return this._userInfo.contactId}ngOnInit(){this._subscription?.add(this._contactInfoService.getFullNameTemplateValue().subscribe(t=>{this._fullNameTemplate=t,this._updateFullName()}))}ngOnDestroy(){this._subscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||oe)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(I))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:oe,selectors:[["crt-user-compact-profile"]],inputs:{firstNameValidationInfo:"firstNameValidationInfo",firstName:"firstName",middleName:"middleName",lastName:"lastName"},features:[e.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:bt,decls:3,vars:2,consts:[["profile_template",""],["placeholder",""],["editable_placeholder",""],[3,"styles",4,"ngIf","ngIfElse"],[3,"styles"],[1,"profile-header"],[1,"profile-photo"],["borderRadius","medium","customBorderWidth","1px","positioning","cover","size","large","placeholderMode","abbreviation",3,"imageSelected","imageClear","readonly","value","alt","colorId","placeholder"],[1,"empty-divider"],[3,"isRtl","readonly","caption","isShownRequiredMark"],["profile","",1,"profile-info"],[4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-name","block-ellipsis"],["class","profile-empty block-ellipsis","labelType","headline-3",4,"ngIf","ngIfElse"],["labelType","headline-3",1,"profile-empty","block-ellipsis"],["labelType","headline-3","labelThickness","semibold",1,"profile-name","profile-empty","block-ellipsis"]],template:function(o,a){if(o&1&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275template(0,Nt,1,1,"crt-skeleton-loader",3)(1,It,10,11,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)),o&2){const r=e.\u0275\u0275reference(2);e.\u0275\u0275property("ngIf",a.loading)("ngIfElse",r)}},dependencies:[A.NgIf,H.g,O.V,Y.W,S,w.TranslatePipe],styles:[`.profile-header{display:flex;flex-direction:row;overflow:hidden;border-radius:4px}.profile-header .profile-photo{min-width:80px}.profile-header .profile-photo .crt-image-input .image-placeholder{height:30px}.profile-header .profile-info{width:100%;height:100%;overflow:hidden}.profile-header crt-local-time{display:inline-block;vertical-align:bottom;text-overflow:ellipsis;overflow:hidden}.profile-header .block-ellipsis,.profile-header .profile-block{display:block;display:-webkit-box;max-width:100%;max-height:62px;margin:0 auto;line-height:1;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.profile-header .profile-block{margin-top:4px}.profile-header .one-line{max-height:19px;-webkit-line-clamp:1}.profile-header .two-lines{max-height:38px;-webkit-line-clamp:2}@media screen and (max-width: 600px){.profile-header{flex-direction:column;align-content:center;align-items:center;text-align:-webkit-center;gap:8px}}
`],encapsulation:2,changeDetection:0})}};(0,n.__decorate)([(0,d.k)(),(0,G.h)(),(0,n.__metadata)("design:type",Object)],v.prototype,"firstNameValidationInfo",void 0),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],v.prototype,"firstName",null),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],v.prototype,"middleName",null),(0,n.__decorate)([(0,d.k)(),(0,n.__metadata)("design:type",m.String),(0,n.__metadata)("design:paramtypes",[Object])],v.prototype,"lastName",null),v=(0,n.__decorate)([(0,K.v)({type:"crt.UserCompactProfile",contentSlots:["dialogItems"],reuseStrategy:z.B.Reuse}),(0,J.f)({toolbarConfig:{position:230,requiredFeatures:{ShowDesignerDemoItems:!0},icon:l(40941),defaultPropertyValues:{readonly:!1},defaultLocalizableStrings:{}},propertiesPanelComponentTypeName:"crt.UserCompactProfilePropertiesPanel",typeCaption:"UserCompactProfile.Caption",viewElementGroupType:Q.J.Components,placeholderSize:{height:"80px"}}),(0,n.__metadata)("design:paramtypes",[e.Injector,I])],v);var L=l(73308),St=l(74368),wt=l(27524),f;(function(i){i.Input="crt.Input",i.NumberInput="crt.NumberInput",i.Checkbox="crt.Checkbox",i.Combobox="crt.ComboBox",i.DateTime="crt.DateTimePicker",i.Slider="crt.Slider",i.FileList="crt.FileList",i.Color="crt.ColorPicker",i.RichInput="crt.RichTextEditor",i.PhoneInput="crt.PhoneInput",i.EmailInput="crt.EmailInput",i.WebInput="crt.WebInput",i.ImageLink="crt.ImageInput",i.Timer="crt.Timer",i.LocalTime="crt.LocalTime",i.FileInput="crt.FileInput",i.Timeline="crt.Timeline",i.Encrypted="crt.EncryptedInput",i.Toggle="crt.Toggle"})(f||(f={}));var Et=l(28399);const C="crt.DataSourceAttributePropertiesPanel",g={Input:{controlType:f.Input,viewModelAttributeName:"StringAttribute",propertiesPanelComponentTypeName:C},RichInput:{controlType:f.RichInput,viewModelAttributeName:"StringAttribute",propertiesPanelComponentTypeName:C},NumberInput:{controlType:f.NumberInput,viewModelAttributeName:"NumberAttribute",propertiesPanelComponentTypeName:C},Checkbox:{controlType:f.Checkbox,viewModelAttributeName:"BooleanAttribute",propertiesPanelComponentTypeName:C},Combobox:{controlType:f.Combobox,viewModelAttributeName:"LookupAttribute",propertiesPanelComponentTypeName:C},DateTime:{controlType:f.DateTime,viewModelAttributeName:"DateTimeAttribute",propertiesPanelComponentTypeName:C},Slider:{controlType:f.Slider,viewModelAttributeName:"SliderAttribute",propertiesPanelComponentTypeName:C},FileList:{controlType:f.FileList,viewModelAttributeName:"FileListAttribute",propertiesPanelComponentTypeName:C},Color:{controlType:f.Color,viewModelAttributeName:"ColorAttribute",propertiesPanelComponentTypeName:C},WebInput:{controlType:f.WebInput,viewModelAttributeName:"StringAttribute",propertiesPanelComponentTypeName:C},EmailInput:{controlType:f.EmailInput,viewModelAttributeName:"StringAttribute",propertiesPanelComponentTypeName:C},PhoneInput:{controlType:f.PhoneInput,viewModelAttributeName:"StringAttribute",propertiesPanelComponentTypeName:C},ImageLink:{controlType:f.ImageLink,viewModelAttributeName:"ImageLinkAttribute",propertiesPanelComponentTypeName:C},Timer:{controlType:f.Timer,viewModelAttributeName:"TimerAttribute",propertiesPanelComponentTypeName:C},LocalTime:{controlType:f.LocalTime,viewModelAttributeName:"LocalTimeAttribute",propertiesPanelComponentTypeName:C},Timeline:{controlType:f.Timeline,viewModelAttributeName:"LookupAttribute",propertiesPanelComponentTypeName:C},Encrypted:{controlType:f.Encrypted,viewModelAttributeName:"EncryptedAttribute",propertiesPanelComponentTypeName:C},Toggle:{controlType:f.Toggle,viewModelAttributeName:"BooleanAttribute",propertiesPanelComponentTypeName:C}},jt={Input:{...g.Input,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},RichInput:{...g.RichInput,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},NumberInput:{...g.NumberInput,propertiesPanelComponentTypeName:"crt.EntityDataSourceNumberAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Checkbox:{...g.Checkbox,propertiesPanelComponentTypeName:"crt.EntityDataSourceAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Combobox:{...g.Combobox,propertiesPanelComponentTypeName:"crt.EntityDataSourceLookupAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},DateTime:{...g.DateTime,propertiesPanelComponentTypeName:"crt.EntityDataSourceDateTimeAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Slider:{...g.Slider,propertiesPanelComponentTypeName:"crt.EntityDataSourceNumberAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},FileList:{...g.FileList,propertiesPanelComponentTypeName:"crt.FileListPropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Color:{...g.Color,propertiesPanelComponentTypeName:"crt.EntityDataSourceColorAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},WebInput:{...g.WebInput,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},EmailInput:{...g.EmailInput,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},PhoneInput:{...g.PhoneInput,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},ImageLink:{...g.ImageLink,propertiesPanelComponentTypeName:"crt.EntityDataSourceImageLookupAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Timer:{...g.Timer,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},LocalTime:{...g.LocalTime,propertiesPanelComponentTypeName:"crt.EntityDataSourceTextAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Timeline:{...g.Timeline,propertiesPanelComponentTypeName:"crt.EntityDataSourceLookupAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Encrypted:{...g.Encrypted,propertiesPanelComponentTypeName:"crt.EntityDataSourceEncryptedAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"},Toggle:{...g.Toggle,propertiesPanelComponentTypeName:"crt.EntityDataSourceAttributePropertiesPanel",forwardReferencePropertiesPanelComponentTypeName:"crt.EntityForwardReferenceAttributePropertiesPanel"}},Ot=null;class B{constructor(){this._registryResolver=(0,e.inject)(wt.J),this._convertableTypes=[c.r.SHORT_TEXT,c.r.MEDIUM_TEXT,c.r.MAXSIZE_TEXT,c.r.LONG_TEXT,c.r.PHONE_TEXT,c.r.WEB_TEXT,c.r.EMAIL_TEXT,c.r.RICH_TEXT]}getPropertiesPanelDataProviderToken(t){}get controlConfig(){return g}getAttributeEditablePropertiesByType(t){return this.getControlConfigByDataValueType(t).editableProperties}getConfigByType(t){const o=this.getControlConfigByDataValueType(t).configType,a=(0,Et.cloneDeep)(this.controlConfig[o]);return a.propertiesPanelDataProviderToken=this.getPropertiesPanelDataProviderToken(t),a}getControlTypeToReplace(t,o){return this._convertableTypes.includes(t)?this.getControlTypeByDataValueType(t):o}getControlConfigByDataValueType(t){const o=["requirementType"];switch(t){case c.r.Text:case c.r.SHORT_TEXT:case c.r.MEDIUM_TEXT:case c.r.MAXSIZE_TEXT:case c.r.LONG_TEXT:return{configType:"Input",editableProperties:[...o,"type"]};case c.r.SECURE_TEXT:return{configType:"Encrypted",editableProperties:o};case c.r.Integer:case c.r.Float:case c.r.FLOAT0:case c.r.FLOAT1:case c.r.FLOAT2:case c.r.FLOAT3:case c.r.FLOAT4:case c.r.FLOAT8:case c.r.MONEY0:case c.r.MONEY1:case c.r.Money:case c.r.MONEY3:return{configType:"NumberInput",editableProperties:[...o,"type"]};case c.r.Lookup:return{configType:"Combobox",editableProperties:[...o,"referenceSchema"]};case c.r.Date:case c.r.DateTime:case c.r.Time:return{configType:"DateTime",editableProperties:[...o,"type"]};case c.r.Color:return{configType:"Color",editableProperties:o};case c.r.RICH_TEXT:return{configType:"RichInput",editableProperties:[...o,"type"]};case c.r.WEB_TEXT:return{configType:"WebInput",editableProperties:[...o,"type"]};case c.r.EMAIL_TEXT:return{configType:"EmailInput",editableProperties:[...o,"type"]};case c.r.PHONE_TEXT:return{configType:"PhoneInput",editableProperties:[...o,"type"]};case c.r.IMAGELOOKUP:return{configType:"ImageLink",editableProperties:[...o,"referenceSchema"]};default:return{configType:"Input",editableProperties:o}}}getControlTypeByDataValueType(t){const o=this.getControlConfigByDataValueType(t).configType;return f[o]}getDefaultCaptionKeyByDataValueType(t){return null}static{this.\u0275fac=function(o){return new(o||B)}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac,providedIn:"root"})}}class R extends B{getControlConfigByDataValueType(t){return t===c.r.Boolean?{configType:"Checkbox",editableProperties:[]}:super.getControlConfigByDataValueType(t)}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(R)))(a||R)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"})}}var At=l(55932),_e=l(65967),Dt=l(51406),Vt=l(38071),Rt=l(6810),Mt=l(45906);class E{get isProcessingDisabled(){return(0,N.lastValueFrom)(this.featureService.getFeatureState(this.preprocessingFeature))}constructor(t,o,a,r){this.featureService=t,this.metadataModifierService=o,this.comboboxPreprocessorService=a,this.translateService=r,this._metadataSchemaUtils=(0,e.inject)(St.u),this._attributeConfigProvider=(0,e.inject)(R),this.preprocessingFeature="",this.translatePrefix="",this.profileObjectName="",this.viewItemTypes=[],this.profileConfig={},this.editColumns=[],this.viewColumns=[]}_addImageSelectedRequest(t,o){t.imageSelected||this.metadataModifierService.addProperty(t,"imageSelected",{request:"crt.UploadImageRequest",params:{imageAttributeName:o,details:"@event"}})}_addimageClearRequest(t,o){t.imageClear||this.metadataModifierService.addProperty(t,"imageClear",{request:"crt.ClearImageRequest",params:{attributeName:o,attributeValue:null}})}_getDataSourceAttributeByPath(t,o){return o?.find(a=>a.path===t)}_getViewModelAttributeByDataSourcePath(t,o,a){const r=Object.keys(o).find(s=>{const u=o[s]??{};return(0,_e.o)(u)&&u?.modelConfig?.path===t}),p=t.split(".");if(!r&&p.length>2){const s=p[0],u=p.slice(1).join("."),_=this._getDataSourceAttributeByPath(u,a?.attributes);return _&&this._getViewModelAttributeByDataSourcePath(`${s}.${_.name}`,o,a)}return r}_createViewModelAttribute(t,o,a){a[t]||(a[t]={modelConfig:{path:o}})}_findOrCreateViewModelAttribute(t,o,a,r){let p=this._getViewModelAttributeByDataSourcePath(t,o,a);if(!p){const s=t.split(".").slice(1).join("");p=`${this.profileConfig.name}_${s}`,this._createViewModelAttribute(p,t,o)}return r&&(o[p].validators={required:{type:"crt.Required"}}),p}_createFormField(t,o){const{columnName:a,propertyName:r,...p}=t;p.name=`${this.profileConfig.name}_${a.replace(".","")}Field`,p.control=this.profileConfig[r];const s=o?.attributes&&this._getDataSourceAttributeByPath(a,o.attributes);return s?(p.label=p.label||s.caption,p.type=p.type||this._attributeConfigProvider.getControlTypeByDataValueType(s.dataValueType)):p.type=p.type||f.Input,p.readonly||(p.readonly=a.split(".").length>1),p}_getComboboxesViewConfigs(t){return(t.dialogItems||[]).filter(a=>a.type===f.Combobox&&!a.readonly)}_processComboboxes(t,o,a){var r=this;return(0,L.A)(function*(){const p=r._getComboboxesViewConfigs(t);r.comboboxPreprocessorService.crtOnMetaDataInit(p,o),yield r.comboboxPreprocessorService.crtOnModelInit(p,o,a)})()}_getReferenceColumnPath(t,o,a){let s=(o[t].modelConfig?.path||"").split(".");const u=s.shift()||"";if(s.slice(-1)[0]==="Id"&&s.pop(),!s.length)return u;if(s.length===1){const y=s[0];s=(a.findAttributeByName(y)?.path||"").split(".")}return s.unshift(u),s.join(".")}_getProfileObjectAttribute(t){var o=this;return(0,L.A)(function*(){const a=yield(0,N.lastValueFrom)(Dt.K.create(o.profileObjectName));return(yield(0,N.lastValueFrom)(a?.getSchema()))?.findAttributeByName(t)})()}_initProfileConfig(t,o,a,r){var p=this;return(0,L.A)(function*(){p.profileConfig={name:t.name};for(const s of p.viewColumns){if(!s.propertyName)continue;const u=o+"."+s.columnName,_=s.isRequired&&!t.readonly,y=p._findOrCreateViewModelAttribute(u,a,r,_);if(p.profileConfig[s.propertyName]=`$${y}`,s.propertyName==="photo"){const T=r?.findAttributeByName(s.columnName)??(yield p._getProfileObjectAttribute(s.columnName));p.profileConfig.photoTitle=T?.caption??s.columnName}}p.profileConfig.photo+=p.profileConfig.photo?" | crt.ToImageLink":"",Object.assign(p.profileConfig,t),Object.assign(t,p.profileConfig)})()}_initDialogItems(t,o){t.dialogItems||(t.dialogItems=[]),t.dialogTitle=this.translateService.instant(this.translatePrefix+".DialogTitle"),this.editColumns.forEach(a=>{const r=this._createFormField(a,o);t.dialogItems.findIndex(s=>s.name===r.name)===-1&&t.dialogItems.push(r)})}addProfileChangeHandlers(t){if(t.photo){const a=t.photo.split("|").map(r=>r.trim())[0].slice(1);this._addImageSelectedRequest(t,a),this._addimageClearRequest(t,a)}}crtOnModelInit(t,o){var a=this;return(0,L.A)(function*(){if(yield a.isProcessingDisabled)return t;const r=t,p=a._metadataSchemaUtils.getViewConfigInfoByPropertyForValues("type",a.viewItemTypes,r.viewConfig);for(const s of p){const u=s.viewConfig.referenceColumn||"",_=u.slice(1).split(".").pop()||"",T=t.viewModelConfig.attributes;if((0,At.j)(u,T)){const j=T[_]??{};let be="";(0,_e.o)(j)&&(be=j.modelConfig?.path.split(".")[0]);const Ft=o.find(kt=>kt.name===be),ee=yield(0,N.lastValueFrom)(Ft.getSchema()),Ne=a._getReferenceColumnPath(_,T,ee);s.viewConfig.readonly=Ne.split(".").length>1||s.viewConfig.readonly,yield a._initProfileConfig(s.viewConfig,Ne,T,ee),s.viewConfig.readonly||(a.addProfileChangeHandlers(s.viewConfig),a._initDialogItems(s.viewConfig,ee),yield a._processComboboxes(s.viewConfig,T,o))}else s.viewConfig.readonly=!0}return t})()}static{this.\u0275fac=function(o){return new(o||E)(e.\u0275\u0275inject(Vt.wf),e.\u0275\u0275inject(Rt.q),e.\u0275\u0275inject(Mt.S),e.\u0275\u0275inject(w.TranslateService))}}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac})}}class M extends E{constructor(){super(...arguments),this.preprocessingFeature="DisableAccountCompactProfilePreprocessing",this.translatePrefix="AccountCompactProfile",this.profileObjectName="Account",this.viewItemTypes=["crt.AccountCompactProfile"],this.editColumns=[{columnName:"Name",propertyName:"accountName"},{columnName:"AlternativeName",propertyName:"alternativeName",label:this.translateService.instant(this.translatePrefix+".AlternativeNameFieldLabel")}],this.viewColumns=[...this.editColumns,{columnName:"Country",propertyName:"country"},{columnName:"City",propertyName:"city"},{columnName:"AccountLogo",propertyName:"photo"},{columnName:"City.TimeZone",propertyName:"timeZone"}]}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(M)))(a||M)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac})}}class F extends E{constructor(){super(...arguments),this.preprocessingFeature="DisableContactCompactProfilePreprocessing",this.translatePrefix="ContactCompactProfile",this.profileObjectName="Contact",this.viewItemTypes=["crt.ContactCompactProfile"],this.editColumns=[{columnName:"GivenName",propertyName:"firstName",isRequired:!0},{columnName:"Surname",propertyName:"lastName"},{columnName:"MiddleName",propertyName:"middleName"},{columnName:"BirthDate",propertyName:"birthDate",pickerType:"date"}],this.viewColumns=[...this.editColumns,{columnName:"Country",propertyName:"country"},{columnName:"City",propertyName:"city"},{columnName:"Photo",propertyName:"photo"},{columnName:"City.TimeZone",propertyName:"timeZone"},{columnName:"Name",propertyName:"displayName"}]}_addChangeHandler(t,o,a){if(t[o]&&!t[a]){const r=t[o];this.metadataModifierService.addProperty(t,a,{request:"crt.ChangeViewModelAttributeValueRequest",params:{attributeName:r.slice(1),attributeValue:"@event"}})}}addProfileChangeHandlers(t){super.addProfileChangeHandlers(t),this._addChangeHandler(t,"displayName","fullNameChange"),this._addChangeHandler(t,"firstName","firstNameChange"),this._addChangeHandler(t,"lastName","lastNameChange"),this._addChangeHandler(t,"middleName","middleNameChange")}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(F)))(a||F)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac})}}class k extends E{constructor(){super(...arguments),this.preprocessingFeature="DisableUserCompactProfilePreprocessing",this.translatePrefix="UserCompactProfile",this.viewItemTypes=["crt.UserCompactProfile"],this.editColumns=[{columnName:"FirstName",propertyName:"firstName",isRequired:!0},{columnName:"MiddleName",propertyName:"middleName"},{columnName:"LastName",propertyName:"lastName"}],this.viewColumns=[...this.editColumns,{columnName:"Photo",propertyName:"photo"}]}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.\u0275\u0275getInheritedFactory(k)))(a||k)}})()}static{this.\u0275prov=e.\u0275\u0275defineInjectable({token:k,factory:k.\u0275fac})}}let W=class ae{constructor(t){this._materialIconsRegistrator=t,this._icons=[{name:"dialog-close",icon:l(82468)},{name:"contact-compact-profile-icon-placeholder",icon:l(41773)},{name:"account-compact-profile-icon-placeholder",icon:l(33786)}],this._materialIconsRegistrator.addIcons(this._icons)}static{this.\u0275fac=function(o){return new(o||ae)(e.\u0275\u0275inject(le.K))}}static{this.\u0275mod=e.\u0275\u0275defineNgModule({type:ae})}static{this.\u0275inj=e.\u0275\u0275defineInjector({providers:[pe.rK,I,{provide:$.m,useClass:M,multi:!0},{provide:$.m,useClass:F,multi:!0},{provide:$.m,useClass:k,multi:!0}],imports:[A.CommonModule,U.MatIconModule,ne.MatDialogModule,fe.c,se.q,ce.J,me.S,de.g,re.q,ue.X,X.x,w.TranslateModule]})}};W=(0,n.__decorate)([(0,xe.g)({viewElements:[x,h,v],includes:[ve.r,X.x]}),(0,n.__metadata)("design:paramtypes",[le.K])],W),function(){(typeof ngJitMode>"u"||ngJitMode)&&e.\u0275\u0275setNgModuleScope(W,{declarations:[x,h,S,v,V],imports:[A.CommonModule,U.MatIconModule,ne.MatDialogModule,fe.c,Pe.C,se.q,ce.J,me.S,de.g,re.q,ue.X,X.x,w.TranslateModule],exports:[x,h,v,V]})}()},33786:P=>{P.exports=`<svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5254 29.9938C19.4459 29.9938 20.1921 29.2477 20.1921 28.3272V1.66666C20.1921 0.746189 19.4459 0 18.5254 0H1.66667C0.746192 0 0 0.746192 0 1.66667V28.3272C0 29.2477 0.746192 29.9938 1.66667 29.9938H18.5254ZM3.61541 4.4043C3.33926 4.4043 3.11541 4.62815 3.11541 4.9043V8.9043C3.11541 9.18044 3.33926 9.4043 3.61541 9.4043H7.56034C7.83648 9.4043 8.06034 9.18044 8.06034 8.9043V4.9043C8.06034 4.62815 7.83649 4.4043 7.56034 4.4043H3.61541ZM3.61541 12.5C3.33926 12.5 3.11541 12.7239 3.11541 13V17C3.11541 17.2761 3.33926 17.5 3.61541 17.5H7.56034C7.83648 17.5 8.06034 17.2761 8.06034 17V13C8.06034 12.7239 7.83649 12.5 7.56034 12.5H3.61541ZM3.11541 21.0924C3.11541 20.8163 3.33926 20.5924 3.61541 20.5924H7.56034C7.83649 20.5924 8.06034 20.8163 8.06034 21.0924V25.0924C8.06034 25.3686 7.83648 25.5924 7.56034 25.5924H3.61541C3.33926 25.5924 3.11541 25.3686 3.11541 25.0924V21.0924ZM12.6317 4.4043C12.3556 4.4043 12.1317 4.62815 12.1317 4.9043V8.9043C12.1317 9.18044 12.3556 9.4043 12.6317 9.4043H16.5766C16.8528 9.4043 17.0767 9.18044 17.0767 8.9043V4.9043C17.0767 4.62815 16.8528 4.4043 16.5767 4.4043H12.6317ZM12.1317 13C12.1317 12.7239 12.3556 12.5 12.6317 12.5H16.5767C16.8528 12.5 17.0767 12.7239 17.0767 13V17C17.0767 17.2761 16.8528 17.5 16.5766 17.5H12.6317C12.3556 17.5 12.1317 17.2761 12.1317 17V13ZM12.6317 20.5924C12.3556 20.5924 12.1317 20.8163 12.1317 21.0924V25.0924C12.1317 25.3686 12.3556 25.5924 12.6317 25.5924H16.5766C16.8528 25.5924 17.0767 25.3686 17.0767 25.0924V21.0924C17.0767 20.8163 16.8528 20.5924 16.5767 20.5924H12.6317Z" fill="white"/>\r
<path d="M22.3372 6.05469V8.28802H27.2197C27.5235 8.28802 27.7697 8.53426 27.7697 8.83802V25.5058C27.7697 25.8095 27.5235 26.0558 27.2197 26.0558H22.3372V28.2891H27.2197C28.7569 28.2891 30.0031 27.043 30.0031 25.5058V8.83802C30.0031 7.30083 28.7569 6.05469 27.2197 6.05469H22.3372Z" fill="white"/>\r
<path d="M22.3372 11.0776V16.0776H24.802C25.0782 16.0776 25.302 15.8537 25.302 15.5776V11.5776C25.302 11.3015 25.0782 11.0776 24.802 11.0776H22.3372Z" fill="white"/>\r
<path d="M22.3372 18.1674V23.1674H24.802C25.0782 23.1674 25.302 22.9436 25.302 22.6674V18.6674C25.302 18.3913 25.0782 18.1674 24.802 18.1674H22.3372Z" fill="white"/>\r
</svg>\r
`},69200:P=>{P.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M11 20.5H61C62.3617 20.5 63.5 21.6558 63.5 23.125V41.875C63.5 43.3442 62.3617 44.5 61 44.5H11C9.63833 44.5 8.5 43.3442 8.5 41.875V23.125C8.5 21.6558 9.63833 20.5 11 20.5Z" stroke="#70ACEE"/>\r
<path d="M57 25H35C33.3431 25 32 26.3431 32 28C32 29.6569 33.3431 31 35 31H57C58.6569 31 60 29.6569 60 28C60 26.3431 58.6569 25 57 25Z" fill="#D1D1D1"/>\r
<path d="M57 34H35C33.3431 34 32 35.3431 32 37C32 38.6569 33.3431 40 35 40H57C58.6569 40 60 38.6569 60 37C60 35.3431 58.6569 34 57 34Z" fill="#D1D1D1"/>\r
<path d="M23.75 39H27.75V29H23.25M23.75 39V25H14.75V39H23.75ZM25.75 35H23M25.75 32H23M19.75 29H21.75M19.75 32H21.75M19.75 35H21.75M16.75 29H18.75M16.75 32H18.75M16.75 35H18.125H18.75" stroke="#004FD6" stroke-width="2" stroke-miterlimit="10"/>\r
</svg>\r
`},41773:P=>{P.exports=`<svg width="28" height="30" viewBox="0 0 28 30" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M13.7483 13.763C17.5452 13.763 20.6233 10.682 20.6233 6.88148C20.6233 3.08094 17.5452 0 13.7483 0C9.95133 0 6.87328 3.08094 6.87328 6.88148C6.87328 10.682 9.95133 13.763 13.7483 13.763Z" fill="white"/>\r
<path d="M26.5 30C27.0522 30 27.5 29.5523 27.5 29V26.5593C27.5 24.7342 26.7756 22.9838 25.4863 21.6933C24.197 20.4028 22.4483 19.6778 20.625 19.6778L6.89356 19.6778C5.07019 19.6778 3.32151 20.4028 2.0322 21.6933C0.742885 22.9838 0.0185547 24.7342 0.0185547 26.5593L0.0200249 29.0006C0.0203574 29.5527 0.467975 30 1.02002 30H26.5Z" fill="white"/>\r
</svg>\r
`},40941:P=>{P.exports=`<svg width="72" height="64" viewBox="0 0 72 64" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M11 20.5H61C62.3617 20.5 63.5 21.6558 63.5 23.125V41.875C63.5 43.3442 62.3617 44.5 61 44.5H11C9.63833 44.5 8.5 43.3442 8.5 41.875V23.125C8.5 21.6558 9.63833 20.5 11 20.5Z" stroke="#70ACEE"/>\r
<path fill-rule="evenodd" clip-rule="evenodd" d="M21 26C19.8954 26 19 26.8954 19 28C19 29.1046 19.8954 30 21 30C22.1046 30 23 29.1046 23 28C23 26.8954 22.1046 26 21 26ZM17 28C17 25.7909 18.7909 24 21 24C23.2091 24 25 25.7909 25 28C25 30.2091 23.2091 32 21 32C18.7909 32 17 30.2091 17 28ZM20.5458 34.4944C19.2979 34.4219 17.7919 34.9816 16.7163 35.7948C15.9962 36.3392 15.4281 37.1581 15.163 38H26.837C26.5719 37.1581 26.0038 36.3392 25.2837 35.7948C24.2081 34.9816 22.7021 34.4219 21.4542 34.4944L21.4253 34.496H20.5747L20.5458 34.4944ZM20.6314 32.496C18.8078 32.3999 16.859 33.1797 15.5101 34.1994C14.0848 35.277 13 37.1312 13 39V40H29V39C29 37.1312 27.9152 35.277 26.4899 34.1994C25.141 33.1797 23.1922 32.3999 21.3686 32.496H20.6314Z" fill="#004FD6"/>\r
<path d="M57 25H35C33.3431 25 32 26.3431 32 28C32 29.6569 33.3431 31 35 31H57C58.6569 31 60 29.6569 60 28C60 26.3431 58.6569 25 57 25Z" fill="#D1D1D1"/>\r
<path d="M57 34H35C33.3431 34 32 35.3431 32 37C32 38.6569 33.3431 40 35 40H57C58.6569 40 60 38.6569 60 37C60 35.3431 58.6569 34 57 34Z" fill="#D1D1D1"/>\r
</svg>\r
`},82468:P=>{P.exports=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M4 12L12 4" stroke="currentColor" stroke-miterlimit="10"/>\r
<path d="M4 4L12 12" stroke="currentColor" stroke-miterlimit="10"/>\r
</svg>`}}]);
